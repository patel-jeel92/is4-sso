2021-03-29 12:44:24.587 -05:00 [INF] Starting host...
2021-03-29 12:44:30.820 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 12:44:31.143 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 12:44:31.144 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 12:44:31.144 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 12:44:31.144 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 12:44:31.144 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 12:44:31.145 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 12:44:31.765 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 12:44:31.766 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 12:44:31.766 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 12:44:31.767 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 12:44:31.767 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 12:44:31.767 -05:00 [DBG] Error Url: /home/error
2021-03-29 12:44:31.767 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 12:44:45.202 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-29 12:44:45.218 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-29 12:44:45.219 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-29 12:44:45.221 -05:00 [DBG] Start discovery request
2021-03-29 12:44:49.915 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(localdb)\MSSQLLocalDB'.
2021-03-29 12:44:50.030 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.ConfigurationDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b4360946-f8bb-49a2-9f0f-9920371a9608
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:b4360946-f8bb-49a2-9f0f-9920371a9608
Error Number:4060,State:1,Class:11
2021-03-29 12:44:50.078 -05:00 [INF] {"Details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database \"IdentityServerQuickstart.NetCore3.1\" requested by the login. The login failed.\r\nLogin failed for user 'MW\\sm930e'.\r\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)\r\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\r\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\r\n--- End of stack trace from previous location where exception was thrown ---\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)\r\n   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)\r\n   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()\r\n   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)\r\n   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)\r\n   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)\r\n   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)\r\nClientConnectionId:b4360946-f8bb-49a2-9f0f-9920371a9608\r\nError Number:4060,State:1,Class:11","Category":"Error","Name":"Unhandled Exception","EventType":"Error","Id":3000,"Message":"Cannot open database \"IdentityServerQuickstart.NetCore3.1\" requested by the login. The login failed.\r\nLogin failed for user 'MW\\sm930e'.","ActivityId":"80000005-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T17:44:50.0000000Z","ProcessId":28256,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UnhandledExceptionEvent"}
2021-03-29 12:44:50.099 -05:00 [FTL] Unhandled exception: Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
ClientConnectionId:b4360946-f8bb-49a2-9f0f-9920371a9608
Error Number:4060,State:1,Class:11
2021-03-29 12:44:50.119 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToArrayAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at IdentityServer4.EntityFramework.Stores.ResourceStore.GetAllResourcesAsync()
   at IdentityServer4.Stores.IResourceStoreExtensions.GetAllEnabledResourcesAsync(IResourceStore store)
   at IdentityServer4.ResponseHandling.DiscoveryResponseGenerator.CreateDiscoveryDocumentAsync(String baseUrl, String issuerUri)
   at IdentityServer4.Endpoints.DiscoveryEndpoint.ProcessAsync(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:b4360946-f8bb-49a2-9f0f-9920371a9608
Error Number:4060,State:1,Class:11
2021-03-29 12:45:09.861 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 12:45:24.266 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 12:45:24.618 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(localdb)\MSSQLLocalDB'.
2021-03-29 12:45:24.622 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:16878c30-8375-4907-ac48-4bb495a1d012
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:16878c30-8375-4907-ac48-4bb495a1d012
Error Number:4060,State:1,Class:11
2021-03-29 12:45:24.845 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:16878c30-8375-4907-ac48-4bb495a1d012
Error Number:4060,State:1,Class:11
2021-03-29 12:46:56.301 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 12:46:56.385 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(localdb)\MSSQLLocalDB'.
2021-03-29 12:46:56.390 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8cac0e97-1581-4e25-9fff-f406b5b0582b
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:8cac0e97-1581-4e25-9fff-f406b5b0582b
Error Number:4060,State:1,Class:11
2021-03-29 12:46:56.504 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:8cac0e97-1581-4e25-9fff-f406b5b0582b
Error Number:4060,State:1,Class:11
2021-03-29 12:47:37.365 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 12:47:37.434 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(localdb)\MSSQLLocalDB'.
2021-03-29 12:47:37.437 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c0dd84d2-3eae-4688-982c-2e1e43fbac49
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:c0dd84d2-3eae-4688-982c-2e1e43fbac49
Error Number:4060,State:1,Class:11
2021-03-29 12:47:37.560 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:c0dd84d2-3eae-4688-982c-2e1e43fbac49
Error Number:4060,State:1,Class:11
2021-03-29 12:48:29.806 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 12:48:29.897 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(localdb)\MSSQLLocalDB'.
2021-03-29 12:48:29.902 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9882b434-a25d-40ed-b9c1-25fe2728a5dd
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9882b434-a25d-40ed-b9c1-25fe2728a5dd
Error Number:4060,State:1,Class:11
2021-03-29 12:48:30.021 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:9882b434-a25d-40ed-b9c1-25fe2728a5dd
Error Number:4060,State:1,Class:11
2021-03-29 12:50:11.313 -05:00 [INF] Starting host...
2021-03-29 12:50:14.359 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 12:50:14.578 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 12:50:14.578 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 12:50:14.578 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 12:50:14.578 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 12:50:14.578 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 12:50:14.579 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 12:50:14.985 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 12:50:14.987 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 12:50:14.987 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 12:50:14.987 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 12:50:14.988 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 12:50:14.988 -05:00 [DBG] Error Url: /home/error
2021-03-29 12:50:14.988 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 12:50:28.793 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsyncInternal(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ChallengeResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultFilters>g__Awaited|27_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-29 12:50:51.214 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 12:51:00.995 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 12:51:02.610 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(local)\SQLExpress'.
2021-03-29 12:51:02.633 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:32258b1f-c954-4cb1-b42e-a4c576c4c544
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:32258b1f-c954-4cb1-b42e-a4c576c4c544
Error Number:4060,State:1,Class:11
2021-03-29 12:51:02.782 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:32258b1f-c954-4cb1-b42e-a4c576c4c544
Error Number:4060,State:1,Class:11
2021-03-29 13:00:08.121 -05:00 [INF] Starting host...
2021-03-29 13:00:11.786 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 13:00:12.023 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 13:00:12.023 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 13:00:12.023 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 13:00:12.023 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 13:00:12.023 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 13:00:12.024 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 13:00:12.534 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 13:00:12.536 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 13:00:12.536 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 13:00:12.536 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 13:00:12.536 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 13:00:12.536 -05:00 [DBG] Error Url: /home/error
2021-03-29 13:00:12.536 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 13:00:20.479 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 13:00:29.620 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 13:01:00.036 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(local)\SQLExpress'.
2021-03-29 13:01:00.123 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:22cefe69-7d2f-4a67-8c86-1b0cf74c53db
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:22cefe69-7d2f-4a67-8c86-1b0cf74c53db
Error Number:4060,State:1,Class:11
2021-03-29 13:01:00.433 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:22cefe69-7d2f-4a67-8c86-1b0cf74c53db
Error Number:4060,State:1,Class:11
2021-03-29 13:03:09.163 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20804: Unable to retrieve document from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.Net.Http.HttpRequestException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
 ---> System.Net.Sockets.SocketException (10060): A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond.
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at System.Net.Http.ConnectHelper.ConnectAsync(String host, Int32 port, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.EstablishProxyTunnel(HttpRequestHeaders headers, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.ConnectAsync(HttpRequestMessage request, Boolean allowHttp2, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.CreateHttp11ConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.GetHttpConnectionAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpConnectionPool.SendWithRetryAsync(HttpRequestMessage request, Boolean doRequestAuth, CancellationToken cancellationToken)
   at System.Net.Http.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.DiagnosticsHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.FinishSendAsyncBuffered(Task`1 sendTask, HttpRequestMessage request, CancellationTokenSource cts, Boolean disposeCts)
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsyncInternal(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ChallengeResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultFilters>g__Awaited|27_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-29 13:08:29.430 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:22:42.972 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(local)\SQLExpress'.
2021-03-29 14:22:42.980 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9adc2499-ef5b-45a9-93e7-014624094515
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9adc2499-ef5b-45a9-93e7-014624094515
Error Number:4060,State:1,Class:11
2021-03-29 14:22:43.123 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, SqlAuthenticationProviderManager sqlAuthProviderManager)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Logged|12_1(ControllerActionInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:9adc2499-ef5b-45a9-93e7-014624094515
Error Number:4060,State:1,Class:11
2021-03-29 14:22:43.163 -05:00 [ERR] An error occurred using the connection to database 'IdentityServerQuickstart.NetCore3.1' on server '(local)\SQLExpress'.
2021-03-29 14:22:43.168 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer4.EntityFramework.DbContexts.PersistedGrantDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9adc2499-ef5b-45a9-93e7-014624094515
Error Number:4060,State:1,Class:11
Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry)
   at Microsoft.Data.SqlClient.SqlConnection.OpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenDbConnectionAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:9adc2499-ef5b-45a9-93e7-014624094515
Error Number:4060,State:1,Class:11
2021-03-29 14:22:43.179 -05:00 [ERR] Exception removing expired grants: Cannot open database "IdentityServerQuickstart.NetCore3.1" requested by the login. The login failed.
Login failed for user 'MW\sm930e'.
2021-03-29 14:27:31.500 -05:00 [INF] Starting host...
2021-03-29 14:27:34.401 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 14:27:34.594 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 14:27:34.594 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 14:27:34.594 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 14:27:34.594 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 14:27:34.594 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 14:27:34.595 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 14:27:35.018 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 14:27:35.020 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 14:27:35.020 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 14:27:35.020 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 14:27:35.021 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 14:27:35.021 -05:00 [DBG] Error Url: /home/error
2021-03-29 14:27:35.021 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 14:27:35.082 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:27:42.851 -05:00 [ERR] Failed executing DbCommand (98ms) [Parameters=[@__normalizedUserName_0='?' (Size = 256)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[AccessFailedCount], [a].[ConcurrencyStamp], [a].[Email], [a].[EmailConfirmed], [a].[EmployeeId], [a].[IsEnabled], [a].[LockoutEnabled], [a].[LockoutEnd], [a].[NormalizedEmail], [a].[NormalizedUserName], [a].[PasswordHash], [a].[PhoneNumber], [a].[PhoneNumberConfirmed], [a].[SecurityStamp], [a].[TwoFactorEnabled], [a].[UserName]
FROM [AspNetUsers] AS [a]
WHERE [a].[NormalizedUserName] = @__normalizedUserName_0
2021-03-29 14:27:42.943 -05:00 [ERR] An exception occurred while iterating over the results of a query for context type 'IdentityServer.Data.IdentityDbContext'.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0e51cbfe-b9bd-4ce2-86c1-5437207de026
Error Number:208,State:1,Class:16
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
ClientConnectionId:0e51cbfe-b9bd-4ce2-86c1-5437207de026
Error Number:208,State:1,Class:16
2021-03-29 14:27:43.213 -05:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.SqlClient.SqlException (0x80131904): Invalid object name 'AspNetUsers'.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__164_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.<>c.<.cctor>b__274_0(Object obj)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location where exception was thrown ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location where exception was thrown ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(DbContext _, Boolean result, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Identity.UserManager`1.FindByNameAsync(String userName)
   at IdentityServer.AccountController.Login(LoginInputModel model, String button) in C:\Users\sm930e\Downloads\IdentityServer4Demos.NETCore31-master\06. IdentityServer4 External Providers\src\IdentityServer\Quickstart\Account\AccountController.cs:line 112
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
ClientConnectionId:0e51cbfe-b9bd-4ce2-86c1-5437207de026
Error Number:208,State:1,Class:16
2021-03-29 14:39:36.493 -05:00 [INF] Starting host...
2021-03-29 14:39:40.051 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 14:39:40.242 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 14:39:40.243 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 14:39:40.243 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 14:39:40.243 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 14:39:40.243 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 14:39:40.243 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 14:39:40.708 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 14:39:40.710 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 14:39:40.710 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 14:39:40.710 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 14:39:40.710 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 14:39:40.710 -05:00 [DBG] Error Url: /home/error
2021-03-29 14:39:40.710 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 14:39:40.773 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:40:01.964 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"80000017-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:40:01.0000000Z","ProcessId":35888,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-03-29 14:40:45.074 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:41:20.120 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"8000001a-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:41:20.0000000Z","ProcessId":35888,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-03-29 14:41:36.988 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:41:50.572 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:42:24.641 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"8000001e-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:42:24.0000000Z","ProcessId":35888,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-03-29 14:44:18.621 -05:00 [INF] Starting host...
2021-03-29 14:44:22.080 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 14:44:22.288 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 14:44:22.288 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 14:44:22.288 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 14:44:22.288 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 14:44:22.288 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 14:44:22.288 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 14:44:22.709 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 14:44:22.711 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 14:44:22.711 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 14:44:22.711 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 14:44:22.711 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 14:44:22.711 -05:00 [DBG] Error Url: /home/error
2021-03-29 14:44:22.711 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 14:44:22.756 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:44:41.038 -05:00 [DBG] Augmenting SignInContext
2021-03-29 14:44:41.040 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 14:44:41.041 -05:00 [DBG] Adding auth_time claim with value: 1617047081
2021-03-29 14:44:41.074 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 14:44:48.627 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000a-0005-fe00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:44:48.0000000Z","ProcessId":40008,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 14:45:01.389 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:45:32.881 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-29 14:45:32.887 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-29 14:45:32.887 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-29 14:45:32.890 -05:00 [DBG] Start discovery request
2021-03-29 14:45:33.770 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-29 14:46:21.617 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:46:31.702 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:46:37.358 -05:00 [DBG] Augmenting SignInContext
2021-03-29 14:46:37.358 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 14:46:37.359 -05:00 [DBG] Adding auth_time claim with value: 1617047197
2021-03-29 14:46:37.363 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 14:46:39.008 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000008-0007-ff00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:46:39.0000000Z","ProcessId":40008,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 14:46:50.447 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:48:11.883 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:48:13.501 -05:00 [DBG] Augmenting SignInContext
2021-03-29 14:48:13.502 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 14:48:13.502 -05:00 [DBG] Adding auth_time claim with value: 1617047293
2021-03-29 14:48:13.504 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 14:48:13.505 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000000e-0007-ff00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:48:13.0000000Z","ProcessId":40008,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 14:48:26.534 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:48:28.955 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:48:32.258 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:48:35.533 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:48:38.738 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsyncInternal(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ChallengeResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultFilters>g__Awaited|27_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-29 14:48:54.463 -05:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: IDX20803: Unable to obtain configuration from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
 ---> System.IO.IOException: IDX20807: Unable to retrieve document from: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'. HttpResponseMessage: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]', HttpResponseMessage.Content: '[PII is hidden. For more details, see https://aka.ms/IdentityModel/PII.]'.
   at Microsoft.IdentityModel.Protocols.HttpDocumentRetriever.GetDocumentAsync(String address, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.OpenIdConnect.OpenIdConnectConfigurationRetriever.GetAsync(String address, IDocumentRetriever retriever, CancellationToken cancel)
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.Protocols.ConfigurationManager`1.GetConfigurationAsync(CancellationToken cancel)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsyncInternal(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.OpenIdConnect.OpenIdConnectHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Mvc.ChallengeResult.ExecuteResultAsync(ActionContext context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultAsync>g__Logged|21_0(ResourceInvoker invoker, IActionResult result)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResultFilterAsync>g__Awaited|29_0[TFilter,TFilterAsync](ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResultExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.ResultNext[TFilter,TFilterAsync](State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeResultFilters>g__Awaited|27_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|24_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|19_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|6_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.IdentityServerMiddleware.Invoke(HttpContext context, IEndpointRouter router, IUserSession session, IEventService events)
   at IdentityServer4.Hosting.MutualTlsTokenEndpointMiddleware.Invoke(HttpContext context, IAuthenticationSchemeProvider schemes)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at IdentityServer4.Hosting.BaseUrlMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)
2021-03-29 14:48:57.702 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:49:02.537 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:49:06.137 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 14:49:07.814 -05:00 [DBG] Augmenting SignInContext
2021-03-29 14:49:07.814 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 14:49:07.814 -05:00 [DBG] Adding auth_time claim with value: 1617047347
2021-03-29 14:49:07.815 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 14:49:07.816 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"8000001e-0005-fe00-b63f-84710c7967bb","TimeStamp":"2021-03-29T19:49:07.0000000Z","ProcessId":40008,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 14:49:07.825 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 14:55:18.139 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 15:34:28.475 -05:00 [INF] Starting host...
2021-03-29 15:34:32.276 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-29 15:34:32.458 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-29 15:34:32.459 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-29 15:34:32.459 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-29 15:34:32.459 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-29 15:34:32.460 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-29 15:34:32.460 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-29 15:34:32.922 -05:00 [DBG] Login Url: /Account/Login
2021-03-29 15:34:32.924 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-29 15:34:32.925 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-29 15:34:32.925 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-29 15:34:32.925 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-29 15:34:32.925 -05:00 [DBG] Error Url: /home/error
2021-03-29 15:34:32.925 -05:00 [DBG] Error Id Parameter: errorId
2021-03-29 15:34:32.991 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 15:35:11.570 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 15:35:13.922 -05:00 [DBG] Augmenting SignInContext
2021-03-29 15:35:13.924 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 15:35:13.924 -05:00 [DBG] Adding auth_time claim with value: 1617050113
2021-03-29 15:35:13.959 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 15:35:13.976 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000004-0005-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T20:35:13.0000000Z","ProcessId":34644,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 15:35:14.040 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 15:36:09.925 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 15:36:10.035 -05:00 [DBG] Augmenting SignInContext
2021-03-29 15:36:10.036 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 15:36:10.036 -05:00 [DBG] Adding auth_time claim with value: 1617050170
2021-03-29 15:36:10.038 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 15:36:10.039 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000008-0005-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T20:36:10.0000000Z","ProcessId":34644,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 15:36:10.050 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 15:36:46.623 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-29 15:36:52.411 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-29 15:36:52.484 -05:00 [DBG] Augmenting SignInContext
2021-03-29 15:36:52.485 -05:00 [DBG] Adding idp claim with value: local
2021-03-29 15:36:52.486 -05:00 [DBG] Adding auth_time claim with value: 1617050212
2021-03-29 15:36:52.488 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-29 15:36:52.489 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000011-0005-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-29T20:36:52.0000000Z","ProcessId":34644,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-29 15:36:52.500 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-30 08:42:45.173 -05:00 [INF] Starting host...
2021-03-30 08:42:52.831 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 08:42:53.136 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 08:42:53.136 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 08:42:53.137 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 08:42:53.137 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 08:42:53.137 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 08:42:53.137 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 08:42:53.865 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 08:42:53.868 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 08:42:53.868 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 08:42:53.868 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 08:42:53.868 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 08:42:53.868 -05:00 [DBG] Error Url: /home/error
2021-03-30 08:42:53.868 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 08:42:57.392 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-30 08:43:12.759 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 08:43:14.935 -05:00 [DBG] Augmenting SignInContext
2021-03-30 08:43:14.936 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 08:43:14.936 -05:00 [DBG] Adding auth_time claim with value: 1617111794
2021-03-30 08:43:14.983 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 08:43:14.998 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000006-0007-ff00-b63f-84710c7967bb","TimeStamp":"2021-03-30T13:43:14.0000000Z","ProcessId":13512,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-30 08:43:15.176 -05:00 [DBG] 0 persisted grants found for 1
2021-03-30 08:43:26.609 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 08:43:26.662 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 08:43:26.663 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 08:43:26.664 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 08:43:26.665 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000009-0007-ff00-b63f-84710c7967bb","TimeStamp":"2021-03-30T13:43:26.0000000Z","ProcessId":13512,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-03-30 08:43:40.995 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 08:43:40.999 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 08:43:40.999 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 08:43:41.001 -05:00 [DBG] Start discovery request
2021-03-30 08:43:42.086 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 08:43:48.867 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 08:43:48.876 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 08:43:48.877 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 08:43:48.879 -05:00 [WRN] Invalid HTTP request for token endpoint
2021-03-30 08:44:15.510 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-30 08:44:24.015 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 08:44:24.115 -05:00 [DBG] Augmenting SignInContext
2021-03-30 08:44:24.116 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 08:44:24.116 -05:00 [DBG] Adding auth_time claim with value: 1617111864
2021-03-30 08:44:24.117 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 08:44:24.117 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000004-0006-fe00-b63f-84710c7967bb","TimeStamp":"2021-03-30T13:44:24.0000000Z","ProcessId":13512,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-30 08:44:24.178 -05:00 [DBG] 0 persisted grants found for 1
2021-03-30 10:32:07.241 -05:00 [INF] Starting host...
2021-03-30 10:32:11.735 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:32:12.038 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:32:12.038 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:32:12.038 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:32:12.038 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:32:12.039 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:32:12.039 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:32:12.591 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:32:12.594 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:32:12.595 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:32:12.595 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:32:12.595 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:32:12.595 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:32:12.595 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:32:19.418 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 10:32:19.483 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 10:32:19.484 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 10:32:19.485 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 10:32:19.501 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"80000020-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-30T15:32:19.0000000Z","ProcessId":19692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-03-30 10:32:23.202 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-30 10:32:38.155 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 10:32:38.301 -05:00 [DBG] Augmenting SignInContext
2021-03-30 10:32:38.303 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 10:32:38.303 -05:00 [DBG] Adding auth_time claim with value: 1617118358
2021-03-30 10:32:38.309 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 10:32:38.316 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"80000024-0003-fd00-b63f-84710c7967bb","TimeStamp":"2021-03-30T15:32:38.0000000Z","ProcessId":19692,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-30 10:32:38.405 -05:00 [DBG] 0 persisted grants found for 1
2021-03-30 10:37:07.067 -05:00 [INF] Starting host...
2021-03-30 10:37:13.344 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:37:13.605 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:37:13.606 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:37:13.607 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:37:13.607 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:37:13.607 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:37:13.608 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:37:14.089 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:37:14.092 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:37:14.092 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:37:14.092 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:37:14.092 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:37:14.092 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:37:14.092 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:38:33.207 -05:00 [INF] Starting host...
2021-03-30 10:38:36.851 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:38:37.064 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:38:37.064 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:38:37.065 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:38:37.065 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:38:37.065 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:38:37.065 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:38:37.553 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:38:37.555 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:38:37.555 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:38:37.555 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:38:37.556 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:38:37.556 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:38:37.556 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:38:47.130 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 10:38:47.218 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 10:38:47.220 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 10:38:47.221 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 10:38:47.257 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"8000002b-0006-fe00-b63f-84710c7967bb","TimeStamp":"2021-03-30T15:38:47.0000000Z","ProcessId":33248,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-03-30 10:41:56.412 -05:00 [INF] Starting host...
2021-03-30 10:41:57.212 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:41:57.338 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:41:57.338 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:41:57.338 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:41:57.338 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:41:57.338 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:41:57.338 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:41:57.540 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:41:57.542 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:41:57.542 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:41:57.542 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:41:57.542 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:41:57.542 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:41:57.542 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:44:34.728 -05:00 [INF] Starting host...
2021-03-30 10:44:38.295 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:44:38.481 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:44:38.482 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:44:38.483 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:44:38.484 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:44:38.485 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:44:38.486 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:44:44.816 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:44:44.819 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:44:44.820 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:44:44.821 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:44:44.822 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:44:44.823 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:44:44.824 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:45:22.350 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 10:45:22.368 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 10:45:22.369 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 10:45:22.373 -05:00 [DBG] Start discovery request
2021-03-30 10:45:25.189 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 10:45:25.773 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 10:45:25.778 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 10:45:25.780 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 10:45:25.785 -05:00 [DBG] Start key discovery request
2021-03-30 10:45:25.933 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 10:45:25.940 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 10:45:25.942 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 10:45:25.948 -05:00 [DBG] Start authorize request
2021-03-30 10:45:25.956 -05:00 [DBG] No user present in authorize request
2021-03-30 10:45:25.959 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 10:45:26.519 -05:00 [DBG] mvc found in database: true
2021-03-30 10:45:26.528 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 10:45:26.556 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"nqL-pm4L3qkZoLoJgRjR-5vd4A8IKKtAfaAiUMBs-to","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527159258788767.ZGZjM2Y1YjktYzEwZi00ZDNmLTk2NzYtZTc5NTRkY2ExNjIyOWY2OThiMDUtNjhjMS00MmUzLWEyMzktM2JhM2ZmZWQ3M2Iz","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljNNfcMHQlWng6y1l7hDDc1GSQkavg00VI809G26FtCgaU8B4tV4i5pkYyGc3xl587wHAqjVnQYb0piyy7ymiwOREAqFfraIARUEUkzUUsflZdtrBbGRNrHCSmrJQZ6dBmmBDQ_7wtf3eC67mxyL1QpYlDZZACO4UAsb07_6xZYL7DUViAiLjAaVsbt9Up8Qr1VCLV7O6iIaQs3fvXjTlzD7FAer48XTSQCgl-aWnJDa3_pYjFx3OSitizZmsVCS5O5dCZU34tfvPzLhp_PDuitrWAUVAWt4GQXziroI0hWS9QpEnN-2Lap5NkKPy3cxKW6ayhJFT4ltIe3qbtbrjkv_gOnCh4P-YEUm2xWN56lvw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 10:45:26.581 -05:00 [ERR] Request validation failed
2021-03-30 10:45:26.582 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"nqL-pm4L3qkZoLoJgRjR-5vd4A8IKKtAfaAiUMBs-to","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527159258788767.ZGZjM2Y1YjktYzEwZi00ZDNmLTk2NzYtZTc5NTRkY2ExNjIyOWY2OThiMDUtNjhjMS00MmUzLWEyMzktM2JhM2ZmZWQ3M2Iz","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljNNfcMHQlWng6y1l7hDDc1GSQkavg00VI809G26FtCgaU8B4tV4i5pkYyGc3xl587wHAqjVnQYb0piyy7ymiwOREAqFfraIARUEUkzUUsflZdtrBbGRNrHCSmrJQZ6dBmmBDQ_7wtf3eC67mxyL1QpYlDZZACO4UAsb07_6xZYL7DUViAiLjAaVsbt9Up8Qr1VCLV7O6iIaQs3fvXjTlzD7FAer48XTSQCgl-aWnJDa3_pYjFx3OSitizZmsVCS5O5dCZU34tfvPzLhp_PDuitrWAUVAWt4GQXziroI0hWS9QpEnN-2Lap5NkKPy3cxKW6ayhJFT4ltIe3qbtbrjkv_gOnCh4P-YEUm2xWN56lvw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 10:45:26.607 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JIAT8OBQL:0000001F","TimeStamp":"2021-03-30T15:45:26.0000000Z","ProcessId":15804,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 10:59:16.734 -05:00 [INF] Starting host...
2021-03-30 10:59:20.653 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 10:59:20.847 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 10:59:20.848 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 10:59:20.850 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 10:59:20.850 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 10:59:20.851 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 10:59:20.851 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 10:59:23.178 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 10:59:23.185 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 10:59:23.188 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 10:59:23.201 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 10:59:23.213 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 10:59:23.224 -05:00 [DBG] Error Url: /home/error
2021-03-30 10:59:23.232 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 10:59:41.076 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 10:59:41.102 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 10:59:41.104 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 10:59:41.107 -05:00 [DBG] Start discovery request
2021-03-30 10:59:43.562 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 10:59:44.149 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 10:59:44.154 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 10:59:44.155 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 10:59:44.158 -05:00 [DBG] Start key discovery request
2021-03-30 10:59:44.323 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 10:59:44.329 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 10:59:44.331 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 10:59:44.335 -05:00 [DBG] Start authorize request
2021-03-30 10:59:44.342 -05:00 [DBG] No user present in authorize request
2021-03-30 10:59:44.346 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 10:59:44.858 -05:00 [DBG] mvc found in database: true
2021-03-30 10:59:44.869 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 10:59:44.897 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"gMaSiBu-e0vHgAFehs1NcHT75E6D3aS55ZBGhf79kbw","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527167842676112.NmI5NDdmNWMtMzk1NC00NTBhLThlOTYtNWQ3ZGFkZTMwZDg1MThhZTcyMzQtMjgxNS00Mzk5LTk5MDAtNWM4MWFlYzlmZjBk","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljpdLQ3n8FIPXD-xLO602ySqq8HMfflsXranjDiw1f-8tkjbtBSym8-QYIFbfDjTZINOPsUnxibZudCJkhklaRC50B_HB-cqNxg5pMUZRpvaVCR3u2Py9Vr1kDfVy64gzH_Th7qxQ2Gg5dKfsIvIZjZflpXINlYZdUigS2tMjm0pK6vc0GLYhLt-y_qe0ES3kq0Xj3L1kzsKUmYCfP2kpxa72BZ5LobWNcTlJMscBLC54B6wsVjywPiq200wfNP1D-fa2tMrgw-A803Q3Tox6nylWtr9NjRKT3cmu6kwuD8qsvTT3hj_xBfJNdma4b4-LgFUh36JDQIm9aKHx1CG2k-x0cN4Q9mEed78tn3ZT-omw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 10:59:44.922 -05:00 [ERR] Request validation failed
2021-03-30 10:59:44.923 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"gMaSiBu-e0vHgAFehs1NcHT75E6D3aS55ZBGhf79kbw","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527167842676112.NmI5NDdmNWMtMzk1NC00NTBhLThlOTYtNWQ3ZGFkZTMwZDg1MThhZTcyMzQtMjgxNS00Mzk5LTk5MDAtNWM4MWFlYzlmZjBk","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljpdLQ3n8FIPXD-xLO602ySqq8HMfflsXranjDiw1f-8tkjbtBSym8-QYIFbfDjTZINOPsUnxibZudCJkhklaRC50B_HB-cqNxg5pMUZRpvaVCR3u2Py9Vr1kDfVy64gzH_Th7qxQ2Gg5dKfsIvIZjZflpXINlYZdUigS2tMjm0pK6vc0GLYhLt-y_qe0ES3kq0Xj3L1kzsKUmYCfP2kpxa72BZ5LobWNcTlJMscBLC54B6wsVjywPiq200wfNP1D-fa2tMrgw-A803Q3Tox6nylWtr9NjRKT3cmu6kwuD8qsvTT3hj_xBfJNdma4b4-LgFUh36JDQIm9aKHx1CG2k-x0cN4Q9mEed78tn3ZT-omw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 10:59:44.948 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JIJ47DF4E:00000011","TimeStamp":"2021-03-30T15:59:44.0000000Z","ProcessId":35360,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 11:00:20.001 -05:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2021-03-30 11:26:25.624 -05:00 [INF] Starting host...
2021-03-30 11:26:29.387 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 11:26:29.588 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 11:26:29.589 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 11:26:29.589 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 11:26:29.590 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 11:26:29.590 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 11:26:29.591 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 11:26:31.463 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 11:26:31.467 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 11:26:31.468 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 11:26:31.468 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 11:26:31.469 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 11:26:31.473 -05:00 [DBG] Error Url: /home/error
2021-03-30 11:26:31.474 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 11:30:58.558 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 11:30:58.579 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 11:30:58.581 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 11:30:58.585 -05:00 [DBG] Start discovery request
2021-03-30 11:31:01.142 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 11:31:01.930 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 11:31:01.935 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 11:31:01.937 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 11:31:01.961 -05:00 [DBG] Start key discovery request
2021-03-30 11:31:02.297 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 11:31:02.325 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 11:31:02.337 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 11:31:02.344 -05:00 [DBG] Start authorize request
2021-03-30 11:31:02.355 -05:00 [DBG] No user present in authorize request
2021-03-30 11:31:02.361 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 11:31:03.255 -05:00 [DBG] mvc found in database: true
2021-03-30 11:31:03.271 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 11:31:03.316 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"UG4E2RmfzunxoFVNFk9nQUFGLn0nvtnT3gUwvnGeGPc","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527186621402393.Njg0M2QzM2MtNTU3YS00NjhjLWI4NjctNWNkZDIwMDBmMGY1NTVjOWJiMzQtZjQxOS00YzJhLTkwNDMtZDgyODFlNjZlYmM3","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Pliuf6TbZ_glKZ9PK8KrtPRPleR86yOy5k1qufcPAXEjbewpU4MWSTe1HdO5AJ7dW3OpXIOTNLFkkVcWqeqVvv_MdMc5n0_iLSgPhhBCL7-30MF53PiVmkC384QlyTGO6UX3jOWs5nCVXkGli2Ntee8Np7aixkDjEEKOxoE8ibRyyG9iWyMTfx0tqifUZyTDdBn34uiCkfns_s-nSEeDDE_tW1EsVySUvI8OdhQE1UMZKVryGu6KZyv9XmbaVUXMq67ge1h8G8yzbuLnXhtL4KxSVmz1eCj4pcaPiC2gW7WeXmT8l0fpW9oHlvtg6fK1orYschvm48WpztyiGRd1farZjiijyaOhJDWPJm7cvYaIUw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:31:03.356 -05:00 [ERR] Request validation failed
2021-03-30 11:31:03.357 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"UG4E2RmfzunxoFVNFk9nQUFGLn0nvtnT3gUwvnGeGPc","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527186621402393.Njg0M2QzM2MtNTU3YS00NjhjLWI4NjctNWNkZDIwMDBmMGY1NTVjOWJiMzQtZjQxOS00YzJhLTkwNDMtZDgyODFlNjZlYmM3","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Pliuf6TbZ_glKZ9PK8KrtPRPleR86yOy5k1qufcPAXEjbewpU4MWSTe1HdO5AJ7dW3OpXIOTNLFkkVcWqeqVvv_MdMc5n0_iLSgPhhBCL7-30MF53PiVmkC384QlyTGO6UX3jOWs5nCVXkGli2Ntee8Np7aixkDjEEKOxoE8ibRyyG9iWyMTfx0tqifUZyTDdBn34uiCkfns_s-nSEeDDE_tW1EsVySUvI8OdhQE1UMZKVryGu6KZyv9XmbaVUXMq67ge1h8G8yzbuLnXhtL4KxSVmz1eCj4pcaPiC2gW7WeXmT8l0fpW9oHlvtg6fK1orYschvm48WpztyiGRd1farZjiijyaOhJDWPJm7cvYaIUw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:31:03.396 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JJ29H73L4:0000000F","TimeStamp":"2021-03-30T16:31:03.0000000Z","ProcessId":38684,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 11:36:36.611 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 11:36:36.614 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 11:36:36.615 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 11:36:36.617 -05:00 [DBG] Start discovery request
2021-03-30 11:36:36.649 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 11:36:37.058 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 11:36:37.063 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 11:36:37.065 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 11:36:37.067 -05:00 [DBG] Start key discovery request
2021-03-30 11:36:37.228 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 11:36:37.234 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 11:36:37.235 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 11:36:37.237 -05:00 [DBG] Start authorize request
2021-03-30 11:36:37.239 -05:00 [DBG] No user present in authorize request
2021-03-30 11:36:37.240 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 11:36:37.289 -05:00 [DBG] mvc found in database: true
2021-03-30 11:36:37.290 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 11:36:37.293 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"BfsK4D_98ayAb5zHbAca8l9Zya-MVoIWrBU8C6rXuWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527189971310923.ZDEwMDU1NzgtZGU1OC00ZDQzLTgyNzYtM2I2ZDUxMTNkN2MyNjIzNDY4MmEtNmQ4My00NjZlLWIyZGEtMTk1NWNmOTYyNGMx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhoJlZRJSnkMzF3raOUZ0eQ2PVJxnUlEgN_IHTwBFX_Sw3Ekl41a_Qv0h43vpQkd4CagTfObs3l8Gdvzn7OjvUelCHm8rt2-7ks5kDIEfMYdOdLhlORc7tqTMDAVBs0SZ4Y6VNaFsQ0vpA0fA2ak-HIq6LLt-1-mQuJ_oQ-h0zREC2INgViznWO_pi-BWNnONutw2bc2ol8GwJBbei8TXMlh9VXBG9v1M1azwsPq5TBMdRb3KLRhV_Yvef9JPFQOyRjdMAR5NABHroUU9uiFl0rx2xmNDNHNEi0_-HZ9BWCfzVVTbWdaL1aMt9J1aYus4ImGd2LSX4eahoGwtgLrmG4Z3jTRY2evQH_qd6rJCw6WA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:36:37.308 -05:00 [ERR] Request validation failed
2021-03-30 11:36:37.308 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["https://localhost:5002/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"BfsK4D_98ayAb5zHbAca8l9Zya-MVoIWrBU8C6rXuWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527189971310923.ZDEwMDU1NzgtZGU1OC00ZDQzLTgyNzYtM2I2ZDUxMTNkN2MyNjIzNDY4MmEtNmQ4My00NjZlLWIyZGEtMTk1NWNmOTYyNGMx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhoJlZRJSnkMzF3raOUZ0eQ2PVJxnUlEgN_IHTwBFX_Sw3Ekl41a_Qv0h43vpQkd4CagTfObs3l8Gdvzn7OjvUelCHm8rt2-7ks5kDIEfMYdOdLhlORc7tqTMDAVBs0SZ4Y6VNaFsQ0vpA0fA2ak-HIq6LLt-1-mQuJ_oQ-h0zREC2INgViznWO_pi-BWNnONutw2bc2ol8GwJBbei8TXMlh9VXBG9v1M1azwsPq5TBMdRb3KLRhV_Yvef9JPFQOyRjdMAR5NABHroUU9uiFl0rx2xmNDNHNEi0_-HZ9BWCfzVVTbWdaL1aMt9J1aYus4ImGd2LSX4eahoGwtgLrmG4Z3jTRY2evQH_qd6rJCw6WA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:36:37.320 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JJ29H73L6:0000000F","TimeStamp":"2021-03-30T16:36:37.0000000Z","ProcessId":38684,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 11:38:55.579 -05:00 [INF] Starting host...
2021-03-30 11:38:58.992 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 11:38:59.178 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 11:38:59.179 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 11:38:59.180 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 11:38:59.180 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 11:38:59.181 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 11:38:59.181 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 11:39:00.802 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 11:39:00.805 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 11:39:00.806 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 11:39:00.807 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 11:39:00.808 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 11:39:00.808 -05:00 [DBG] Error Url: /home/error
2021-03-30 11:39:00.809 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 11:39:13.728 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 11:39:13.748 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 11:39:13.750 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 11:39:13.754 -05:00 [DBG] Start discovery request
2021-03-30 11:39:16.027 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 11:39:16.546 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 11:39:16.552 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 11:39:16.553 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 11:39:16.557 -05:00 [DBG] Start key discovery request
2021-03-30 11:39:16.714 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 11:39:16.741 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 11:39:16.752 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 11:39:16.758 -05:00 [DBG] Start authorize request
2021-03-30 11:39:16.770 -05:00 [DBG] No user present in authorize request
2021-03-30 11:39:16.777 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 11:39:17.262 -05:00 [DBG] mvc found in database: true
2021-03-30 11:39:17.271 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 11:39:17.296 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":[" https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"VnxJnhenOOyDvSQhexkfw3eniUD1rHk65xxlz8JLsZ0","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527191566522635.YmJmNTEyNjAtZTEzZC00NmUyLTk1MjAtNjQ3OGE5ZjRjY2NmNzI3MTU1NTUtYWZhNi00MzZmLWJjY2UtYTQ0ZDRjZDQ3MmYx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliG-1NxOEnzYotVX8gi9NQUuA_67L-g5hFwUnLR2I2TKJy6d1ir2NP_uHZMwMnBXFM8_sVrwRmQbmyOfL75KNfiW-g-SCyBk1e3gSeoDesJ2y4PkVWtd3C89WVCdqkxuu_Ol6eVxPqmu3J0XOyEMAhYMpZTe8FVza8lF0bMs2UJ2ztwtHKJ_0dPWp-W3FrgguMskxyyYMSVREKxg7WfrfOwONE2ohI1hwp7z4TEBcRI9sEf7z6tg5DgYTtI-BK-ZeECXjHOJ55WFbiGfT2mXcHhoX7YGMMb8ug1nNs9I-LkrW_HAWT5mw6PwC882U_XStblYmh6XZQMveNXWCQoeXW4DTNGBlMktFZQzBykYfhHZA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:39:17.325 -05:00 [ERR] Request validation failed
2021-03-30 11:39:17.325 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":[" https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"VnxJnhenOOyDvSQhexkfw3eniUD1rHk65xxlz8JLsZ0","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527191566522635.YmJmNTEyNjAtZTEzZC00NmUyLTk1MjAtNjQ3OGE5ZjRjY2NmNzI3MTU1NTUtYWZhNi00MzZmLWJjY2UtYTQ0ZDRjZDQ3MmYx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliG-1NxOEnzYotVX8gi9NQUuA_67L-g5hFwUnLR2I2TKJy6d1ir2NP_uHZMwMnBXFM8_sVrwRmQbmyOfL75KNfiW-g-SCyBk1e3gSeoDesJ2y4PkVWtd3C89WVCdqkxuu_Ol6eVxPqmu3J0XOyEMAhYMpZTe8FVza8lF0bMs2UJ2ztwtHKJ_0dPWp-W3FrgguMskxyyYMSVREKxg7WfrfOwONE2ohI1hwp7z4TEBcRI9sEf7z6tg5DgYTtI-BK-ZeECXjHOJ55WFbiGfT2mXcHhoX7YGMMb8ug1nNs9I-LkrW_HAWT5mw6PwC882U_XStblYmh6XZQMveNXWCQoeXW4DTNGBlMktFZQzBykYfhHZA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:39:17.353 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JJ98TKJSJ:00000011","TimeStamp":"2021-03-30T16:39:17.0000000Z","ProcessId":13444,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 11:39:25.616 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 11:39:25.627 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 11:39:25.630 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 11:39:25.633 -05:00 [DBG] Start authorize request
2021-03-30 11:39:25.636 -05:00 [DBG] No user present in authorize request
2021-03-30 11:39:25.637 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 11:39:25.682 -05:00 [DBG] mvc found in database: true
2021-03-30 11:39:25.683 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 11:39:25.687 -05:00 [ERR] Invalid redirect_uri: https://localhost:44359/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":[" https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"gMY9dvFZQQDIeIfWJvJysazqrEVMtpGZN1vGKnDzZew","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527191656017252.ZGFhN2NkMDItYTZlYi00MjI0LWJhMzItNDk4NjA4MGE5MWE0NGE5OGVjZGUtNjllNy00M2IzLTg1YTMtMWVhYWM1ZWI4NTkz","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgE0D3aO9uB8NznrD4_k29VY9wn6VkA8hUp4AWpbioNdlUFjDq5O4LrC5uOL4IZ7goKC9y8G3xJp65HRyxVYKeosfalfk1cTYojaK9GuGU4CQpDQYR_FFMa0BceQGZ6zms6fYXfy1E-gsffvsGbVf5dr-bie4Hkcz83gjg1cw9PbPcyNqP7UfnhiU2LGNo-APyhRcRLzvTgj-Scyo2YN0AmyU55yTWJegcGWCIo2NRVUc6mooBp90s_HYCDBO9RS2qNVtfv_N52c8XishQdvT4pXoc4P5QM0Iw5QNHy0DJAx4s0Sj8eupjDm0AXcqazaGV1ox_Wn_iredTSt5qWhtv1T-O1xUCrmVW6q2dCG_OyTlujGFeBHNzPjtqjJwbJ_qDTwpawh_TQY3nP98GacglidZXugUNeaHZsVfj1X1XoZh3Yw8x3s4Y4N-yQRomxGqAIjdkLcBvCAE2MRszhBOqwklUomAJodQFH16QghnaTVM3bPcfmzoLXPFB5Tjzy8wk3jSH41AM45cQUpNoZPEbYK67bdUQFnu7uzcYIuG76RMuE74JcZ80jDnQTcbcXaorekr3ieRZ4_nGBzJ25vCsY9SdVdhH6btHSaK0-CaZNttSboUqSBbLHcx1gQyriM-z5CePd1EDlFdmIjYBVI9_nodlEuFtzDzBNHBwsQXRt42rFDSyttWLxdOzrNFZ-NHPDIDKJQ2GbY0niGrcY73zzvhQEzKGpJzHhKD07Wz0VmAaGEneZpwXtv_z-9AkRb2pSh1a-H2PQqDq0eS1TAXpHq-llkglA71xPEgganluH1xtS3_UpkPf0KO6GFIUwMNeQQSr1wvLemR5fYFdlX6WF","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:39:25.702 -05:00 [ERR] Request validation failed
2021-03-30 11:39:25.703 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":[" https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"gMY9dvFZQQDIeIfWJvJysazqrEVMtpGZN1vGKnDzZew","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527191656017252.ZGFhN2NkMDItYTZlYi00MjI0LWJhMzItNDk4NjA4MGE5MWE0NGE5OGVjZGUtNjllNy00M2IzLTg1YTMtMWVhYWM1ZWI4NTkz","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgE0D3aO9uB8NznrD4_k29VY9wn6VkA8hUp4AWpbioNdlUFjDq5O4LrC5uOL4IZ7goKC9y8G3xJp65HRyxVYKeosfalfk1cTYojaK9GuGU4CQpDQYR_FFMa0BceQGZ6zms6fYXfy1E-gsffvsGbVf5dr-bie4Hkcz83gjg1cw9PbPcyNqP7UfnhiU2LGNo-APyhRcRLzvTgj-Scyo2YN0AmyU55yTWJegcGWCIo2NRVUc6mooBp90s_HYCDBO9RS2qNVtfv_N52c8XishQdvT4pXoc4P5QM0Iw5QNHy0DJAx4s0Sj8eupjDm0AXcqazaGV1ox_Wn_iredTSt5qWhtv1T-O1xUCrmVW6q2dCG_OyTlujGFeBHNzPjtqjJwbJ_qDTwpawh_TQY3nP98GacglidZXugUNeaHZsVfj1X1XoZh3Yw8x3s4Y4N-yQRomxGqAIjdkLcBvCAE2MRszhBOqwklUomAJodQFH16QghnaTVM3bPcfmzoLXPFB5Tjzy8wk3jSH41AM45cQUpNoZPEbYK67bdUQFnu7uzcYIuG76RMuE74JcZ80jDnQTcbcXaorekr3ieRZ4_nGBzJ25vCsY9SdVdhH6btHSaK0-CaZNttSboUqSBbLHcx1gQyriM-z5CePd1EDlFdmIjYBVI9_nodlEuFtzDzBNHBwsQXRt42rFDSyttWLxdOzrNFZ-NHPDIDKJQ2GbY0niGrcY73zzvhQEzKGpJzHhKD07Wz0VmAaGEneZpwXtv_z-9AkRb2pSh1a-H2PQqDq0eS1TAXpHq-llkglA71xPEgganluH1xtS3_UpkPf0KO6GFIUwMNeQQSr1wvLemR5fYFdlX6WF","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:39:25.723 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JJ98TKJSJ:00000015","TimeStamp":"2021-03-30T16:39:25.0000000Z","ProcessId":13444,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 11:56:48.322 -05:00 [INF] Starting host...
2021-03-30 11:56:51.810 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 11:56:52.003 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 11:56:52.005 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 11:56:52.005 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 11:56:52.006 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 11:56:52.007 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 11:56:52.007 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 11:56:53.987 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 11:56:53.991 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 11:56:53.992 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 11:56:53.992 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 11:56:53.994 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 11:56:53.995 -05:00 [DBG] Error Url: /home/error
2021-03-30 11:56:53.996 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 11:57:13.396 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 11:57:13.417 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 11:57:13.419 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 11:57:13.423 -05:00 [DBG] Start discovery request
2021-03-30 11:57:15.964 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 11:57:16.505 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 11:57:16.510 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 11:57:16.512 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 11:57:16.515 -05:00 [DBG] Start key discovery request
2021-03-30 11:57:16.659 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 11:57:16.669 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 11:57:16.670 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 11:57:16.675 -05:00 [DBG] Start authorize request
2021-03-30 11:57:16.685 -05:00 [DBG] No user present in authorize request
2021-03-30 11:57:16.687 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 11:57:17.186 -05:00 [DBG] mvc found in database: true
2021-03-30 11:57:17.197 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 11:57:17.217 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 11:57:17.232 -05:00 [ERR] Invalid grant type for client: authorization_code
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhCZHUmqqCbW-0wIiRUtqaDdYnDkXZ_6ISvCj-KssYBFk8Hk0869Sgzl386WpVawe-aGv1BTPaHQgEb2gbtNLwUYYigrYb4TNxRsh9viJ2xwRSJ6sL1AlZyz9ntgUzL0pZe1Fmuv9NL40FMy65jxLHTcBCJmpFqRTvqw1rrd2dbacKe-ComEOAD429IrgXGRv_JleXjv690lTOEmIkSmqG8iXahK22IUFxyaLgvzYgUpV3sJy1eMJSsTHSiIM-RN1I8xgjpZImW3t3XW_oJglQH79XtNmCrcqbiMgVc7EnAaGEvNHgdARi6ALDhWmUXWQ0MACk47PeVCzizHtYJEFL3JxMD5x3bbtE9hSvBnD0Mtg","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"SMdkzwpLjZrm_1eiClKqScSxqjuQsxsBtjLluYL-_yA","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527202366044084.ZWNjNGU5MzMtMjg1NS00ZTEzLWJlMTgtYzdiYzFkMDJmZmVjOGYxYjUzODQtNmQ1ZS00ZDQ0LWI1ZDYtNGI3NGY2NTExMmEw","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhCZHUmqqCbW-0wIiRUtqaDdYnDkXZ_6ISvCj-KssYBFk8Hk0869Sgzl386WpVawe-aGv1BTPaHQgEb2gbtNLwUYYigrYb4TNxRsh9viJ2xwRSJ6sL1AlZyz9ntgUzL0pZe1Fmuv9NL40FMy65jxLHTcBCJmpFqRTvqw1rrd2dbacKe-ComEOAD429IrgXGRv_JleXjv690lTOEmIkSmqG8iXahK22IUFxyaLgvzYgUpV3sJy1eMJSsTHSiIM-RN1I8xgjpZImW3t3XW_oJglQH79XtNmCrcqbiMgVc7EnAaGEvNHgdARi6ALDhWmUXWQ0MACk47PeVCzizHtYJEFL3JxMD5x3bbtE9hSvBnD0Mtg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:57:17.254 -05:00 [ERR] Request validation failed
2021-03-30 11:57:17.255 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhCZHUmqqCbW-0wIiRUtqaDdYnDkXZ_6ISvCj-KssYBFk8Hk0869Sgzl386WpVawe-aGv1BTPaHQgEb2gbtNLwUYYigrYb4TNxRsh9viJ2xwRSJ6sL1AlZyz9ntgUzL0pZe1Fmuv9NL40FMy65jxLHTcBCJmpFqRTvqw1rrd2dbacKe-ComEOAD429IrgXGRv_JleXjv690lTOEmIkSmqG8iXahK22IUFxyaLgvzYgUpV3sJy1eMJSsTHSiIM-RN1I8xgjpZImW3t3XW_oJglQH79XtNmCrcqbiMgVc7EnAaGEvNHgdARi6ALDhWmUXWQ0MACk47PeVCzizHtYJEFL3JxMD5x3bbtE9hSvBnD0Mtg","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"SMdkzwpLjZrm_1eiClKqScSxqjuQsxsBtjLluYL-_yA","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527202366044084.ZWNjNGU5MzMtMjg1NS00ZTEzLWJlMTgtYzdiYzFkMDJmZmVjOGYxYjUzODQtNmQ1ZS00ZDQ0LWI1ZDYtNGI3NGY2NTExMmEw","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhCZHUmqqCbW-0wIiRUtqaDdYnDkXZ_6ISvCj-KssYBFk8Hk0869Sgzl386WpVawe-aGv1BTPaHQgEb2gbtNLwUYYigrYb4TNxRsh9viJ2xwRSJ6sL1AlZyz9ntgUzL0pZe1Fmuv9NL40FMy65jxLHTcBCJmpFqRTvqw1rrd2dbacKe-ComEOAD429IrgXGRv_JleXjv690lTOEmIkSmqG8iXahK22IUFxyaLgvzYgUpV3sJy1eMJSsTHSiIM-RN1I8xgjpZImW3t3XW_oJglQH79XtNmCrcqbiMgVc7EnAaGEvNHgdARi6ALDhWmUXWQ0MACk47PeVCzizHtYJEFL3JxMD5x3bbtE9hSvBnD0Mtg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 11:57:17.284 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":"authorization_code","Error":"unauthorized_client","ErrorDescription":"Invalid grant type for client","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JJJ8LP5F7:00000011","TimeStamp":"2021-03-30T16:57:17.0000000Z","ProcessId":20784,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 12:03:06.185 -05:00 [INF] Starting host...
2021-03-30 12:03:09.693 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 12:03:09.893 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 12:03:09.894 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 12:03:09.894 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 12:03:09.895 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 12:03:09.895 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 12:03:09.895 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 12:03:11.875 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 12:03:11.878 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 12:03:11.878 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 12:03:11.881 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 12:03:11.881 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 12:03:11.882 -05:00 [DBG] Error Url: /home/error
2021-03-30 12:03:11.883 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 12:03:24.497 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 12:03:24.515 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 12:03:24.516 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 12:03:24.520 -05:00 [DBG] Start discovery request
2021-03-30 12:03:26.972 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 12:03:27.528 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 12:03:27.532 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 12:03:27.534 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 12:03:27.537 -05:00 [DBG] Start key discovery request
2021-03-30 12:03:27.687 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 12:03:27.695 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 12:03:27.697 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 12:03:27.702 -05:00 [DBG] Start authorize request
2021-03-30 12:03:27.707 -05:00 [DBG] No user present in authorize request
2021-03-30 12:03:27.712 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:03:28.185 -05:00 [DBG] mvc found in database: true
2021-03-30 12:03:28.194 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:03:28.212 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:03:28.303 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:03:28.377 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:03:28.391 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:03:28.395 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:03:28.403 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:03:28.419 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","UiLocales":null,"Nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"1r-Buc77XJ7zr8JKwKyfN6bRkQM-Bj_NrVvi-hG6wew","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 12:03:28.449 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 12:03:28.539 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:03:28.569 -05:00 [DBG] mvc found in database: true
2021-03-30 12:03:28.570 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:03:28.572 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:03:28.576 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:03:28.580 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:03:28.584 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:03:28.589 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:03:28.591 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:03:28.615 -05:00 [DBG] mvc found in database: true
2021-03-30 12:03:28.616 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:03:53.245 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 12:04:09.742 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:04:09.826 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:09.827 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:09.830 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:04:09.836 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:09.854 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:09.858 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:09.862 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:09.865 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:04:15.194 -05:00 [DBG] Augmenting SignInContext
2021-03-30 12:04:15.196 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 12:04:15.197 -05:00 [DBG] Adding auth_time claim with value: 1617123855
2021-03-30 12:04:15.218 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 12:04:18.304 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JJMPBUBMG:00000015","TimeStamp":"2021-03-30T17:04:18.0000000Z","ProcessId":19424,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-30 12:04:18.334 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:18.335 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:18.358 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 12:04:18.362 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 12:04:18.363 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 12:04:18.367 -05:00 [DBG] Start authorize callback request
2021-03-30 12:04:18.371 -05:00 [DBG] User in authorize request: 1
2021-03-30 12:04:18.372 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:04:18.391 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:18.391 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:18.394 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:04:18.397 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:18.401 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:18.405 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:18.408 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:18.410 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:04:18.413 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","UiLocales":null,"Nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_h26VlV3iHfB6LFFmJlW3A","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"1r-Buc77XJ7zr8JKwKyfN6bRkQM-Bj_NrVvi-hG6wew","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 12:04:18.481 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database: false
2021-03-30 12:04:18.485 -05:00 [DBG] user_consent grant with value: mvc|1 not found in store.
2021-03-30 12:04:18.488 -05:00 [DBG] Found no prior consent from consent store, consent is required
2021-03-30 12:04:18.490 -05:00 [INF] Showing consent: User has not yet consented
2021-03-30 12:04:18.548 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:04:18.567 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:18.568 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:18.571 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:04:18.574 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:18.578 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:18.582 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:18.585 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:18.587 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:04:18.605 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:18.605 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:18.610 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:18.613 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:23.489 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 12:04:23.557 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:04:23.581 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:23.582 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:23.586 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:04:23.590 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:23.594 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:23.598 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:23.603 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:23.605 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:04:23.610 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile"],"GrantedScopes":["openid","profile"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7JJMPBUBMG:0000001D","TimeStamp":"2021-03-30T17:04:23.0000000Z","ProcessId":19424,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-30 12:04:23.658 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:23.658 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:23.678 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 12:04:23.681 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 12:04:23.682 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 12:04:23.684 -05:00 [DBG] Start authorize callback request
2021-03-30 12:04:23.711 -05:00 [DBG] User in authorize request: 1
2021-03-30 12:04:23.711 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 12:04:23.732 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:23.732 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:23.735 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 12:04:23.738 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:23.743 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:23.748 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:23.752 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:23.753 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 12:04:23.757 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","UiLocales":null,"Nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"_h26VlV3iHfB6LFFmJlW3A","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile","code_challenge":"1r-Buc77XJ7zr8JKwKyfN6bRkQM-Bj_NrVvi-hG6wew","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 12:04:23.778 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database: false
2021-03-30 12:04:23.779 -05:00 [DBG] user_consent grant with value: mvc|1 not found in store.
2021-03-30 12:04:23.780 -05:00 [DBG] Found no prior consent from consent store, consent is required
2021-03-30 12:04:23.785 -05:00 [INF] User consented to scopes: ["openid","profile"]
2021-03-30 12:04:23.787 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile"]
2021-03-30 12:04:23.790 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-30 12:04:23.823 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= not found in database
2021-03-30 12:04:24.031 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 12:04:24.061 -05:00 [DBG] zE2l5najdN9kR5a7flGWWprN8kMUIkoN/ZhrASzQIXY= not found in database
2021-03-30 12:04:24.081 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****yGzg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JJMPBUBMG:0000001F","TimeStamp":"2021-03-30T17:04:24.0000000Z","ProcessId":19424,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 12:04:24.094 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMpHQT1G8SAMb7uNPGeWK9WggQwvB1SbiybdOekQc2Yhx6jIU1KJ_Qf1qDs8v2iQ67RPhxjSf-TS767yXhmpfsA3-GRM3EHzFYtM-5nO0Y2d7mKatwXpUdZvKY1D-zsMZc69eUJAjnRG290XSjf1z5LMKMYOSZRg0wLU_nbkgoLETHcif9CjKUW20L8TqfhsvraxdEh6v6hrzM6yalk1rw1TYgwItOeezImKRv2-zP0L3c4eX8zeeqTYYPyZmLsZdXipSYaWDwm1V_5dz_OshxSMlpd3ZdVumx3aXa854wzjj_UaV_us1Pme5niBD8CK6uQV6_SStBbHKFXCuqKys0Uc27VWIB6uPrpmSVlYJ9cQ","Scope":"openid profile","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 12:04:24.111 -05:00 [DBG] Augmenting SignInContext
2021-03-30 12:04:24.112 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 12:04:24.323 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 12:04:24.330 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 12:04:24.331 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 12:04:24.336 -05:00 [DBG] Start token request.
2021-03-30 12:04:24.338 -05:00 [DBG] Start client validation
2021-03-30 12:04:24.342 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 12:04:24.344 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 12:04:24.347 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 12:04:24.347 -05:00 [DBG] Secret id found: mvc
2021-03-30 12:04:24.368 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:24.369 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:24.382 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-30 12:04:24.383 -05:00 [DBG] Client validation success
2021-03-30 12:04:24.387 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JJMPBUBMH:00000003","TimeStamp":"2021-03-30T17:04:24.0000000Z","ProcessId":19424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 12:04:24.396 -05:00 [DBG] Start token request validation
2021-03-30 12:04:24.401 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 12:04:24.410 -05:00 [DBG] zE2l5najdN9kR5a7flGWWprN8kMUIkoN/ZhrASzQIXY= found in database: true
2021-03-30 12:04:24.448 -05:00 [DBG] removing zE2l5najdN9kR5a7flGWWprN8kMUIkoN/ZhrASzQIXY= persisted grant from database
2021-03-30 12:04:24.471 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 12:04:24.477 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 12:04:24.483 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"sKjzPpO19ZxCLu6zFv3hL-YPlUZWPNXyHtN1juSyGzg","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"sKjzPpO19ZxCLu6zFv3hL-YPlUZWPNXyHtN1juSyGzg","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"1LF73QIboDsImR4aw8lJU9ND7gNKIa1--qkg7uLRzXM"},"$type":"TokenRequestValidationLog"}
2021-03-30 12:04:24.512 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:24.513 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:24.519 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:24.523 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:24.535 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-30 12:04:24.536 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 12:04:24.654 -05:00 [DBG] mvc found in database: true
2021-03-30 12:04:24.655 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:04:24.660 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 12:04:24.666 -05:00 [DBG] Found [] API scopes in database
2021-03-30 12:04:24.675 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-30 12:04:24.679 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 12:04:24.687 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Kmrw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****JpZA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JJMPBUBMH:00000003","TimeStamp":"2021-03-30T17:04:24.0000000Z","ProcessId":19424,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 12:04:24.693 -05:00 [DBG] Token request success.
2021-03-30 12:05:34.962 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 12:05:35.020 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 12:05:35.024 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 12:05:35.029 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 12:05:35.033 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7JJMPBUBMG:00000031","TimeStamp":"2021-03-30T17:05:35.0000000Z","ProcessId":19424,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-30 12:05:35.127 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 12:05:35.132 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 12:05:35.133 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 12:05:35.137 -05:00 [DBG] Processing signout callback request
2021-03-30 12:05:35.198 -05:00 [DBG] mvc found in database: true
2021-03-30 12:05:35.199 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 12:05:35.206 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 12:05:35.206 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 12:05:35.210 -05:00 [INF] Successful signout callback.
2021-03-30 12:05:35.212 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 12:05:35.214 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 14:33:22.289 -05:00 [INF] Starting host...
2021-03-30 14:33:25.495 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 14:33:25.719 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 14:33:25.736 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 14:33:25.737 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 14:33:25.738 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 14:33:25.738 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 14:33:25.739 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 14:33:28.209 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 14:33:28.212 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 14:33:28.213 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 14:33:28.215 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 14:33:28.219 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 14:33:28.221 -05:00 [DBG] Error Url: /home/error
2021-03-30 14:33:28.224 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 14:35:39.961 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:35:41.626 -05:00 [DBG] Origin http://localhost:3000 is allowed: false
2021-03-30 14:35:41.632 -05:00 [WRN] CorsPolicyService did not allow origin: http://localhost:3000
2021-03-30 14:35:41.635 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:35:41.652 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:35:41.655 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:35:41.660 -05:00 [DBG] Start discovery request
2021-03-30 14:35:42.280 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:35:45.002 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:35:45.043 -05:00 [DBG] Origin http://localhost:3000 is allowed: false
2021-03-30 14:35:45.047 -05:00 [WRN] CorsPolicyService did not allow origin: http://localhost:3000
2021-03-30 14:35:45.049 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:35:45.051 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:35:45.052 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:35:45.054 -05:00 [DBG] Start discovery request
2021-03-30 14:35:45.073 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:37:40.548 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:37:40.566 -05:00 [DBG] Origin http://localhost:3000 is allowed: false
2021-03-30 14:37:40.568 -05:00 [WRN] CorsPolicyService did not allow origin: http://localhost:3000
2021-03-30 14:37:40.570 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:37:40.584 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:37:40.586 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:37:40.589 -05:00 [DBG] Start discovery request
2021-03-30 14:37:40.604 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:41:17.158 -05:00 [INF] Starting host...
2021-03-30 14:41:20.644 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 14:41:20.828 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 14:41:20.828 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 14:41:20.829 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 14:41:20.829 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 14:41:20.831 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 14:41:20.832 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 14:41:22.572 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 14:41:22.574 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 14:41:22.575 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 14:41:22.578 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 14:41:22.579 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 14:41:22.580 -05:00 [DBG] Error Url: /home/error
2021-03-30 14:41:22.581 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 14:42:46.070 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:42:47.571 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:42:47.577 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:42:47.581 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:42:47.598 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:42:47.600 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:42:47.605 -05:00 [DBG] Start discovery request
2021-03-30 14:42:48.211 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:42:48.383 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 14:42:48.390 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 14:42:48.392 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 14:42:48.397 -05:00 [DBG] Start authorize request
2021-03-30 14:42:48.406 -05:00 [DBG] No user present in authorize request
2021-03-30 14:42:48.423 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:42:48.845 -05:00 [DBG] js found in database: true
2021-03-30 14:42:48.855 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:42:48.874 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:42:48.942 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:42:49.005 -05:00 [DBG] Found [] API scopes in database
2021-03-30 14:42:49.011 -05:00 [ERR] Invalid scope: api1
2021-03-30 14:42:49.016 -05:00 [ERR] Request validation failed
2021-03-30 14:42:49.036 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile api1","State":"60a3297d29964f04966b678f0a80a134","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile api1","state":"60a3297d29964f04966b678f0a80a134","code_challenge":"Lk15i115ptnsPx8FdK8_GjWTGPfjqUWTbymrjBj1OJo","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 14:42:49.068 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile api1","GrantType":"authorization_code","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMF5QRRTB:00000001","TimeStamp":"2021-03-30T19:42:49.0000000Z","ProcessId":20880,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2021-03-30 14:52:52.396 -05:00 [INF] Starting host...
2021-03-30 14:52:55.766 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 14:52:55.948 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 14:52:55.962 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 14:52:55.963 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 14:52:55.964 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 14:52:55.965 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 14:52:55.967 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 14:52:58.049 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 14:52:58.051 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 14:52:58.052 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 14:52:58.053 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 14:52:58.054 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 14:52:58.055 -05:00 [DBG] Error Url: /home/error
2021-03-30 14:52:58.056 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 14:53:23.292 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:53:24.738 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:53:24.745 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:53:24.749 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:53:24.769 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:53:24.771 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:53:24.777 -05:00 [DBG] Start discovery request
2021-03-30 14:53:25.373 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:53:25.533 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 14:53:25.539 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 14:53:25.541 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 14:53:25.546 -05:00 [DBG] Start authorize request
2021-03-30 14:53:25.554 -05:00 [DBG] No user present in authorize request
2021-03-30 14:53:25.574 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:53:25.975 -05:00 [DBG] js found in database: true
2021-03-30 14:53:25.982 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:53:25.999 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:53:26.072 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:53:26.137 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:53:26.158 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:53:26.165 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:53:26.173 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:53:26.195 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"f78c8d0874b14675a53d0413a7ade9bb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"f78c8d0874b14675a53d0413a7ade9bb","code_challenge":"GRZxpoIDrIhcbcwlVnLXIXIzXCUC2YP3qWdY0MVQ9BI","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 14:53:26.227 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 14:53:26.288 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:53:26.320 -05:00 [DBG] js found in database: true
2021-03-30 14:53:26.320 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:53:26.325 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:53:26.329 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:53:26.334 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:53:26.339 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:53:26.347 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:53:26.349 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:53:26.373 -05:00 [DBG] js found in database: true
2021-03-30 14:53:26.374 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:14.062 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 14:54:17.458 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:54:17.530 -05:00 [DBG] js found in database: true
2021-03-30 14:54:17.531 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:17.536 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:54:17.543 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:17.569 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:17.576 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:17.586 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:17.588 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:54:17.872 -05:00 [DBG] Augmenting SignInContext
2021-03-30 14:54:17.874 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 14:54:17.879 -05:00 [DBG] Adding auth_time claim with value: 1617134057
2021-03-30 14:54:17.893 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 14:54:17.905 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JMLL293LT:00000007","TimeStamp":"2021-03-30T19:54:17.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-30 14:54:17.938 -05:00 [DBG] js found in database: true
2021-03-30 14:54:17.939 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:17.968 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 14:54:17.972 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 14:54:17.974 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 14:54:17.980 -05:00 [DBG] Start authorize callback request
2021-03-30 14:54:17.984 -05:00 [DBG] User in authorize request: 1
2021-03-30 14:54:17.985 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:54:18.007 -05:00 [DBG] js found in database: true
2021-03-30 14:54:18.007 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:18.012 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:54:18.016 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:18.025 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:18.030 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:18.035 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:18.037 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:54:18.041 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"f78c8d0874b14675a53d0413a7ade9bb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"znlXQSr1dVMy9ph6IqED-g","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"f78c8d0874b14675a53d0413a7ade9bb","code_challenge":"GRZxpoIDrIhcbcwlVnLXIXIzXCUC2YP3qWdY0MVQ9BI","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 14:54:18.084 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 14:54:18.087 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 14:54:18.149 -05:00 [DBG] O7SKUjKZ+eO1N8RhfKa+77F0a67iLkiwM/klVNvUT1Q= not found in database
2021-03-30 14:54:18.332 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****oi9k","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMLL293LT:00000009","TimeStamp":"2021-03-30T19:54:18.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 14:54:18.353 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"f78c8d0874b14675a53d0413a7ade9bb","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 14:54:18.367 -05:00 [DBG] Augmenting SignInContext
2021-03-30 14:54:18.368 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 14:54:19.034 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:54:19.046 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:54:19.048 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:54:19.051 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:54:19.053 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:54:19.056 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:54:19.059 -05:00 [DBG] Start discovery request
2021-03-30 14:54:19.080 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:54:19.092 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-30 14:54:19.098 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:54:19.100 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:54:19.102 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 14:54:19.107 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 14:54:19.108 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 14:54:19.117 -05:00 [DBG] Start token request.
2021-03-30 14:54:19.119 -05:00 [DBG] Start client validation
2021-03-30 14:54:19.124 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 14:54:19.128 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 14:54:19.129 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 14:54:19.130 -05:00 [DBG] Secret id found: js
2021-03-30 14:54:19.162 -05:00 [DBG] js found in database: true
2021-03-30 14:54:19.163 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:19.167 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-30 14:54:19.167 -05:00 [DBG] Client validation success
2021-03-30 14:54:19.170 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMLL293LS:00000005","TimeStamp":"2021-03-30T19:54:19.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 14:54:19.182 -05:00 [DBG] Start token request validation
2021-03-30 14:54:19.189 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 14:54:19.214 -05:00 [DBG] O7SKUjKZ+eO1N8RhfKa+77F0a67iLkiwM/klVNvUT1Q= found in database: true
2021-03-30 14:54:19.257 -05:00 [DBG] removing O7SKUjKZ+eO1N8RhfKa+77F0a67iLkiwM/klVNvUT1Q= persisted grant from database
2021-03-30 14:54:19.285 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 14:54:19.290 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 14:54:19.297 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"la8p7XZu6DuZOppMbN9fw9A2-dDImpllhFGlW9Ioi9k","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"la8p7XZu6DuZOppMbN9fw9A2-dDImpllhFGlW9Ioi9k","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"d9ce037ea0ad4550af9e4bd8a293186f372ef059c34141acb0a3fdbbd0407fa9f1aab06534964e44be647391f1e8b225","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-30 14:54:19.325 -05:00 [DBG] js found in database: true
2021-03-30 14:54:19.327 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:19.334 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:19.338 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:19.351 -05:00 [DBG] Getting claims for access token for client: js
2021-03-30 14:54:19.352 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 14:54:19.443 -05:00 [DBG] js found in database: true
2021-03-30 14:54:19.444 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:19.450 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:19.456 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:54:19.465 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-30 14:54:19.468 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 14:54:19.473 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****XsnA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****YWEA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMLL293LS:00000005","TimeStamp":"2021-03-30T19:54:19.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 14:54:19.483 -05:00 [DBG] Token request success.
2021-03-30 14:54:19.502 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 14:54:19.508 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:54:19.509 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:54:19.514 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 14:54:19.518 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:54:19.519 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:54:19.520 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-30 14:54:19.523 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-30 14:54:19.525 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-30 14:54:19.529 -05:00 [DBG] Start userinfo request
2021-03-30 14:54:19.531 -05:00 [DBG] Bearer token found in header
2021-03-30 14:54:19.608 -05:00 [DBG] js found in database: true
2021-03-30 14:54:19.609 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:19.635 -05:00 [DBG] js found in database: true
2021-03-30 14:54:19.635 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:19.642 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 14:54:19.645 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617134059,"exp":1617137659,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617134057,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 14:54:19.656 -05:00 [DBG] Creating userinfo response
2021-03-30 14:54:19.660 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:54:19.662 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:54:19.666 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:19.672 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-30 14:54:19.674 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:54:19.677 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:54:19.684 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-30 14:54:19.686 -05:00 [DBG] End userinfo request
2021-03-30 14:54:19.717 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 14:54:19.720 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 14:54:19.722 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 14:54:19.725 -05:00 [DBG] Rendering check session result
2021-03-30 14:54:27.741 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 14:54:27.746 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 14:54:27.750 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 14:54:27.754 -05:00 [DBG] Processing signout request for 1
2021-03-30 14:54:27.757 -05:00 [DBG] Start end session request validation
2021-03-30 14:54:27.761 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 14:54:27.771 -05:00 [DBG] Success validating end session request from null
2021-03-30 14:54:32.671 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 14:54:32.694 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 14:54:32.699 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 14:54:32.704 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 14:54:32.709 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7JMLL293LT:00000011","TimeStamp":"2021-03-30T19:54:32.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2021-03-30 14:54:32.777 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 14:54:32.783 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 14:54:32.789 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 14:54:32.798 -05:00 [DBG] Processing signout callback request
2021-03-30 14:54:32.834 -05:00 [DBG] js found in database: true
2021-03-30 14:54:32.835 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:32.839 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 14:54:32.840 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 14:54:32.850 -05:00 [INF] Successful signout callback.
2021-03-30 14:54:32.850 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 14:54:32.851 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 14:54:37.067 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 14:54:37.070 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 14:54:37.072 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 14:54:37.075 -05:00 [DBG] Processing signout callback request
2021-03-30 14:54:37.101 -05:00 [DBG] js found in database: true
2021-03-30 14:54:37.102 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:54:37.105 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 14:54:37.107 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 14:54:37.108 -05:00 [INF] Successful signout callback.
2021-03-30 14:54:37.109 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 14:54:37.111 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 14:55:22.498 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:55:22.508 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:55:22.511 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:55:22.513 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:55:22.527 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:55:22.529 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:55:22.538 -05:00 [DBG] Start discovery request
2021-03-30 14:55:22.555 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:55:22.591 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 14:55:22.597 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 14:55:22.598 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 14:55:22.601 -05:00 [DBG] Start authorize request
2021-03-30 14:55:22.603 -05:00 [DBG] No user present in authorize request
2021-03-30 14:55:22.605 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:22.645 -05:00 [DBG] js found in database: true
2021-03-30 14:55:22.646 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:22.653 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:22.661 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:22.682 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:22.688 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:22.695 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:22.697 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:22.700 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"91ac8011509c4ca4a2d972a98d3d1540","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"91ac8011509c4ca4a2d972a98d3d1540","code_challenge":"7z0NgUnt0-15KUKAG7mIM4sza_oNCKbsVZc54pgWmRs","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 14:55:22.715 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 14:55:22.725 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:22.746 -05:00 [DBG] js found in database: true
2021-03-30 14:55:22.747 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:22.751 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:22.755 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:22.759 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:22.764 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:22.768 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:22.770 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:22.786 -05:00 [DBG] js found in database: true
2021-03-30 14:55:22.788 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:34.494 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 14:55:34.501 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:34.525 -05:00 [DBG] js found in database: true
2021-03-30 14:55:34.526 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:34.529 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:34.534 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:34.540 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:34.545 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:34.551 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:34.554 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:34.573 -05:00 [WRN] Invalid password for user 1.
2021-03-30 14:55:34.574 -05:00 [WRN] User 1 failed to provide the correct password.
2021-03-30 14:55:34.652 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM7JMLL293LT:0000001D","TimeStamp":"2021-03-30T19:55:34.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2021-03-30 14:55:34.661 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:34.680 -05:00 [DBG] js found in database: true
2021-03-30 14:55:34.681 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:34.685 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:34.694 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:34.699 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:34.707 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:34.713 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:34.716 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:34.742 -05:00 [DBG] js found in database: true
2021-03-30 14:55:34.743 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:46.648 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 14:55:46.656 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:46.702 -05:00 [DBG] js found in database: true
2021-03-30 14:55:46.703 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:46.710 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:46.716 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:46.722 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:46.728 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:46.732 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:46.734 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:46.770 -05:00 [DBG] Augmenting SignInContext
2021-03-30 14:55:46.770 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 14:55:46.772 -05:00 [DBG] Adding auth_time claim with value: 1617134146
2021-03-30 14:55:46.774 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 14:55:46.776 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JMLL293LT:0000001F","TimeStamp":"2021-03-30T19:55:46.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2021-03-30 14:55:46.801 -05:00 [DBG] js found in database: true
2021-03-30 14:55:46.802 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:46.815 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 14:55:46.817 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 14:55:46.819 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 14:55:46.823 -05:00 [DBG] Start authorize callback request
2021-03-30 14:55:46.824 -05:00 [DBG] User in authorize request: 1
2021-03-30 14:55:46.825 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 14:55:46.850 -05:00 [DBG] js found in database: true
2021-03-30 14:55:46.851 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:46.853 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 14:55:46.857 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:46.862 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:46.866 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:46.870 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:46.873 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 14:55:46.878 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"91ac8011509c4ca4a2d972a98d3d1540","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"VMXhgCzvVBMU3iZuZslYLQ","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"91ac8011509c4ca4a2d972a98d3d1540","code_challenge":"7z0NgUnt0-15KUKAG7mIM4sza_oNCKbsVZc54pgWmRs","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 14:55:46.894 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 14:55:46.894 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 14:55:46.899 -05:00 [DBG] 7iiZkj37zHeMuanik5fMf66lRU6/LW/Wd/TIp5uRxQw= not found in database
2021-03-30 14:55:46.906 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****kLmQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMLL293LT:00000021","TimeStamp":"2021-03-30T19:55:46.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 14:55:46.916 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"91ac8011509c4ca4a2d972a98d3d1540","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 14:55:46.922 -05:00 [DBG] Augmenting SignInContext
2021-03-30 14:55:46.923 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 14:55:47.657 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 14:55:47.665 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:55:47.666 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:55:47.668 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 14:55:47.670 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 14:55:47.672 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 14:55:47.674 -05:00 [DBG] Start discovery request
2021-03-30 14:55:47.680 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 14:55:47.689 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-30 14:55:47.693 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:55:47.694 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:55:47.695 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 14:55:47.697 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 14:55:47.700 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 14:55:47.703 -05:00 [DBG] Start token request.
2021-03-30 14:55:47.704 -05:00 [DBG] Start client validation
2021-03-30 14:55:47.705 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 14:55:47.706 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 14:55:47.707 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 14:55:47.710 -05:00 [DBG] Secret id found: js
2021-03-30 14:55:47.726 -05:00 [DBG] js found in database: true
2021-03-30 14:55:47.726 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:47.729 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-30 14:55:47.729 -05:00 [DBG] Client validation success
2021-03-30 14:55:47.731 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMLL293LS:0000000F","TimeStamp":"2021-03-30T19:55:47.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 14:55:47.735 -05:00 [DBG] Start token request validation
2021-03-30 14:55:47.736 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 14:55:47.739 -05:00 [DBG] 7iiZkj37zHeMuanik5fMf66lRU6/LW/Wd/TIp5uRxQw= found in database: true
2021-03-30 14:55:47.744 -05:00 [DBG] removing 7iiZkj37zHeMuanik5fMf66lRU6/LW/Wd/TIp5uRxQw= persisted grant from database
2021-03-30 14:55:47.749 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 14:55:47.752 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 14:55:47.752 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"HbKW9TuQn-1lNbV-l6h_4aF2LWHQuUbpM5YNhbrkLmQ","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"HbKW9TuQn-1lNbV-l6h_4aF2LWHQuUbpM5YNhbrkLmQ","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"90fdb09183be4fa18306dabe097c9a52803c7f7548d04cbe82e6048bc5ff79c893c5aaf298234334a17ee255ed142f7a","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-30 14:55:47.771 -05:00 [DBG] js found in database: true
2021-03-30 14:55:47.771 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:47.775 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:47.780 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:47.781 -05:00 [DBG] Getting claims for access token for client: js
2021-03-30 14:55:47.782 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 14:55:47.804 -05:00 [DBG] js found in database: true
2021-03-30 14:55:47.805 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:47.810 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:47.814 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 14:55:47.818 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-30 14:55:47.819 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 14:55:47.823 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****eD-w","$type":"Token"},{"TokenType":"access_token","TokenValue":"****8QYg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMLL293LS:0000000F","TimeStamp":"2021-03-30T19:55:47.0000000Z","ProcessId":33884,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 14:55:47.835 -05:00 [DBG] Token request success.
2021-03-30 14:55:47.846 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 14:55:47.850 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:55:47.852 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:55:47.856 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 14:55:47.860 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 14:55:47.862 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 14:55:47.863 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-30 14:55:47.866 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-30 14:55:47.867 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-30 14:55:47.869 -05:00 [DBG] Start userinfo request
2021-03-30 14:55:47.870 -05:00 [DBG] Bearer token found in header
2021-03-30 14:55:47.888 -05:00 [DBG] js found in database: true
2021-03-30 14:55:47.891 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:47.907 -05:00 [DBG] js found in database: true
2021-03-30 14:55:47.908 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 14:55:47.915 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 14:55:47.916 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617134147,"exp":1617137747,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617134146,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 14:55:47.924 -05:00 [DBG] Creating userinfo response
2021-03-30 14:55:47.925 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:55:47.926 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:55:47.929 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:47.931 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-30 14:55:47.935 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 14:55:47.937 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 14:55:47.944 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-30 14:55:47.946 -05:00 [DBG] End userinfo request
2021-03-30 14:55:47.974 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 14:55:47.978 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 14:55:47.980 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 14:55:47.981 -05:00 [DBG] Rendering check session result
2021-03-30 15:00:06.400 -05:00 [INF] Starting host...
2021-03-30 15:00:10.040 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-30 15:00:10.218 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-30 15:00:10.219 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-30 15:00:10.219 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-30 15:00:10.220 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-30 15:00:10.220 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-30 15:00:10.221 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-30 15:00:11.939 -05:00 [DBG] Login Url: /Account/Login
2021-03-30 15:00:11.941 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-30 15:00:11.943 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-30 15:00:11.945 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-30 15:00:11.946 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-30 15:00:11.947 -05:00 [DBG] Error Url: /home/error
2021-03-30 15:00:11.948 -05:00 [DBG] Error Id Parameter: errorId
2021-03-30 15:00:52.978 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:00:54.486 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:00:54.494 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:00:54.502 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:00:54.517 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:00:54.519 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:00:54.526 -05:00 [DBG] Start discovery request
2021-03-30 15:00:55.095 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:00:55.249 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:00:55.268 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:00:55.270 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:00:55.273 -05:00 [DBG] Start authorize request
2021-03-30 15:00:55.281 -05:00 [DBG] No user present in authorize request
2021-03-30 15:00:55.298 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:00:55.724 -05:00 [DBG] js found in database: true
2021-03-30 15:00:55.733 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:00:55.751 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:00:55.823 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:00:55.887 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:00:55.906 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:00:55.912 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:00:55.920 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:00:55.937 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"848031e664fb4b5db9711358a8eeb839","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"848031e664fb4b5db9711358a8eeb839","code_challenge":"x2sHAL5e_a2efreS1-ZpJPOZ0a-Xy66qvR8eskFlGIw","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:00:55.960 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:00:56.049 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:00:56.081 -05:00 [DBG] js found in database: true
2021-03-30 15:00:56.082 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:00:56.086 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:00:56.091 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:00:56.099 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:00:56.105 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:00:56.111 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:00:56.113 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:00:56.141 -05:00 [DBG] js found in database: true
2021-03-30 15:00:56.141 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:04:33.317 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:04:33.338 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:04:33.344 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:04:33.347 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:04:33.350 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:04:33.352 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:04:33.354 -05:00 [DBG] Start discovery request
2021-03-30 15:04:33.370 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:04:33.420 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:04:33.422 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:04:33.424 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:04:33.426 -05:00 [DBG] Rendering check session result
2021-03-30 15:04:40.603 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:04:40.612 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:04:40.613 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:04:40.616 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:04:40.631 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:04:40.633 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:04:40.639 -05:00 [DBG] Start discovery request
2021-03-30 15:04:40.648 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:04:40.726 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:04:40.729 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:04:40.731 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:04:40.732 -05:00 [DBG] Start authorize request
2021-03-30 15:04:40.734 -05:00 [DBG] No user present in authorize request
2021-03-30 15:04:40.736 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:04:40.771 -05:00 [DBG] js found in database: true
2021-03-30 15:04:40.772 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:04:40.776 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:04:40.783 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:04:40.802 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:04:40.807 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:04:40.812 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:04:40.819 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:04:40.821 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"cb4aedf669df41be809846b039e726cb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"cb4aedf669df41be809846b039e726cb","code_challenge":"ZKquHlqaEMOXB3gZ3_a3AfgexCgYPQQzZ97kVjRfKzw","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:04:40.831 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:04:40.887 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:04:40.907 -05:00 [DBG] js found in database: true
2021-03-30 15:04:40.908 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:04:40.910 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:04:40.914 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:04:40.919 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:04:40.928 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:04:40.933 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:04:40.934 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:04:40.971 -05:00 [DBG] js found in database: true
2021-03-30 15:04:40.971 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:10:55.920 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:10:55.923 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:10:55.924 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:10:55.924 -05:00 [DBG] Start discovery request
2021-03-30 15:10:55.970 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:10:56.351 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 15:10:56.354 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 15:10:56.357 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 15:10:56.361 -05:00 [DBG] Start key discovery request
2021-03-30 15:10:56.494 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:10:56.498 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:10:56.502 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:10:56.511 -05:00 [DBG] Processing signout request for anonymous
2021-03-30 15:10:56.514 -05:00 [DBG] Start end session request validation
2021-03-30 15:10:56.518 -05:00 [DBG] Start identity token validation
2021-03-30 15:10:56.600 -05:00 [DBG] mvc found in database: true
2021-03-30 15:10:56.601 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:10:56.605 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-30 15:10:56.822 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:10:56.828 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617123864,"exp":1617124164,"iss":"https://localhost:5000","aud":"mvc","nonce":"637527206076283114.NzBiNzgxYTQtMzE0MC00ZGFkLTlmNjMtOTMxYjk2ZDk3NWZjMmFiOTg2MTgtOTRkZi00NGZlLTkzNzktOGY2NGY1NWNkMTEy","iat":1617123864,"at_hash":"l_Q_xikMiFyx94cBY9_qNg","s_hash":"Tnqy6muw5E-b2qsYxmCr8Q","sid":"_h26VlV3iHfB6LFFmJlW3A","sub":"1","auth_time":1617123855,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:10:56.844 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliCkQyKVzoDfG1lsFRYQped0Zx42iv_nRcj7DdeBGG--9P12Cn9qZnEU3w7PLH9pEkrplf5h6iIUSL6m37r382mmlr64gpAdLmO8jiyjs97nhxDjLeetq4ICNsYqcxRiQ4cy0qW9FD4GSrQ8ew2_rut","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliCkQyKVzoDfG1lsFRYQped0Zx42iv_nRcj7DdeBGG--9P12Cn9qZnEU3w7PLH9pEkrplf5h6iIUSL6m37r382mmlr64gpAdLmO8jiyjs97nhxDjLeetq4ICNsYqcxRiQ4cy0qW9FD4GSrQ8ew2_rut","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:10:56.862 -05:00 [DBG] Success validating end session request from mvc
2021-03-30 15:11:04.153 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:11:04.163 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:11:04.167 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:11:04.169 -05:00 [DBG] Start authorize request
2021-03-30 15:11:04.172 -05:00 [DBG] No user present in authorize request
2021-03-30 15:11:04.176 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:11:04.203 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:04.203 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:11:04.207 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:11:04.215 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:04.233 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:04.240 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:04.244 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:04.247 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:11:04.249 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgLl56LK9O70wDTcHmBtstGYmMYl4H6lrKcIfVqk9KtWkdF_JyJnQEwqTONAPt5bW0YEoX66Tj7l2xNzzwl4geFwi6sa5IMn1A0o9lFcv7oFomdnTplI4GV9UsobdK1WsiGccZq0KuczPnfNZVaMky9hUAeBNPNJOYWVQsATqWF5aoL3ev3MlfmZJZTXT5ApQyTA_b4rAV6oWo4y3c4pO2TAbLLIO5heav4cUxQWHEfr_TaeH7a4Yqdl87rJhVn7DXfeqo5WRdaKwjRNCEe8Hn3bKiujtTP3RnlE7kChmJPK8FmMkI09_UMiwSTLj0Ql8541tKsKdO6MFqzAq4UaKsrnJu2_WOMKBadXqb9ssvRAg","UiLocales":null,"Nonce":"637527318641399884.YjVhYjNiNjQtYTYyMi00MjBkLTg5MjQtMzZjZTAwMzdlNDI3MTMwMGU5OTAtYWVhOS00ODMzLTk3YjctMGNjMzBiZGJjNjNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"Qt_ssxggVYgTZC_HToL0Fpvi7Bzel7gNGeNzn-7AoVc","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527318641399884.YjVhYjNiNjQtYTYyMi00MjBkLTg5MjQtMzZjZTAwMzdlNDI3MTMwMGU5OTAtYWVhOS00ODMzLTk3YjctMGNjMzBiZGJjNjNk","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgLl56LK9O70wDTcHmBtstGYmMYl4H6lrKcIfVqk9KtWkdF_JyJnQEwqTONAPt5bW0YEoX66Tj7l2xNzzwl4geFwi6sa5IMn1A0o9lFcv7oFomdnTplI4GV9UsobdK1WsiGccZq0KuczPnfNZVaMky9hUAeBNPNJOYWVQsATqWF5aoL3ev3MlfmZJZTXT5ApQyTA_b4rAV6oWo4y3c4pO2TAbLLIO5heav4cUxQWHEfr_TaeH7a4Yqdl87rJhVn7DXfeqo5WRdaKwjRNCEe8Hn3bKiujtTP3RnlE7kChmJPK8FmMkI09_UMiwSTLj0Ql8541tKsKdO6MFqzAq4UaKsrnJu2_WOMKBadXqb9ssvRAg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:11:04.271 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:11:04.319 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:11:04.345 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:04.346 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:11:04.351 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:11:04.356 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:04.361 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:04.371 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:04.377 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:04.378 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:11:04.396 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:04.397 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:11:34.018 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:11:34.023 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:11:34.025 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:11:34.028 -05:00 [DBG] Start discovery request
2021-03-30 15:11:34.062 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:11:34.447 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 15:11:34.451 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 15:11:34.453 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 15:11:34.461 -05:00 [DBG] Start key discovery request
2021-03-30 15:11:34.637 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:11:34.643 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:11:34.665 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:11:34.667 -05:00 [DBG] Start authorize request
2021-03-30 15:11:34.669 -05:00 [DBG] No user present in authorize request
2021-03-30 15:11:34.671 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:11:34.732 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:34.733 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:11:34.735 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:11:34.742 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:34.764 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:34.770 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:34.774 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:34.776 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:11:34.778 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Pljloc5EMgPf-EZKiQBAaFc7pzS5Cvv5dA-dkE0WwiAa16eIkDcDhVbUCbzhZG1IHKz55Z8ClCmlGdVa2pLLX2E6JnW8WJWG6XakVJSFegQT1btMp1kEGFb_j2hr9ISUvcYKmi47mznqqPesdvX9Rtge9p14j5wK7EuwJrXraTUta0dwY7CaZ23NIc7B3jMXp2DC5oh8UKoDlmH6YQZ9pTPwcP0jy8LIDe9qGMs3_k81lFCZbwjyRSynVghEDn76P4ZuzxoFZbdfYEiAzz1ZZCSkn55hz3-vy5dnw-eLICL24Jj0tr5tPJTP9UZxL2-RTp2Ah6h39jFftvw0H5-vjM4fIVnHW8JWadyClDEPeyFlcg","UiLocales":null,"Nonce":"637527318945111508.ODgyZDhjYTMtZTJhNS00MDk4LWFmODktY2NkNjExOTFhYzQxNDcxNmY2NjMtZjUwYS00NTY3LThkZDUtODFkY2U2OTJmOTc0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"rrPL8BHbBVgincqlchGV2Ru6tXdcWjvWOD2l9tKDtXo","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527318945111508.ODgyZDhjYTMtZTJhNS00MDk4LWFmODktY2NkNjExOTFhYzQxNDcxNmY2NjMtZjUwYS00NTY3LThkZDUtODFkY2U2OTJmOTc0","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Pljloc5EMgPf-EZKiQBAaFc7pzS5Cvv5dA-dkE0WwiAa16eIkDcDhVbUCbzhZG1IHKz55Z8ClCmlGdVa2pLLX2E6JnW8WJWG6XakVJSFegQT1btMp1kEGFb_j2hr9ISUvcYKmi47mznqqPesdvX9Rtge9p14j5wK7EuwJrXraTUta0dwY7CaZ23NIc7B3jMXp2DC5oh8UKoDlmH6YQZ9pTPwcP0jy8LIDe9qGMs3_k81lFCZbwjyRSynVghEDn76P4ZuzxoFZbdfYEiAzz1ZZCSkn55hz3-vy5dnw-eLICL24Jj0tr5tPJTP9UZxL2-RTp2Ah6h39jFftvw0H5-vjM4fIVnHW8JWadyClDEPeyFlcg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:11:34.794 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:11:34.842 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:11:34.860 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:34.860 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:11:34.863 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:11:34.867 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:34.871 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:34.876 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:11:34.880 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:11:34.884 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:11:34.901 -05:00 [DBG] mvc found in database: true
2021-03-30 15:11:34.902 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:12:22.484 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:12:22.494 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:12:22.496 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:12:22.497 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:12:22.505 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:12:22.507 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:12:22.509 -05:00 [DBG] Start discovery request
2021-03-30 15:12:22.516 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:12:22.609 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:12:22.612 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:12:22.617 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:12:22.619 -05:00 [DBG] Start authorize request
2021-03-30 15:12:22.624 -05:00 [DBG] No user present in authorize request
2021-03-30 15:12:22.628 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:12:22.650 -05:00 [DBG] js found in database: true
2021-03-30 15:12:22.651 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:22.656 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:12:22.662 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:22.667 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:22.673 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:22.697 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:22.699 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:12:22.702 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"9ce02ed47b3c49a19d993b7df6f6d8b3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"9ce02ed47b3c49a19d993b7df6f6d8b3","code_challenge":"vKx7ZplEfwm7cf8VZn6sbouQY7MHYmua6iid8zfMJGc","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:12:22.722 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:12:22.760 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:12:22.782 -05:00 [DBG] js found in database: true
2021-03-30 15:12:22.782 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:22.785 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:12:22.790 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:22.793 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:22.797 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:22.800 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:22.801 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:12:22.819 -05:00 [DBG] js found in database: true
2021-03-30 15:12:22.819 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:39.017 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:12:39.091 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:12:39.131 -05:00 [DBG] js found in database: true
2021-03-30 15:12:39.132 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:39.135 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:12:39.144 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:39.163 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:39.168 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:39.172 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:39.177 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:12:39.295 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:12:39.297 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 15:12:39.300 -05:00 [DBG] Adding auth_time claim with value: 1617135159
2021-03-30 15:12:39.317 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:12:39.328 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000021","TimeStamp":"2021-03-30T20:12:39.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-30 15:12:39.353 -05:00 [DBG] js found in database: true
2021-03-30 15:12:39.353 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:39.381 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:12:39.384 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:12:39.385 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:12:39.390 -05:00 [DBG] Start authorize callback request
2021-03-30 15:12:39.393 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:12:39.394 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:12:39.416 -05:00 [DBG] js found in database: true
2021-03-30 15:12:39.416 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:12:39.419 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:12:39.422 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:39.426 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:39.431 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:12:39.434 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:12:39.435 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:12:39.437 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"9ce02ed47b3c49a19d993b7df6f6d8b3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"quc54n7qJt2RlzMp-6_oNg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"9ce02ed47b3c49a19d993b7df6f6d8b3","code_challenge":"vKx7ZplEfwm7cf8VZn6sbouQY7MHYmua6iid8zfMJGc","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:12:39.464 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 15:12:39.467 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:12:39.534 -05:00 [DBG] UrqHfY9+PMbOqC4l+A/TN08FcteYCTIfoOpjfnUkp7M= not found in database
2021-03-30 15:12:39.702 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****X7O4","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000023","TimeStamp":"2021-03-30T20:12:39.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:12:39.716 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"9ce02ed47b3c49a19d993b7df6f6d8b3","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:12:39.732 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:12:39.733 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:13:45.244 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:13:45.245 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:13:45.247 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:13:45.249 -05:00 [DBG] Start discovery request
2021-03-30 15:13:45.284 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:13:45.663 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-30 15:13:45.668 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-30 15:13:45.669 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-30 15:13:45.676 -05:00 [DBG] Start key discovery request
2021-03-30 15:13:45.794 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:13:45.798 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:13:45.800 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:13:45.802 -05:00 [DBG] Start authorize request
2021-03-30 15:13:45.806 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:13:45.807 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:13:45.853 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:45.853 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:45.856 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:13:45.862 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:45.881 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:45.886 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:45.891 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:45.892 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:13:45.895 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliTit4EanwtoXOLz5Izi9e0A6OpjgfoXwb-2i5CGBEPLY_XP2Z8ZvPbu4I37qQ-v_rGmo72qQebz6-9rGSMPBvJQiYf1B8SXgpT4WRAN_a90QKvfUvzZHepT0tczHuOlqqDYyVPLE_P0VHppp-bUjtz55KvinSE0bPoq9NB-IM8tPKe4q6JYKzhHHheC9qhPAFChrmN4WDK7TkOqDmPLhJNa_0oE0yU9j6XqQ74K5LDS5rmRAfcf09OEBX5k84XwmTSkx1Tm5cnwwLvDZ0sJAJKM4ru62O7Fm4ltL9Wcswc_ys6c5wBik-EhM7VuuQbdUP46pnAkabS_ngsUxuqNnkddEmhCmJOrvXGN2Srs1kXsQ","UiLocales":null,"Nonce":"637527320257291777.OTgyZDA5MTUtMTI4Ni00ZjIzLTg3ZTItYjIxYjFjNDdiNjc2NzA3NjMxNzItMTVjYi00ODllLTgzYzUtMjI4ZTg3ZmU5MTUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"quc54n7qJt2RlzMp-6_oNg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"UZqpHEUCYkY9-z01Va_UMKoJvh2_gVhjHfMHEoYR9rI","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527320257291777.OTgyZDA5MTUtMTI4Ni00ZjIzLTg3ZTItYjIxYjFjNDdiNjc2NzA3NjMxNzItMTVjYi00ODllLTgzYzUtMjI4ZTg3ZmU5MTUx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliTit4EanwtoXOLz5Izi9e0A6OpjgfoXwb-2i5CGBEPLY_XP2Z8ZvPbu4I37qQ-v_rGmo72qQebz6-9rGSMPBvJQiYf1B8SXgpT4WRAN_a90QKvfUvzZHepT0tczHuOlqqDYyVPLE_P0VHppp-bUjtz55KvinSE0bPoq9NB-IM8tPKe4q6JYKzhHHheC9qhPAFChrmN4WDK7TkOqDmPLhJNa_0oE0yU9j6XqQ74K5LDS5rmRAfcf09OEBX5k84XwmTSkx1Tm5cnwwLvDZ0sJAJKM4ru62O7Fm4ltL9Wcswc_ys6c5wBik-EhM7VuuQbdUP46pnAkabS_ngsUxuqNnkddEmhCmJOrvXGN2Srs1kXsQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:13:45.918 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:13:45.918 -05:00 [INF] Showing consent: User has not yet consented
2021-03-30 15:13:45.978 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:13:46.000 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:46.001 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:46.005 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:13:46.009 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:46.015 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:46.019 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:46.025 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:46.026 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:13:46.041 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:46.042 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:46.052 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:46.078 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:53.537 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:13:53.602 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:13:53.626 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:53.627 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:53.631 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:13:53.635 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:53.640 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:53.646 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:53.650 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:53.652 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:13:53.658 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:0000002B","TimeStamp":"2021-03-30T20:13:53.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-30 15:13:53.698 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:53.699 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:53.715 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:13:53.717 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:13:53.724 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:13:53.726 -05:00 [DBG] Start authorize callback request
2021-03-30 15:13:53.733 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:13:53.733 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:13:53.755 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:53.756 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:53.758 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:13:53.762 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:53.765 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:53.770 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:53.775 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:53.778 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:13:53.780 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliTit4EanwtoXOLz5Izi9e0A6OpjgfoXwb-2i5CGBEPLY_XP2Z8ZvPbu4I37qQ-v_rGmo72qQebz6-9rGSMPBvJQiYf1B8SXgpT4WRAN_a90QKvfUvzZHepT0tczHuOlqqDYyVPLE_P0VHppp-bUjtz55KvinSE0bPoq9NB-IM8tPKe4q6JYKzhHHheC9qhPAFChrmN4WDK7TkOqDmPLhJNa_0oE0yU9j6XqQ74K5LDS5rmRAfcf09OEBX5k84XwmTSkx1Tm5cnwwLvDZ0sJAJKM4ru62O7Fm4ltL9Wcswc_ys6c5wBik-EhM7VuuQbdUP46pnAkabS_ngsUxuqNnkddEmhCmJOrvXGN2Srs1kXsQ","UiLocales":null,"Nonce":"637527320257291777.OTgyZDA5MTUtMTI4Ni00ZjIzLTg3ZTItYjIxYjFjNDdiNjc2NzA3NjMxNzItMTVjYi00ODllLTgzYzUtMjI4ZTg3ZmU5MTUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"quc54n7qJt2RlzMp-6_oNg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"UZqpHEUCYkY9-z01Va_UMKoJvh2_gVhjHfMHEoYR9rI","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527320257291777.OTgyZDA5MTUtMTI4Ni00ZjIzLTg3ZTItYjIxYjFjNDdiNjc2NzA3NjMxNzItMTVjYi00ODllLTgzYzUtMjI4ZTg3ZmU5MTUx","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliTit4EanwtoXOLz5Izi9e0A6OpjgfoXwb-2i5CGBEPLY_XP2Z8ZvPbu4I37qQ-v_rGmo72qQebz6-9rGSMPBvJQiYf1B8SXgpT4WRAN_a90QKvfUvzZHepT0tczHuOlqqDYyVPLE_P0VHppp-bUjtz55KvinSE0bPoq9NB-IM8tPKe4q6JYKzhHHheC9qhPAFChrmN4WDK7TkOqDmPLhJNa_0oE0yU9j6XqQ74K5LDS5rmRAfcf09OEBX5k84XwmTSkx1Tm5cnwwLvDZ0sJAJKM4ru62O7Fm4ltL9Wcswc_ys6c5wBik-EhM7VuuQbdUP46pnAkabS_ngsUxuqNnkddEmhCmJOrvXGN2Srs1kXsQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:13:53.806 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:13:53.812 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:13:53.813 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:13:53.818 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-30 15:13:53.829 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= not found in database
2021-03-30 15:13:53.839 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:13:53.841 -05:00 [DBG] lgjqvlqwF8lVMhZ7k0PCPkatHEfrHFOulM9LPqdTMKs= not found in database
2021-03-30 15:13:53.853 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****I3Ac","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:0000002D","TimeStamp":"2021-03-30T20:13:53.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:13:53.861 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliTit4EanwtoXOLz5Izi9e0A6OpjgfoXwb-2i5CGBEPLY_XP2Z8ZvPbu4I37qQ-v_rGmo72qQebz6-9rGSMPBvJQiYf1B8SXgpT4WRAN_a90QKvfUvzZHepT0tczHuOlqqDYyVPLE_P0VHppp-bUjtz55KvinSE0bPoq9NB-IM8tPKe4q6JYKzhHHheC9qhPAFChrmN4WDK7TkOqDmPLhJNa_0oE0yU9j6XqQ74K5LDS5rmRAfcf09OEBX5k84XwmTSkx1Tm5cnwwLvDZ0sJAJKM4ru62O7Fm4ltL9Wcswc_ys6c5wBik-EhM7VuuQbdUP46pnAkabS_ngsUxuqNnkddEmhCmJOrvXGN2Srs1kXsQ","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:13:53.868 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:13:53.872 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:13:54.029 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:13:54.037 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:13:54.039 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:13:54.046 -05:00 [DBG] Start token request.
2021-03-30 15:13:54.050 -05:00 [DBG] Start client validation
2021-03-30 15:13:54.056 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:13:54.058 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:13:54.060 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:13:54.061 -05:00 [DBG] Secret id found: mvc
2021-03-30 15:13:54.079 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:54.079 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:54.094 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-30 15:13:54.095 -05:00 [DBG] Client validation success
2021-03-30 15:13:54.099 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KJ:00000003","TimeStamp":"2021-03-30T20:13:54.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:13:54.108 -05:00 [DBG] Start token request validation
2021-03-30 15:13:54.117 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:13:54.138 -05:00 [DBG] lgjqvlqwF8lVMhZ7k0PCPkatHEfrHFOulM9LPqdTMKs= found in database: true
2021-03-30 15:13:54.177 -05:00 [DBG] removing lgjqvlqwF8lVMhZ7k0PCPkatHEfrHFOulM9LPqdTMKs= persisted grant from database
2021-03-30 15:13:54.196 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:13:54.200 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:13:54.206 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"RoBP5F7dj-R_nx6BePJhVMU_q-GDzcnA5WnA4VzI3Ac","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"RoBP5F7dj-R_nx6BePJhVMU_q-GDzcnA5WnA4VzI3Ac","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"MTYA6tWwlhtsTZiw3AcFX1vA2W2HyucmCXdRgT-Csr8"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:13:54.234 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:54.234 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:54.241 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:54.245 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:54.258 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-30 15:13:54.258 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:13:54.294 -05:00 [DBG] Creating refresh token
2021-03-30 15:13:54.295 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-30 15:13:54.311 -05:00 [DBG] acOSTjVo8sJS5cPhwnz7Z9jXy/Xh0SJS1VSVZTr4q00= not found in database
2021-03-30 15:13:54.332 -05:00 [DBG] mvc found in database: true
2021-03-30 15:13:54.333 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:13:54.338 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:13:54.342 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:13:54.351 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-30 15:13:54.352 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:13:54.362 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****E_Bg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****T7sk","$type":"Token"},{"TokenType":"access_token","TokenValue":"****OKnA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KJ:00000003","TimeStamp":"2021-03-30T20:13:54.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:13:54.378 -05:00 [DBG] Token request success.
2021-03-30 15:14:04.456 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:14:04.463 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:14:04.465 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:14:04.467 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:14:04.475 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:14:04.476 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:14:04.478 -05:00 [DBG] Start discovery request
2021-03-30 15:14:04.483 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:14:04.577 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:14:04.579 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:14:04.580 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:14:04.582 -05:00 [DBG] Start authorize request
2021-03-30 15:14:04.583 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:14:04.584 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:14:04.606 -05:00 [DBG] js found in database: true
2021-03-30 15:14:04.607 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:04.610 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:14:04.615 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:04.619 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:14:04.624 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:04.629 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:14:04.631 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:14:04.634 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"e087b911232a4f0c9a83273397769a3d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"quc54n7qJt2RlzMp-6_oNg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"e087b911232a4f0c9a83273397769a3d","code_challenge":"BgUHp4MnHXxJrquonZyiQMTYvaxbwg9bnCBe8fzDcCs","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:14:04.660 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 15:14:04.661 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:14:04.666 -05:00 [DBG] OwE4AaE4Oo2+s3wwCrvVO+kRScrP0SkPg7j0IAkEktM= not found in database
2021-03-30 15:14:04.674 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****UF1k","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000031","TimeStamp":"2021-03-30T20:14:04.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:14:04.681 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"e087b911232a4f0c9a83273397769a3d","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:14:04.903 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:14:04.909 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:14:04.912 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:14:04.913 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:14:04.915 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:14:04.918 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:14:04.919 -05:00 [DBG] Start discovery request
2021-03-30 15:14:04.926 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:14:04.942 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-30 15:14:04.946 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:14:04.947 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:14:04.949 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:14:04.951 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:14:04.956 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:14:04.959 -05:00 [DBG] Start token request.
2021-03-30 15:14:04.959 -05:00 [DBG] Start client validation
2021-03-30 15:14:04.960 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:14:04.961 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:14:04.962 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:14:04.963 -05:00 [DBG] Secret id found: js
2021-03-30 15:14:04.978 -05:00 [DBG] js found in database: true
2021-03-30 15:14:04.979 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:04.981 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-30 15:14:04.982 -05:00 [DBG] Client validation success
2021-03-30 15:14:04.983 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000035","TimeStamp":"2021-03-30T20:14:04.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:14:04.987 -05:00 [DBG] Start token request validation
2021-03-30 15:14:04.988 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:14:04.994 -05:00 [DBG] OwE4AaE4Oo2+s3wwCrvVO+kRScrP0SkPg7j0IAkEktM= found in database: true
2021-03-30 15:14:04.997 -05:00 [DBG] removing OwE4AaE4Oo2+s3wwCrvVO+kRScrP0SkPg7j0IAkEktM= persisted grant from database
2021-03-30 15:14:05.001 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:14:05.004 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:14:05.005 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"M9ULObp2CwcMF4uklGwkFhm0fCeb857-ZEM3NwPUF1k","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"M9ULObp2CwcMF4uklGwkFhm0fCeb857-ZEM3NwPUF1k","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"62a89aad577745fb9863198e065f86a6b2c89cd130884c5ca381492e27b10ba3b7685886e741421aaa362a590990dd0b","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:14:05.026 -05:00 [DBG] js found in database: true
2021-03-30 15:14:05.027 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:05.030 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:05.037 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:14:05.039 -05:00 [DBG] Getting claims for access token for client: js
2021-03-30 15:14:05.040 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:14:05.061 -05:00 [DBG] js found in database: true
2021-03-30 15:14:05.061 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:05.067 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:05.071 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:14:05.073 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-30 15:14:05.074 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:14:05.077 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****-tsg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KRaQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000035","TimeStamp":"2021-03-30T20:14:05.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:14:05.086 -05:00 [DBG] Token request success.
2021-03-30 15:14:05.100 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:14:05.105 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:14:05.107 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:14:05.112 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:14:05.118 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:14:05.120 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:14:05.121 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-30 15:14:05.129 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-30 15:14:05.130 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-30 15:14:05.136 -05:00 [DBG] Start userinfo request
2021-03-30 15:14:05.138 -05:00 [DBG] Bearer token found in header
2021-03-30 15:14:05.160 -05:00 [DBG] js found in database: true
2021-03-30 15:14:05.161 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:05.181 -05:00 [DBG] js found in database: true
2021-03-30 15:14:05.182 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:14:05.188 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:14:05.189 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617135245,"exp":1617138845,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617135159,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:14:05.201 -05:00 [DBG] Creating userinfo response
2021-03-30 15:14:05.206 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:14:05.208 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:14:05.212 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:05.218 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-30 15:14:05.220 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:14:05.224 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:14:05.230 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-30 15:14:05.232 -05:00 [DBG] End userinfo request
2021-03-30 15:14:05.263 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:14:05.265 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:14:05.267 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:14:05.273 -05:00 [DBG] Rendering check session result
2021-03-30 15:16:25.073 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:16:25.076 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:16:25.079 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:16:25.084 -05:00 [DBG] Processing signout request for 1
2021-03-30 15:16:25.086 -05:00 [DBG] Start end session request validation
2021-03-30 15:16:25.089 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:16:25.092 -05:00 [DBG] Success validating end session request from null
2021-03-30 15:16:26.749 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:16:26.972 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 15:16:26.975 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 15:16:26.976 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 15:16:26.978 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000041","TimeStamp":"2021-03-30T20:16:26.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-30 15:16:27.031 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 15:16:27.042 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 15:16:27.044 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 15:16:27.048 -05:00 [DBG] Processing signout callback request
2021-03-30 15:16:27.091 -05:00 [DBG] js found in database: true
2021-03-30 15:16:27.091 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:16:27.108 -05:00 [DBG] mvc found in database: true
2021-03-30 15:16:27.108 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:16:27.112 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 15:16:27.116 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 15:16:27.119 -05:00 [INF] Successful signout callback.
2021-03-30 15:16:27.122 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 15:16:27.123 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 15:16:38.783 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:16:38.791 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:16:38.792 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:16:38.795 -05:00 [DBG] Processing signout request for anonymous
2021-03-30 15:16:38.800 -05:00 [DBG] Start end session request validation
2021-03-30 15:16:38.803 -05:00 [DBG] Start identity token validation
2021-03-30 15:16:38.827 -05:00 [DBG] mvc found in database: true
2021-03-30 15:16:38.828 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:16:38.831 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-30 15:16:38.839 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:16:38.841 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617135234,"exp":1617135534,"iss":"https://localhost:5000","aud":"mvc","nonce":"637527320257291777.OTgyZDA5MTUtMTI4Ni00ZjIzLTg3ZTItYjIxYjFjNDdiNjc2NzA3NjMxNzItMTVjYi00ODllLTgzYzUtMjI4ZTg3ZmU5MTUx","iat":1617135234,"at_hash":"4ACuTt8r_Ld1zYgjPMQXxw","s_hash":"3dwrNCKeGnF-YF4lwvRM5A","sid":"quc54n7qJt2RlzMp-6_oNg","sub":"1","auth_time":1617135159,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:16:38.856 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgxaQwsyOv90OUHZkGSMCVAE3sG32zj6jqpJoi0OqQipQPS4DqvzNEErQW45mxcyW7xJY83ll-k8VASitesHfhCynjXeAv6cy4_JHeoUGVAT6Mgd3uaQjHCqhCe5ue3EcYjZDAz6ZmqyT2BfTUmyq2G","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgxaQwsyOv90OUHZkGSMCVAE3sG32zj6jqpJoi0OqQipQPS4DqvzNEErQW45mxcyW7xJY83ll-k8VASitesHfhCynjXeAv6cy4_JHeoUGVAT6Mgd3uaQjHCqhCe5ue3EcYjZDAz6ZmqyT2BfTUmyq2G","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:16:38.867 -05:00 [DBG] Success validating end session request from mvc
2021-03-30 15:16:43.673 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:16:43.680 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:16:43.682 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:16:43.685 -05:00 [DBG] Start authorize request
2021-03-30 15:16:43.688 -05:00 [DBG] No user present in authorize request
2021-03-30 15:16:43.691 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:16:43.723 -05:00 [DBG] mvc found in database: true
2021-03-30 15:16:43.723 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:16:43.726 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:16:43.732 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:16:43.750 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:16:43.757 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:16:43.775 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:16:43.777 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:16:43.779 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","UiLocales":null,"Nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"yy7siQcHSju-bGFMtRuuWAKzHT6GgOPZ60nG9XVE-es","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:16:43.803 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:16:43.848 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:16:43.869 -05:00 [DBG] mvc found in database: true
2021-03-30 15:16:43.870 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:16:43.873 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:16:43.877 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:16:43.881 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:16:43.886 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:16:43.890 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:16:43.900 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:16:43.917 -05:00 [DBG] mvc found in database: true
2021-03-30 15:16:43.917 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:16:59.927 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:16:59.934 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:16:59.936 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:16:59.937 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:16:59.940 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:16:59.943 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:16:59.946 -05:00 [DBG] Start discovery request
2021-03-30 15:16:59.964 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:17:00.050 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:17:00.053 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:17:00.055 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:17:00.057 -05:00 [DBG] Start authorize request
2021-03-30 15:17:00.058 -05:00 [DBG] No user present in authorize request
2021-03-30 15:17:00.059 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:17:00.090 -05:00 [DBG] js found in database: true
2021-03-30 15:17:00.091 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:17:00.096 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:17:00.101 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:17:00.117 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:17:00.121 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:17:00.125 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:17:00.128 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:17:00.129 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"21c881d8f6124f30afd23336d3667113","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"21c881d8f6124f30afd23336d3667113","code_challenge":"bPE8jrSXmSFmorM5SAyi-HCX4YS0NSvAh0lS7IFSUMc","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:17:00.139 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:17:00.175 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:17:00.193 -05:00 [DBG] js found in database: true
2021-03-30 15:17:00.194 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:17:00.196 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:17:00.200 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:17:00.203 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:17:00.211 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:17:00.214 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:17:00.216 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:17:00.233 -05:00 [DBG] js found in database: true
2021-03-30 15:17:00.234 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:19:23.944 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:19:23.950 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:19:23.952 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:19:23.953 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:19:23.958 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:19:23.960 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:19:23.962 -05:00 [DBG] Start discovery request
2021-03-30 15:19:23.975 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:19:24.069 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:19:24.075 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:19:24.077 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:19:24.082 -05:00 [DBG] Start authorize request
2021-03-30 15:19:24.084 -05:00 [DBG] No user present in authorize request
2021-03-30 15:19:24.086 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:19:24.122 -05:00 [DBG] js found in database: true
2021-03-30 15:19:24.122 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:19:24.127 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:19:24.133 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:24.152 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:24.158 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:24.162 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:24.164 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:19:24.168 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"405dea9582df423499f04e2d914af83f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"405dea9582df423499f04e2d914af83f","code_challenge":"XDdJLKZ-RJh1Ls8rxIujfmZLmkQ9_9b4psEvPyfuDiM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:19:24.184 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:19:24.222 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:19:24.243 -05:00 [DBG] js found in database: true
2021-03-30 15:19:24.243 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:19:24.246 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:19:24.249 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:24.255 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:24.259 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:24.263 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:24.266 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:19:24.287 -05:00 [DBG] js found in database: true
2021-03-30 15:19:24.288 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:19:40.651 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:19:40.688 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:19:40.708 -05:00 [DBG] mvc found in database: true
2021-03-30 15:19:40.709 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:19:40.712 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:19:40.716 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:40.721 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:40.728 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:40.732 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:40.735 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:19:40.755 -05:00 [WRN] Invalid password for user 1.
2021-03-30 15:19:40.756 -05:00 [WRN] User 1 failed to provide the correct password.
2021-03-30 15:19:40.809 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM7JMPMBQ2KH:00000065","TimeStamp":"2021-03-30T20:19:40.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginFailureEvent"}
2021-03-30 15:19:40.820 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:19:40.835 -05:00 [DBG] mvc found in database: true
2021-03-30 15:19:40.836 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:19:40.838 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:19:40.842 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:40.845 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:40.852 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:19:40.857 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:19:40.858 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:19:40.874 -05:00 [DBG] mvc found in database: true
2021-03-30 15:19:40.874 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.394 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:20:00.428 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:20:00.451 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:00.451 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.455 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:20:00.458 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.466 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.471 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.476 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.479 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:20:00.513 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:20:00.514 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 15:20:00.515 -05:00 [DBG] Adding auth_time claim with value: 1617135600
2021-03-30 15:20:00.520 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:20:00.523 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:00000067","TimeStamp":"2021-03-30T20:20:00.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-30 15:20:00.548 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:00.548 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.577 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:20:00.586 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:20:00.589 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:20:00.592 -05:00 [DBG] Start authorize callback request
2021-03-30 15:20:00.593 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:20:00.594 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:20:00.612 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:00.613 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.615 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:20:00.617 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.621 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.625 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.631 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.632 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:20:00.634 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","UiLocales":null,"Nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lCqOhy2Q9cfUY9kBX8DTiQ","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"yy7siQcHSju-bGFMtRuuWAKzHT6GgOPZ60nG9XVE-es","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:20:00.659 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:20:00.660 -05:00 [INF] Showing consent: User has not yet consented
2021-03-30 15:20:00.706 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:20:00.726 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:00.726 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.729 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:20:00.732 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.736 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.743 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.746 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:00.749 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:20:00.773 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:00.774 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:00.782 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:00.799 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:05.911 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:20:05.944 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:20:05.963 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:05.964 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:05.966 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:20:05.969 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:05.974 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:05.979 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:05.983 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:05.986 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:20:05.988 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:0000006D","TimeStamp":"2021-03-30T20:20:05.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-30 15:20:06.017 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:06.018 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:06.047 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:20:06.053 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:20:06.055 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:20:06.057 -05:00 [DBG] Start authorize callback request
2021-03-30 15:20:06.061 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:20:06.061 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:20:06.082 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:06.083 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:06.089 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:20:06.093 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:06.100 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:06.104 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:06.109 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:06.112 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:20:06.121 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","UiLocales":null,"Nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lCqOhy2Q9cfUY9kBX8DTiQ","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"yy7siQcHSju-bGFMtRuuWAKzHT6GgOPZ60nG9XVE-es","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:20:06.144 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:20:06.144 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:20:06.147 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:20:06.149 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-30 15:20:06.154 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database
2021-03-30 15:20:06.162 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:20:06.165 -05:00 [DBG] ZIchqTHtPMhTwhmZlQ9VxoiBcqHRTBxtcHkK+IfIjyA= not found in database
2021-03-30 15:20:06.169 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****uZUU","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KH:0000006F","TimeStamp":"2021-03-30T20:20:06.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:20:06.179 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhhMZdYltysNemgCqJ_5CzMt5j23XW5Id9w4iArHBAj-yZSsW5iodsTELYcop1j33XZ8PrHLV1nKeNL80Jpf4a4RjgXDmZlyx3epfLl95SJHsDLGnWamoo_hLva5HxzqPl_UmLwF2_TSYvjO0rQdNEsRo-8RJLu3V1cmNeKeTbrx2N0F1j4UfWijAGCfb8ZabWWtvOG6bIML9usUqT_fljD0epnMhRFheA2TQk-0pZTgrTC7FxBSIxnHRsUTxyIPsRV0Pu84QVDqYs7dJkQTRRignz5LSCaVtYuxuJ5OEF13uIU7Ow49c6z52Z9Q79hgu3dxMphWRyMmVJGcxqlsX_nlKyDVtZYVeKp2uuZEJXAyA","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:20:06.185 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:20:06.186 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:20:06.318 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:20:06.329 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:20:06.330 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:20:06.333 -05:00 [DBG] Start token request.
2021-03-30 15:20:06.334 -05:00 [DBG] Start client validation
2021-03-30 15:20:06.335 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:20:06.336 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:20:06.337 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:20:06.340 -05:00 [DBG] Secret id found: mvc
2021-03-30 15:20:06.357 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:06.357 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:06.361 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-30 15:20:06.362 -05:00 [DBG] Client validation success
2021-03-30 15:20:06.363 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KK:00000001","TimeStamp":"2021-03-30T20:20:06.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:20:06.371 -05:00 [DBG] Start token request validation
2021-03-30 15:20:06.372 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:20:06.375 -05:00 [DBG] ZIchqTHtPMhTwhmZlQ9VxoiBcqHRTBxtcHkK+IfIjyA= found in database: true
2021-03-30 15:20:06.379 -05:00 [DBG] removing ZIchqTHtPMhTwhmZlQ9VxoiBcqHRTBxtcHkK+IfIjyA= persisted grant from database
2021-03-30 15:20:06.384 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:20:06.387 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:20:06.387 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"EdJaWNlg5llbqhCCxX7WiQMQV2ksZTkatR3JDmnuZUU","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"EdJaWNlg5llbqhCCxX7WiQMQV2ksZTkatR3JDmnuZUU","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"TuRqMN2y6zs582GUkFoxueBzIvjutIB6CWUMi63fN7s"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:20:06.411 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:06.411 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:06.417 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:06.421 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:06.425 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-30 15:20:06.426 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:20:06.433 -05:00 [DBG] Creating refresh token
2021-03-30 15:20:06.433 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-30 15:20:06.436 -05:00 [DBG] NFg3TES5XBXRLFYhqPO11QPJnb6ZTSZCf1wKpwXYHtg= not found in database
2021-03-30 15:20:06.456 -05:00 [DBG] mvc found in database: true
2021-03-30 15:20:06.457 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:20:06.462 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:20:06.465 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:20:06.467 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-30 15:20:06.469 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:20:06.474 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****VSTQ","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****w3ic","$type":"Token"},{"TokenType":"access_token","TokenValue":"****zOnA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KK:00000001","TimeStamp":"2021-03-30T20:20:06.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:20:06.483 -05:00 [DBG] Token request success.
2021-03-30 15:25:26.879 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:25:26.884 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:25:26.885 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:25:26.887 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:25:26.899 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:25:26.903 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:25:26.906 -05:00 [DBG] Start discovery request
2021-03-30 15:25:26.924 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:25:26.995 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:25:26.997 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:25:27.005 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:25:27.008 -05:00 [DBG] Start authorize request
2021-03-30 15:25:27.009 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:25:27.010 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:25:27.047 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.048 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.053 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:25:27.057 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.077 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:25:27.082 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.087 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:25:27.089 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:25:27.093 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"cc02454eccad41fc906cbe2f24ead272","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"lCqOhy2Q9cfUY9kBX8DTiQ","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"cc02454eccad41fc906cbe2f24ead272","code_challenge":"URY3uPZRjXi1QRuIWseGbzxg8UeR3zgNwE8lB575im8","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:25:27.111 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 15:25:27.112 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:25:27.116 -05:00 [DBG] HmfVfwN4oAsp/CcoTgqoM+C+U1SQmRfjNIxiCx0zG00= not found in database
2021-03-30 15:25:27.123 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****vPtw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KM:0000000F","TimeStamp":"2021-03-30T20:25:27.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:25:27.133 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"cc02454eccad41fc906cbe2f24ead272","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:25:27.138 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:25:27.138 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:25:27.346 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:25:27.352 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:25:27.353 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:25:27.354 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:25:27.356 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:25:27.360 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:25:27.362 -05:00 [DBG] Start discovery request
2021-03-30 15:25:27.369 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:25:27.380 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-30 15:25:27.385 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:25:27.387 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:25:27.388 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:25:27.391 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:25:27.392 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:25:27.394 -05:00 [DBG] Start token request.
2021-03-30 15:25:27.395 -05:00 [DBG] Start client validation
2021-03-30 15:25:27.396 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:25:27.398 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:25:27.401 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:25:27.402 -05:00 [DBG] Secret id found: js
2021-03-30 15:25:27.416 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.417 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.420 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-30 15:25:27.421 -05:00 [DBG] Client validation success
2021-03-30 15:25:27.422 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KL:00000013","TimeStamp":"2021-03-30T20:25:27.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:25:27.427 -05:00 [DBG] Start token request validation
2021-03-30 15:25:27.428 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:25:27.430 -05:00 [DBG] HmfVfwN4oAsp/CcoTgqoM+C+U1SQmRfjNIxiCx0zG00= found in database: true
2021-03-30 15:25:27.435 -05:00 [DBG] removing HmfVfwN4oAsp/CcoTgqoM+C+U1SQmRfjNIxiCx0zG00= persisted grant from database
2021-03-30 15:25:27.440 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:25:27.444 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:25:27.445 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"N1U5wtxSraW1MTj_DwSvGwN7kNt5r0qKaLEA--pvPtw","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"N1U5wtxSraW1MTj_DwSvGwN7kNt5r0qKaLEA--pvPtw","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"e9fe95a945204aa89cbc5bdf6c2cd943058f9fb399024daeb1c55983d4d46708df01ff8e398a48c59a628ba27cf7cda2","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:25:27.469 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.470 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.476 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.479 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:25:27.481 -05:00 [DBG] Getting claims for access token for client: js
2021-03-30 15:25:27.482 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:25:27.508 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.508 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.513 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.516 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:25:27.518 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-30 15:25:27.521 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:25:27.524 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****O8aA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****PTog","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KL:00000013","TimeStamp":"2021-03-30T20:25:27.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:25:27.533 -05:00 [DBG] Token request success.
2021-03-30 15:25:27.557 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:25:27.561 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:25:27.562 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:25:27.570 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:25:27.573 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:25:27.574 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:25:27.575 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-30 15:25:27.577 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-30 15:25:27.580 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-30 15:25:27.582 -05:00 [DBG] Start userinfo request
2021-03-30 15:25:27.583 -05:00 [DBG] Bearer token found in header
2021-03-30 15:25:27.630 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.631 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.646 -05:00 [DBG] js found in database: true
2021-03-30 15:25:27.647 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:25:27.651 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:25:27.653 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617135927,"exp":1617139527,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617135600,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:25:27.659 -05:00 [DBG] Creating userinfo response
2021-03-30 15:25:27.661 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:25:27.662 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:25:27.666 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.669 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-30 15:25:27.672 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:25:27.675 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:25:27.681 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-30 15:25:27.682 -05:00 [DBG] End userinfo request
2021-03-30 15:25:27.712 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:25:27.715 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:25:27.718 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:25:27.721 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:50.849 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:30:50.850 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:30:50.851 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:30:50.853 -05:00 [DBG] Processing signout request for 1
2021-03-30 15:30:50.854 -05:00 [DBG] Start end session request validation
2021-03-30 15:30:50.855 -05:00 [DBG] Start identity token validation
2021-03-30 15:30:50.910 -05:00 [DBG] mvc found in database: true
2021-03-30 15:30:50.910 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:30:50.915 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-30 15:30:50.920 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:30:50.920 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617135606,"exp":1617135906,"iss":"https://localhost:5000","aud":"mvc","nonce":"637527322036638128.N2RkMWQ0N2EtOWY1Yy00NmI0LWI0YjQtNDBlNDhkNWZiNjA4ZmQ3MDcxNDAtZDRkYS00MjJiLThlMjgtYmU2M2QwYTQ3ZmJl","iat":1617135606,"at_hash":"Dndwlzzd6n58BxWS8DMEOQ","s_hash":"ICBPiBZkfpodvGkZBXuvdg","sid":"lCqOhy2Q9cfUY9kBX8DTiQ","sub":"1","auth_time":1617135600,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:30:50.928 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"1","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgNAVbhMfXc9_Lqw3c3apYI7TAIIoY82KW0osqHMPrRwMbRpqcqs1V2ITy2oDme2mqD3NmJptVl2F-Aq0TZs5quOWkeusEWo-Wb2Ro9uv6CbFYdKfTz128aDwdaJvqIfTSnRWAHa8abNh0uPYkbN67B","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgNAVbhMfXc9_Lqw3c3apYI7TAIIoY82KW0osqHMPrRwMbRpqcqs1V2ITy2oDme2mqD3NmJptVl2F-Aq0TZs5quOWkeusEWo-Wb2Ro9uv6CbFYdKfTz128aDwdaJvqIfTSnRWAHa8abNh0uPYkbN67B","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:30:50.936 -05:00 [DBG] Success validating end session request from mvc
2021-03-30 15:30:50.972 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 15:30:50.974 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 15:30:50.976 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 15:30:50.977 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000011","TimeStamp":"2021-03-30T20:30:50.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-30 15:30:51.028 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 15:30:51.031 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 15:30:51.034 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 15:30:51.036 -05:00 [DBG] Processing signout callback request
2021-03-30 15:30:51.059 -05:00 [DBG] mvc found in database: true
2021-03-30 15:30:51.059 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:30:51.076 -05:00 [DBG] js found in database: true
2021-03-30 15:30:51.077 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:51.081 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 15:30:51.083 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 15:30:51.085 -05:00 [INF] Successful signout callback.
2021-03-30 15:30:51.086 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 15:30:51.087 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 15:30:51.743 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:51.746 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:51.749 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:51.755 -05:00 [DBG] Start authorize request
2021-03-30 15:30:51.757 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:51.758 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:51.778 -05:00 [DBG] js found in database: true
2021-03-30 15:30:51.779 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:51.787 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:51.792 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:51.809 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:51.821 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:51.857 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:51.859 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:51.865 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"1d13ccfa90a74a879ae7edac21bc42d6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"1d13ccfa90a74a879ae7edac21bc42d6","code_challenge":"QCURXusRo1kIaZ7X77XkxGIV8PgZk8tNCRtI11Gz_4A","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:51.886 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:51.889 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"1d13ccfa90a74a879ae7edac21bc42d6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"1d13ccfa90a74a879ae7edac21bc42d6","code_challenge":"QCURXusRo1kIaZ7X77XkxGIV8PgZk8tNCRtI11Gz_4A","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:51.913 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000015","TimeStamp":"2021-03-30T20:30:51.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:52.186 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:52.192 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:52.194 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:52.197 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:52.200 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:52.201 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:52.206 -05:00 [DBG] Start discovery request
2021-03-30 15:30:52.216 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:52.243 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:52.245 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:52.248 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:52.250 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:52.311 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:52.314 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:52.316 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:52.321 -05:00 [DBG] Start authorize request
2021-03-30 15:30:52.323 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:52.326 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:52.350 -05:00 [DBG] js found in database: true
2021-03-30 15:30:52.350 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:52.353 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:52.356 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:52.359 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:52.364 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:52.367 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:52.369 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:52.370 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3f1b965418d34bc39a952018f1af237c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3f1b965418d34bc39a952018f1af237c","code_challenge":"85OxfUdZs4S-U0kXrPtdykM_xUerdw58up_qNY9sVkc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:52.385 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:52.387 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3f1b965418d34bc39a952018f1af237c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3f1b965418d34bc39a952018f1af237c","code_challenge":"85OxfUdZs4S-U0kXrPtdykM_xUerdw58up_qNY9sVkc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:52.402 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000001B","TimeStamp":"2021-03-30T20:30:52.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:52.434 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:52.437 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:52.439 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:52.443 -05:00 [DBG] Start authorize request
2021-03-30 15:30:52.444 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:52.446 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:52.474 -05:00 [DBG] mvc found in database: true
2021-03-30 15:30:52.475 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:30:52.478 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:52.485 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:30:52.511 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:30:52.519 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:30:52.543 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:30:52.544 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:52.550 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMMMsN7CaCUMl5uQ8ryikvWfiHuu2oexFCksa27AZITnrczTQyUmlWIixUzMRtzF6vyVavxoopTHj0I-msKReY3cBSpjdi4S5QIdrtYWmfmNelhagPGhIij_XFrwV8DRwq4ukRrZX9DjOUoq0JYxuO_4EXwOI4uW_4KxWMQQxFR2AUlkhJq-q8oVYb-7P5I9CCXJLI6s3CEBTA_r6sA_H9GcV-W94vlUNZRQh7XPVAK2q1hNk7Y1B3-4rN8rBOCLT2hpzo_e9YCTUU9lMg--mIyY02mLixXUMKJq4J3h14_kUZAvlx0K-0O110ByGFgkq7Rdt-mLl0QRyh6dSlMj-Tnzz1YWTbHAoSFh9xckwRQw","UiLocales":null,"Nonce":"637527330524231354.YWIzYzU1NTctMjAxMS00NjlkLTk0ODgtYWUzOGQ0MGU2NmRmZmE1ODVhYWYtMDJhZC00MWQ2LTlmMzItMWY4NjUzNWI0MTVm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"GcbIhlz7Ft_b00PIQJju3OhDszPcERlalHiJkcSmGyU","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527330524231354.YWIzYzU1NTctMjAxMS00NjlkLTk0ODgtYWUzOGQ0MGU2NmRmZmE1ODVhYWYtMDJhZC00MWQ2LTlmMzItMWY4NjUzNWI0MTVm","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliMMMsN7CaCUMl5uQ8ryikvWfiHuu2oexFCksa27AZITnrczTQyUmlWIixUzMRtzF6vyVavxoopTHj0I-msKReY3cBSpjdi4S5QIdrtYWmfmNelhagPGhIij_XFrwV8DRwq4ukRrZX9DjOUoq0JYxuO_4EXwOI4uW_4KxWMQQxFR2AUlkhJq-q8oVYb-7P5I9CCXJLI6s3CEBTA_r6sA_H9GcV-W94vlUNZRQh7XPVAK2q1hNk7Y1B3-4rN8rBOCLT2hpzo_e9YCTUU9lMg--mIyY02mLixXUMKJq4J3h14_kUZAvlx0K-0O110ByGFgkq7Rdt-mLl0QRyh6dSlMj-Tnzz1YWTbHAoSFh9xckwRQw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:52.600 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:30:52.653 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:52.671 -05:00 [DBG] mvc found in database: true
2021-03-30 15:30:52.672 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:30:52.675 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:52.678 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:30:52.682 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:30:52.686 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:30:52.689 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:30:52.690 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:52.707 -05:00 [DBG] mvc found in database: true
2021-03-30 15:30:52.707 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:30:52.955 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:52.959 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:52.961 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:52.962 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:52.965 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:52.972 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:52.974 -05:00 [DBG] Start discovery request
2021-03-30 15:30:52.982 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:53.002 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:53.005 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:53.007 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:53.010 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:53.308 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:53.310 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:53.314 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:53.339 -05:00 [DBG] Start authorize request
2021-03-30 15:30:53.345 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:53.346 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:53.362 -05:00 [DBG] js found in database: true
2021-03-30 15:30:53.362 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:53.366 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:53.370 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:53.374 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:53.378 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:53.382 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:53.383 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:53.387 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0f8ff402c7fe436faecccaa1d1be8ef9","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0f8ff402c7fe436faecccaa1d1be8ef9","code_challenge":"-jDXFauN80w51gJs04IxdKb6HjQALd6oNMFyhRAlozI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:53.399 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:53.401 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0f8ff402c7fe436faecccaa1d1be8ef9","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0f8ff402c7fe436faecccaa1d1be8ef9","code_challenge":"-jDXFauN80w51gJs04IxdKb6HjQALd6oNMFyhRAlozI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:53.414 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000025","TimeStamp":"2021-03-30T20:30:53.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:53.595 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:53.600 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:53.618 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:53.620 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:53.621 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:53.623 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:53.625 -05:00 [DBG] Start discovery request
2021-03-30 15:30:53.636 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:53.667 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:53.672 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:53.674 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:53.676 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:53.722 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:53.724 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:53.726 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:53.728 -05:00 [DBG] Start authorize request
2021-03-30 15:30:53.730 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:53.731 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:53.753 -05:00 [DBG] js found in database: true
2021-03-30 15:30:53.754 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:53.757 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:53.760 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:53.763 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:53.769 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:53.773 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:53.775 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:53.777 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8775062da0db46279b8666384b3ed98e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8775062da0db46279b8666384b3ed98e","code_challenge":"_dQykQnxJXepFijkkxBwvAFr7kxZGME6Kg1aDPe2s7o","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:53.790 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:53.792 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8775062da0db46279b8666384b3ed98e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8775062da0db46279b8666384b3ed98e","code_challenge":"_dQykQnxJXepFijkkxBwvAFr7kxZGME6Kg1aDPe2s7o","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:53.807 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000002B","TimeStamp":"2021-03-30T20:30:53.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:54.004 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:54.011 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:54.012 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:54.015 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:54.043 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:54.044 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:54.048 -05:00 [DBG] Start discovery request
2021-03-30 15:30:54.053 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:54.166 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:54.170 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:54.175 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:54.177 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:54.234 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:54.238 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:54.242 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:54.244 -05:00 [DBG] Start authorize request
2021-03-30 15:30:54.246 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:54.251 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:54.275 -05:00 [DBG] js found in database: true
2021-03-30 15:30:54.275 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:54.279 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:54.283 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:54.286 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:54.293 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:54.301 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:54.304 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:54.307 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"15f583bd0de74056a88a49c0cc3cbefd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"15f583bd0de74056a88a49c0cc3cbefd","code_challenge":"-19kTfG_0ZxFNhoxskA4XY9h7etmuSDHL0Wf4IXU-vk","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:54.323 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:54.327 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"15f583bd0de74056a88a49c0cc3cbefd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"15f583bd0de74056a88a49c0cc3cbefd","code_challenge":"-19kTfG_0ZxFNhoxskA4XY9h7etmuSDHL0Wf4IXU-vk","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:54.349 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000031","TimeStamp":"2021-03-30T20:30:54.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:54.552 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:54.557 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:54.559 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:54.561 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:54.562 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:54.568 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:54.572 -05:00 [DBG] Start discovery request
2021-03-30 15:30:54.579 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:54.601 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:54.603 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:54.605 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:54.607 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:54.653 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:54.655 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:54.657 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:54.659 -05:00 [DBG] Start authorize request
2021-03-30 15:30:54.661 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:54.667 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:54.688 -05:00 [DBG] js found in database: true
2021-03-30 15:30:54.689 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:54.692 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:54.695 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:54.699 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:54.703 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:54.706 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:54.708 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:54.711 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"528d4c3084524dae90c46ff43da08a80","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"528d4c3084524dae90c46ff43da08a80","code_challenge":"5nDoo6M7emqu3Vnv2lWW_w5Cb1c1v2L8Nvi22W2fb8Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:54.723 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:54.725 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"528d4c3084524dae90c46ff43da08a80","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"528d4c3084524dae90c46ff43da08a80","code_challenge":"5nDoo6M7emqu3Vnv2lWW_w5Cb1c1v2L8Nvi22W2fb8Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:54.740 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000037","TimeStamp":"2021-03-30T20:30:54.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:54.947 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:54.952 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:54.956 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:54.957 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:54.960 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:54.962 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:54.966 -05:00 [DBG] Start discovery request
2021-03-30 15:30:54.977 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:55.005 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:55.007 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:55.009 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:55.011 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:55.067 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:55.069 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:55.070 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:55.072 -05:00 [DBG] Start authorize request
2021-03-30 15:30:55.073 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:55.074 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:55.092 -05:00 [DBG] js found in database: true
2021-03-30 15:30:55.093 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:55.096 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:55.101 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.104 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.108 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.111 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.115 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:55.117 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"7c4501ec7c6f4601bbd6e7c887323876","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"7c4501ec7c6f4601bbd6e7c887323876","code_challenge":"T2r1TOoarphf_3YcFdqDYrOnaGTn3NCx0s6WmzQfPkw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.129 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:55.131 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"7c4501ec7c6f4601bbd6e7c887323876","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"7c4501ec7c6f4601bbd6e7c887323876","code_challenge":"T2r1TOoarphf_3YcFdqDYrOnaGTn3NCx0s6WmzQfPkw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.144 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000003D","TimeStamp":"2021-03-30T20:30:55.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:55.324 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:55.329 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:55.332 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:55.336 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:55.338 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:55.342 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:55.348 -05:00 [DBG] Start discovery request
2021-03-30 15:30:55.354 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:55.384 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:55.389 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:55.393 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:55.395 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:55.450 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:55.454 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:55.456 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:55.457 -05:00 [DBG] Start authorize request
2021-03-30 15:30:55.458 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:55.459 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:55.478 -05:00 [DBG] js found in database: true
2021-03-30 15:30:55.479 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:55.482 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:55.485 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.490 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.494 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.498 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.500 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:55.503 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0ea1b030334a4725b9f4e3fe8e42a393","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0ea1b030334a4725b9f4e3fe8e42a393","code_challenge":"fY5QolhrglLq-8sJ4mq2N4v3hOVaz5AqTB7Y7GdBnss","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.514 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:55.518 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0ea1b030334a4725b9f4e3fe8e42a393","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0ea1b030334a4725b9f4e3fe8e42a393","code_challenge":"fY5QolhrglLq-8sJ4mq2N4v3hOVaz5AqTB7Y7GdBnss","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.529 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000043","TimeStamp":"2021-03-30T20:30:55.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:55.734 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:55.740 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:55.742 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:55.743 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:55.747 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:55.750 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:55.754 -05:00 [DBG] Start discovery request
2021-03-30 15:30:55.760 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:55.791 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:55.793 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:55.795 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:55.799 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:55.850 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:55.852 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:55.854 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:55.856 -05:00 [DBG] Start authorize request
2021-03-30 15:30:55.856 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:55.857 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:55.875 -05:00 [DBG] js found in database: true
2021-03-30 15:30:55.876 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:55.878 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:55.881 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.884 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.889 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:55.895 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:55.898 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:55.900 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"180136cac15a489cbe4a93e9ab261a54","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"180136cac15a489cbe4a93e9ab261a54","code_challenge":"3EHx394wru-t2w9RM_TAIiimE8jJdz7f0YIN___OvaQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.911 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:55.914 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"180136cac15a489cbe4a93e9ab261a54","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"180136cac15a489cbe4a93e9ab261a54","code_challenge":"3EHx394wru-t2w9RM_TAIiimE8jJdz7f0YIN___OvaQ","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:55.926 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000049","TimeStamp":"2021-03-30T20:30:55.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:56.102 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:56.106 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:56.108 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:56.109 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:56.111 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:56.118 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:56.119 -05:00 [DBG] Start discovery request
2021-03-30 15:30:56.125 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:56.553 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:56.558 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:56.560 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:56.562 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:56.568 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:56.570 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:56.572 -05:00 [DBG] Start discovery request
2021-03-30 15:30:56.579 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:56.606 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:56.608 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:56.610 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:56.612 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:56.658 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:56.660 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:56.665 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:56.667 -05:00 [DBG] Start authorize request
2021-03-30 15:30:56.668 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:56.670 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:56.687 -05:00 [DBG] js found in database: true
2021-03-30 15:30:56.687 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:56.693 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:56.697 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:56.701 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:56.704 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:56.708 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:56.710 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:56.714 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"67a6a3cd78b1429f98b09cb5d1816512","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"67a6a3cd78b1429f98b09cb5d1816512","code_challenge":"dfAfiEFqU7zhSeR0sw44f3j3g9UnOT3TMw83bN0NWQ0","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:56.725 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:56.726 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"67a6a3cd78b1429f98b09cb5d1816512","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"67a6a3cd78b1429f98b09cb5d1816512","code_challenge":"dfAfiEFqU7zhSeR0sw44f3j3g9UnOT3TMw83bN0NWQ0","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:56.737 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000051","TimeStamp":"2021-03-30T20:30:56.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:56.898 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:56.903 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:56.905 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:56.906 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:56.908 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:56.914 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:56.916 -05:00 [DBG] Start discovery request
2021-03-30 15:30:56.920 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:56.941 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:56.944 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:56.947 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:56.950 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:56.991 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:56.995 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:57.002 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:57.006 -05:00 [DBG] Start authorize request
2021-03-30 15:30:57.007 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:57.008 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:57.043 -05:00 [DBG] js found in database: true
2021-03-30 15:30:57.043 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:57.048 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:57.051 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:57.054 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:57.057 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:57.061 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:57.063 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:57.067 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3e4f2ed9fe2945b297db2ad14a211a01","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3e4f2ed9fe2945b297db2ad14a211a01","code_challenge":"qm8pVSKtqyWed1ev_2sGR0q9-JSrWvNrogeVmcQJRRo","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:57.078 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:57.080 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3e4f2ed9fe2945b297db2ad14a211a01","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3e4f2ed9fe2945b297db2ad14a211a01","code_challenge":"qm8pVSKtqyWed1ev_2sGR0q9-JSrWvNrogeVmcQJRRo","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:57.092 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000057","TimeStamp":"2021-03-30T20:30:57.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:57.277 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:57.286 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:57.289 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:57.291 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:57.295 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:57.298 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:57.303 -05:00 [DBG] Start discovery request
2021-03-30 15:30:57.310 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:57.324 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:57.326 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:57.328 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:57.332 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:57.369 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:57.371 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:57.373 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:57.376 -05:00 [DBG] Start authorize request
2021-03-30 15:30:57.377 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:57.378 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:57.394 -05:00 [DBG] js found in database: true
2021-03-30 15:30:57.395 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:57.397 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:57.400 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:57.404 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:57.407 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:57.410 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:57.414 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:57.416 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"98f845b3beec4d5ea56be07f460b6b19","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"98f845b3beec4d5ea56be07f460b6b19","code_challenge":"Owd22OB2qpQVkLjp0d-V0pDaPCvMNQsqZDbT0GYdZkI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:57.430 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:57.431 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"98f845b3beec4d5ea56be07f460b6b19","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"98f845b3beec4d5ea56be07f460b6b19","code_challenge":"Owd22OB2qpQVkLjp0d-V0pDaPCvMNQsqZDbT0GYdZkI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:57.448 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000005D","TimeStamp":"2021-03-30T20:30:57.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:57.647 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:57.652 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:57.654 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:57.655 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:57.662 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:57.664 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:57.667 -05:00 [DBG] Start discovery request
2021-03-30 15:30:57.678 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:57.799 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:57.802 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:57.804 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:57.806 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:58.056 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:58.059 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:58.061 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:58.066 -05:00 [DBG] Start authorize request
2021-03-30 15:30:58.068 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:58.069 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:58.087 -05:00 [DBG] js found in database: true
2021-03-30 15:30:58.088 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:58.092 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:58.099 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:58.104 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:58.108 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:58.111 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:58.115 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:58.120 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"410348a813a14360a92dda6376e062e6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"410348a813a14360a92dda6376e062e6","code_challenge":"71S3BFAuMrUQkhmDS5jZpqM6U687Tv4yTpWs-ouH6UI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:58.131 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:58.134 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"410348a813a14360a92dda6376e062e6","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"410348a813a14360a92dda6376e062e6","code_challenge":"71S3BFAuMrUQkhmDS5jZpqM6U687Tv4yTpWs-ouH6UI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:58.146 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000063","TimeStamp":"2021-03-30T20:30:58.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:58.416 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:58.420 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:58.423 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:58.425 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:58.428 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:58.429 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:58.432 -05:00 [DBG] Start discovery request
2021-03-30 15:30:58.436 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:58.584 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:58.587 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:58.589 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:58.590 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:58.649 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:58.652 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:58.654 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:58.656 -05:00 [DBG] Start authorize request
2021-03-30 15:30:58.656 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:58.657 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:58.677 -05:00 [DBG] js found in database: true
2021-03-30 15:30:58.678 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:58.681 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:58.684 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:58.687 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:58.691 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:58.695 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:58.697 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:58.700 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3d91eb9793e445beb59400ef19a2e77e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3d91eb9793e445beb59400ef19a2e77e","code_challenge":"HKJCU6veO0o-RPlDpb6TvUNKsPrcwjB1zLi2uE6a4OE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:58.714 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:58.716 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3d91eb9793e445beb59400ef19a2e77e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3d91eb9793e445beb59400ef19a2e77e","code_challenge":"HKJCU6veO0o-RPlDpb6TvUNKsPrcwjB1zLi2uE6a4OE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:58.727 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000069","TimeStamp":"2021-03-30T20:30:58.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:30:59.025 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:30:59.031 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:30:59.033 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:30:59.034 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:30:59.039 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:30:59.041 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:30:59.043 -05:00 [DBG] Start discovery request
2021-03-30 15:30:59.051 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:30:59.136 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:30:59.138 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:30:59.143 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:30:59.144 -05:00 [DBG] Rendering check session result
2021-03-30 15:30:59.714 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:30:59.720 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:30:59.723 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:30:59.726 -05:00 [DBG] Start authorize request
2021-03-30 15:30:59.727 -05:00 [DBG] No user present in authorize request
2021-03-30 15:30:59.728 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:30:59.751 -05:00 [DBG] js found in database: true
2021-03-30 15:30:59.751 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:30:59.754 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:30:59.756 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:59.760 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:59.764 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:30:59.767 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:30:59.769 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:30:59.771 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"78db78cd29714f25ba6dd8a03f4eaa26","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"78db78cd29714f25ba6dd8a03f4eaa26","code_challenge":"Uj49lz0qeY0FhWDFgHM6jmgG4wQx-su56XDpQLMf8U8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:59.781 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:30:59.783 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"78db78cd29714f25ba6dd8a03f4eaa26","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"78db78cd29714f25ba6dd8a03f4eaa26","code_challenge":"Uj49lz0qeY0FhWDFgHM6jmgG4wQx-su56XDpQLMf8U8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:30:59.799 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000006F","TimeStamp":"2021-03-30T20:30:59.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:00.312 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:00.318 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:00.320 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:00.323 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:00.327 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:00.332 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:00.334 -05:00 [DBG] Start discovery request
2021-03-30 15:31:00.342 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:00.535 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:00.538 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:00.541 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:00.543 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:00.996 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:01.002 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:01.004 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:01.006 -05:00 [DBG] Start authorize request
2021-03-30 15:31:01.008 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:01.009 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:01.029 -05:00 [DBG] js found in database: true
2021-03-30 15:31:01.029 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:01.033 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:01.037 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:01.044 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:01.050 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:01.054 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:01.056 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:01.058 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8fe38c5584c6477ba2406b524ee58332","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8fe38c5584c6477ba2406b524ee58332","code_challenge":"tWxtVMfrMlQqIde925a_IZtYHzRECizIkURiKppvKuA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:01.074 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:01.077 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8fe38c5584c6477ba2406b524ee58332","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8fe38c5584c6477ba2406b524ee58332","code_challenge":"tWxtVMfrMlQqIde925a_IZtYHzRECizIkURiKppvKuA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:01.091 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000075","TimeStamp":"2021-03-30T20:31:01.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:01.811 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:01.820 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:01.822 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:01.824 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:01.826 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:01.827 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:01.834 -05:00 [DBG] Start discovery request
2021-03-30 15:31:01.839 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:01.928 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:01.931 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:01.933 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:01.935 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:02.292 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:02.295 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:02.298 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:02.300 -05:00 [DBG] Start authorize request
2021-03-30 15:31:02.301 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:02.302 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:02.345 -05:00 [DBG] js found in database: true
2021-03-30 15:31:02.346 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:02.349 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:02.357 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:02.381 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:02.390 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:02.413 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:02.415 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:02.417 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ad99bd3a8d3649099b4e6f072196f3c5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ad99bd3a8d3649099b4e6f072196f3c5","code_challenge":"gNjNI5KcsLAJ7YKocVP0lw3VmLTwutSx2rpWVkRhc8E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:02.433 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:02.435 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ad99bd3a8d3649099b4e6f072196f3c5","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ad99bd3a8d3649099b4e6f072196f3c5","code_challenge":"gNjNI5KcsLAJ7YKocVP0lw3VmLTwutSx2rpWVkRhc8E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:02.452 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000007B","TimeStamp":"2021-03-30T20:31:02.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:03.426 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:03.432 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:03.433 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:03.434 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:03.436 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:03.439 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:03.441 -05:00 [DBG] Start discovery request
2021-03-30 15:31:03.460 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:03.911 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:03.914 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:03.917 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:03.919 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:04.264 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:04.268 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:04.270 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:04.272 -05:00 [DBG] Start authorize request
2021-03-30 15:31:04.274 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:04.274 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:04.311 -05:00 [DBG] js found in database: true
2021-03-30 15:31:04.312 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:04.319 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:04.325 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:04.345 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:04.355 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:04.380 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:04.383 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:04.385 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"52b895232423453b84b044bc18cb4743","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"52b895232423453b84b044bc18cb4743","code_challenge":"_ImDjTmgzfrsMT9FG8iSHhqm9WthTpQ3b9qrAdScT98","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:04.397 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:04.399 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"52b895232423453b84b044bc18cb4743","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"52b895232423453b84b044bc18cb4743","code_challenge":"_ImDjTmgzfrsMT9FG8iSHhqm9WthTpQ3b9qrAdScT98","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:04.414 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000081","TimeStamp":"2021-03-30T20:31:04.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:05.191 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:05.197 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:05.200 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:05.202 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:05.207 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:05.210 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:05.212 -05:00 [DBG] Start discovery request
2021-03-30 15:31:05.231 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:07.838 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:07.844 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:07.848 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:07.850 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:07.853 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:07.855 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:07.857 -05:00 [DBG] Start discovery request
2021-03-30 15:31:07.871 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:07.956 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:07.958 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:07.960 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:07.962 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:08.106 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:08.108 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:08.115 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:08.118 -05:00 [DBG] Start authorize request
2021-03-30 15:31:08.120 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:08.120 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:08.156 -05:00 [DBG] js found in database: true
2021-03-30 15:31:08.156 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:08.160 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:08.168 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:08.185 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:08.188 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:08.192 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:08.193 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:08.195 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"25127cc4b8be46cb804c4d1de71d4153","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"25127cc4b8be46cb804c4d1de71d4153","code_challenge":"HOUWm-y-GThgHSdz7xTEM4swk1vHMSXCKEP_HfV8JKE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:08.211 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:08.213 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"25127cc4b8be46cb804c4d1de71d4153","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"25127cc4b8be46cb804c4d1de71d4153","code_challenge":"HOUWm-y-GThgHSdz7xTEM4swk1vHMSXCKEP_HfV8JKE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:08.225 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000089","TimeStamp":"2021-03-30T20:31:08.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:08.540 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:08.548 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:08.550 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:08.552 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:08.556 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:08.559 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:08.561 -05:00 [DBG] Start discovery request
2021-03-30 15:31:08.567 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:08.671 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:08.673 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:08.675 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:08.677 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:08.871 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:08.873 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:08.877 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:08.879 -05:00 [DBG] Start authorize request
2021-03-30 15:31:08.880 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:08.881 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:08.899 -05:00 [DBG] js found in database: true
2021-03-30 15:31:08.899 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:08.901 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:08.904 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:08.907 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:08.910 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:08.915 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:08.917 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:08.918 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"07ff82ff63954d90a05615d176df2bc0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"07ff82ff63954d90a05615d176df2bc0","code_challenge":"ODEwHvubnIHJqarDosgd697m4ctfWNm_nysaB-0twNI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:08.930 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:08.932 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"07ff82ff63954d90a05615d176df2bc0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"07ff82ff63954d90a05615d176df2bc0","code_challenge":"ODEwHvubnIHJqarDosgd697m4ctfWNm_nysaB-0twNI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:08.949 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000008F","TimeStamp":"2021-03-30T20:31:08.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:09.445 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:09.451 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:09.452 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:09.453 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:09.455 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:09.460 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:09.463 -05:00 [DBG] Start discovery request
2021-03-30 15:31:09.469 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:09.647 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:09.650 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:09.652 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:09.654 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:09.946 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:09.949 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:09.951 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:09.957 -05:00 [DBG] Start authorize request
2021-03-30 15:31:09.959 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:09.960 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:09.980 -05:00 [DBG] js found in database: true
2021-03-30 15:31:09.981 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:09.984 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:09.987 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:09.992 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:09.997 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:10.002 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:10.005 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:10.007 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"66d22f1b977b4b15b8b33945c1c9ff29","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"66d22f1b977b4b15b8b33945c1c9ff29","code_challenge":"JernhlkADXCMhoz533PoXGSmwSQIfN26JRi2Ra0-sD8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:10.022 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:10.024 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"66d22f1b977b4b15b8b33945c1c9ff29","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"66d22f1b977b4b15b8b33945c1c9ff29","code_challenge":"JernhlkADXCMhoz533PoXGSmwSQIfN26JRi2Ra0-sD8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:10.042 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:00000095","TimeStamp":"2021-03-30T20:31:10.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:10.859 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:10.865 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:10.867 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:10.868 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:10.869 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:10.873 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:10.877 -05:00 [DBG] Start discovery request
2021-03-30 15:31:10.882 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:11.216 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:11.220 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:11.225 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:11.228 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:11.455 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:11.458 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:11.460 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:11.462 -05:00 [DBG] Start authorize request
2021-03-30 15:31:11.463 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:11.464 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:11.480 -05:00 [DBG] js found in database: true
2021-03-30 15:31:11.481 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:11.483 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:11.486 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:11.493 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:11.497 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:11.503 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:11.504 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:11.506 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f82a9e13830948918528362984580772","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f82a9e13830948918528362984580772","code_challenge":"rF58Imf0vv2t8wyhQJJwlKnmPS4vvheEDjoCP8bBi9U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:11.523 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:11.525 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f82a9e13830948918528362984580772","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f82a9e13830948918528362984580772","code_challenge":"rF58Imf0vv2t8wyhQJJwlKnmPS4vvheEDjoCP8bBi9U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:11.538 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:0000009B","TimeStamp":"2021-03-30T20:31:11.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:12.091 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:12.101 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:12.103 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:12.104 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:12.105 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:12.107 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:12.109 -05:00 [DBG] Start discovery request
2021-03-30 15:31:12.116 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:12.192 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:12.194 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:12.196 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:12.198 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:12.391 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:12.393 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:12.395 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:12.397 -05:00 [DBG] Start authorize request
2021-03-30 15:31:12.398 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:12.400 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:12.420 -05:00 [DBG] js found in database: true
2021-03-30 15:31:12.420 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:12.427 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:12.431 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:12.435 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:12.440 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:12.443 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:12.445 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:12.449 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"5011e55972cb4a95a054a12e91c37a4a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"5011e55972cb4a95a054a12e91c37a4a","code_challenge":"lCh40C6Hnyihd7dC7MO6CMz3ZGc34sO2hhjuBPrFXMo","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:12.462 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:12.464 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"5011e55972cb4a95a054a12e91c37a4a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"5011e55972cb4a95a054a12e91c37a4a","code_challenge":"lCh40C6Hnyihd7dC7MO6CMz3ZGc34sO2hhjuBPrFXMo","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:12.480 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000A1","TimeStamp":"2021-03-30T20:31:12.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:12.976 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:12.981 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:12.982 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:12.984 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:12.986 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:12.990 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:12.992 -05:00 [DBG] Start discovery request
2021-03-30 15:31:12.998 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:13.140 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:13.144 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:13.147 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:13.149 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:13.510 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:13.512 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:13.518 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:13.523 -05:00 [DBG] Start authorize request
2021-03-30 15:31:13.524 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:13.526 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:13.551 -05:00 [DBG] js found in database: true
2021-03-30 15:31:13.552 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:13.555 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:13.559 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:13.562 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:13.566 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:13.571 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:13.573 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:13.575 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"87dbd27855ec474b93e722e3ec0d8683","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"87dbd27855ec474b93e722e3ec0d8683","code_challenge":"oJ0XWKX_5XQXh6fkx9m8MfYwjbqi45j3RNm-3Fceg04","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:13.589 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:13.592 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"87dbd27855ec474b93e722e3ec0d8683","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"87dbd27855ec474b93e722e3ec0d8683","code_challenge":"oJ0XWKX_5XQXh6fkx9m8MfYwjbqi45j3RNm-3Fceg04","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:13.608 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000A7","TimeStamp":"2021-03-30T20:31:13.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:14.511 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:14.516 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:14.518 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:14.519 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:14.521 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:14.525 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:14.528 -05:00 [DBG] Start discovery request
2021-03-30 15:31:14.535 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:14.760 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:14.764 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:14.771 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:14.774 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:15.161 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:15.165 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:15.169 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:15.172 -05:00 [DBG] Start authorize request
2021-03-30 15:31:15.176 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:15.176 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:15.196 -05:00 [DBG] js found in database: true
2021-03-30 15:31:15.196 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:15.199 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:15.202 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:15.205 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:15.210 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:15.214 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:15.215 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:15.217 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"d771dd5c0c444d84896ca4ed4e3270f1","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"d771dd5c0c444d84896ca4ed4e3270f1","code_challenge":"CT5aOT0biXqrzpZX3jLhNymQXI5H3x-YmxcLi7dFijs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:15.229 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:15.231 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"d771dd5c0c444d84896ca4ed4e3270f1","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"d771dd5c0c444d84896ca4ed4e3270f1","code_challenge":"CT5aOT0biXqrzpZX3jLhNymQXI5H3x-YmxcLi7dFijs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:15.242 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000AD","TimeStamp":"2021-03-30T20:31:15.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:15.707 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:15.712 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:15.713 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:15.715 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:15.716 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:15.721 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:15.723 -05:00 [DBG] Start discovery request
2021-03-30 15:31:15.728 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:15.833 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:15.836 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:15.839 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:15.847 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:16.157 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:16.161 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:16.163 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:16.165 -05:00 [DBG] Start authorize request
2021-03-30 15:31:16.166 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:16.167 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:16.189 -05:00 [DBG] js found in database: true
2021-03-30 15:31:16.189 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:16.196 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:16.199 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:16.204 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:16.211 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:16.216 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:16.217 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:16.223 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"601f64403b8a4d59b76feabc1a95a005","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"601f64403b8a4d59b76feabc1a95a005","code_challenge":"AVYaYGU0AR0RtPxHlqqu2eK5eDRykbioZK2y-g-fP-Q","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:16.236 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:16.238 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"601f64403b8a4d59b76feabc1a95a005","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"601f64403b8a4d59b76feabc1a95a005","code_challenge":"AVYaYGU0AR0RtPxHlqqu2eK5eDRykbioZK2y-g-fP-Q","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:16.260 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000B3","TimeStamp":"2021-03-30T20:31:16.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:31:16.796 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:31:16.801 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:31:16.803 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:31:16.804 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:31:16.807 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:31:16.810 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:31:16.813 -05:00 [DBG] Start discovery request
2021-03-30 15:31:16.818 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:31:16.993 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:31:16.995 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:31:16.998 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:31:17.000 -05:00 [DBG] Rendering check session result
2021-03-30 15:31:17.243 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:31:17.247 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:31:17.248 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:31:17.251 -05:00 [DBG] Start authorize request
2021-03-30 15:31:17.252 -05:00 [DBG] No user present in authorize request
2021-03-30 15:31:17.255 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:31:17.272 -05:00 [DBG] js found in database: true
2021-03-30 15:31:17.272 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:31:17.275 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:31:17.278 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:17.283 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:17.288 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:31:17.292 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:31:17.293 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:31:17.298 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"9d209eaea74e4848ace61714061a2a5b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"9d209eaea74e4848ace61714061a2a5b","code_challenge":"KFcfsohNdX4mNQyEmx6OiwPH9O7gGpm_1IFDn9tCk6Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:17.308 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:31:17.310 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"9d209eaea74e4848ace61714061a2a5b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"9d209eaea74e4848ace61714061a2a5b","code_challenge":"KFcfsohNdX4mNQyEmx6OiwPH9O7gGpm_1IFDn9tCk6Y","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:31:17.324 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000B9","TimeStamp":"2021-03-30T20:31:17.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:01.449 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:01.456 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:01.458 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:01.459 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:01.461 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:01.482 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:01.486 -05:00 [DBG] Start discovery request
2021-03-30 15:32:01.491 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:01.643 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:01.645 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:01.647 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:01.649 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:01.796 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:01.799 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:01.800 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:01.802 -05:00 [DBG] Start authorize request
2021-03-30 15:32:01.804 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:01.805 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:01.823 -05:00 [DBG] js found in database: true
2021-03-30 15:32:01.824 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:01.826 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:01.833 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:01.837 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:01.841 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:01.849 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:01.852 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:01.854 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"e0406160ac9340949cad333bd2b77c32","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"e0406160ac9340949cad333bd2b77c32","code_challenge":"92j1mPWrgUN_4RZTerifGuTaDBEdahJgBUcl7yQryk4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:01.868 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:01.871 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"e0406160ac9340949cad333bd2b77c32","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"e0406160ac9340949cad333bd2b77c32","code_challenge":"92j1mPWrgUN_4RZTerifGuTaDBEdahJgBUcl7yQryk4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:01.885 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000BF","TimeStamp":"2021-03-30T20:32:01.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:02.710 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:02.716 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:02.719 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:02.721 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:02.724 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:02.727 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:02.728 -05:00 [DBG] Start discovery request
2021-03-30 15:32:02.735 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:02.823 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:02.831 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:02.832 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:02.836 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:03.186 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:03.188 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:03.190 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:03.194 -05:00 [DBG] Start authorize request
2021-03-30 15:32:03.195 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:03.196 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:03.216 -05:00 [DBG] js found in database: true
2021-03-30 15:32:03.216 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:03.220 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:03.223 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:03.227 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:03.232 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:03.236 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:03.239 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:03.241 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"78b11efafb894039a29a77615918a9cb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"78b11efafb894039a29a77615918a9cb","code_challenge":"Sa-zXnNRZ7GSaBqq2DP_MWwBfB8Fs_-qYtXi8WqUniI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:03.252 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:03.254 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"78b11efafb894039a29a77615918a9cb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"78b11efafb894039a29a77615918a9cb","code_challenge":"Sa-zXnNRZ7GSaBqq2DP_MWwBfB8Fs_-qYtXi8WqUniI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:03.269 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000C5","TimeStamp":"2021-03-30T20:32:03.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:03.727 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:03.732 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:03.733 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:03.734 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:03.736 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:03.742 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:03.746 -05:00 [DBG] Start discovery request
2021-03-30 15:32:03.754 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:03.856 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:03.858 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:03.861 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:03.865 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:04.090 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:04.093 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:04.098 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:04.100 -05:00 [DBG] Start authorize request
2021-03-30 15:32:04.102 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:04.103 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:04.120 -05:00 [DBG] js found in database: true
2021-03-30 15:32:04.120 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:04.125 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:04.129 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:04.132 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:04.136 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:04.140 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:04.142 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:04.147 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ca1c674eb2014d5aab486298c42100cb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ca1c674eb2014d5aab486298c42100cb","code_challenge":"3cV0Zvf2OC2MtP_8cPr6kvzRAoWTWYuLPY-f03e_j2Q","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:04.160 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:04.162 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ca1c674eb2014d5aab486298c42100cb","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ca1c674eb2014d5aab486298c42100cb","code_challenge":"3cV0Zvf2OC2MtP_8cPr6kvzRAoWTWYuLPY-f03e_j2Q","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:04.178 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000CB","TimeStamp":"2021-03-30T20:32:04.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:04.677 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:04.685 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:04.686 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:04.689 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:04.694 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:04.696 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:04.697 -05:00 [DBG] Start discovery request
2021-03-30 15:32:04.707 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:04.792 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:04.794 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:04.799 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:04.802 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:05.010 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:05.012 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:05.015 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:05.020 -05:00 [DBG] Start authorize request
2021-03-30 15:32:05.023 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:05.025 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:05.049 -05:00 [DBG] js found in database: true
2021-03-30 15:32:05.050 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:05.053 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:05.056 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:05.059 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:05.063 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:05.070 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:05.072 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:05.074 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"567557c37deb47ce8a945567f56c1174","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"567557c37deb47ce8a945567f56c1174","code_challenge":"HPiq9WIuCIa_HSTXMaKloVXqGeqgD08Xr-w2UfAwxMw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:05.088 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:05.090 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"567557c37deb47ce8a945567f56c1174","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"567557c37deb47ce8a945567f56c1174","code_challenge":"HPiq9WIuCIa_HSTXMaKloVXqGeqgD08Xr-w2UfAwxMw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:05.105 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000D1","TimeStamp":"2021-03-30T20:32:05.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:05.526 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:05.530 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:05.531 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:05.535 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:05.538 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:05.540 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:05.542 -05:00 [DBG] Start discovery request
2021-03-30 15:32:05.548 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:05.609 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:05.613 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:05.616 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:05.617 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:05.809 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:05.812 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:05.815 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:05.817 -05:00 [DBG] Start authorize request
2021-03-30 15:32:05.818 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:05.819 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:05.835 -05:00 [DBG] js found in database: true
2021-03-30 15:32:05.836 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:05.838 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:05.841 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:05.847 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:05.850 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:05.853 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:05.855 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:05.857 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"2517a16e575e4a818a8a935d5221824e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"2517a16e575e4a818a8a935d5221824e","code_challenge":"upLAhWRS5-mIyX9kIZuycQmyS4A5GlWy3UFbj4yA3Tg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:05.869 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:05.871 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"2517a16e575e4a818a8a935d5221824e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"2517a16e575e4a818a8a935d5221824e","code_challenge":"upLAhWRS5-mIyX9kIZuycQmyS4A5GlWy3UFbj4yA3Tg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:05.883 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000D7","TimeStamp":"2021-03-30T20:32:05.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:06.545 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:06.558 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:06.560 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:06.561 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:06.563 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:06.571 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:06.574 -05:00 [DBG] Start discovery request
2021-03-30 15:32:06.585 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:06.776 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:06.780 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:06.783 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:06.788 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:07.243 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:07.245 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:07.247 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:07.250 -05:00 [DBG] Start authorize request
2021-03-30 15:32:07.253 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:07.255 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:07.272 -05:00 [DBG] js found in database: true
2021-03-30 15:32:07.273 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:07.275 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:07.278 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:07.284 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:07.288 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:07.291 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:07.292 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:07.297 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8e9ff6dd788c43ebb9ed09b79bbe5af0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8e9ff6dd788c43ebb9ed09b79bbe5af0","code_challenge":"67DkHrzLQ_ocseLeuzUWO9aONMmP_poZxoV8GdIT9-c","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:07.308 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:07.310 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"8e9ff6dd788c43ebb9ed09b79bbe5af0","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"8e9ff6dd788c43ebb9ed09b79bbe5af0","code_challenge":"67DkHrzLQ_ocseLeuzUWO9aONMmP_poZxoV8GdIT9-c","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:07.323 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000DD","TimeStamp":"2021-03-30T20:32:07.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:08.155 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:08.160 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:08.163 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:08.166 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:08.169 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:08.170 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:08.173 -05:00 [DBG] Start discovery request
2021-03-30 15:32:08.188 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:08.493 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:08.497 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:08.500 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:08.502 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:08.943 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:08.945 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:08.948 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:08.950 -05:00 [DBG] Start authorize request
2021-03-30 15:32:08.951 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:08.952 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:08.999 -05:00 [DBG] js found in database: true
2021-03-30 15:32:09.000 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:09.003 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:09.010 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:09.034 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:09.046 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:09.066 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:09.069 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:09.070 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ba8c503f6bb24c81b486070f35a35b00","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ba8c503f6bb24c81b486070f35a35b00","code_challenge":"PZ1jQOFCa5KwQwSuKKm4vk9CZvBi8M0fg7JaH9AjvEA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:09.083 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:09.085 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ba8c503f6bb24c81b486070f35a35b00","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ba8c503f6bb24c81b486070f35a35b00","code_challenge":"PZ1jQOFCa5KwQwSuKKm4vk9CZvBi8M0fg7JaH9AjvEA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:09.099 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000E3","TimeStamp":"2021-03-30T20:32:09.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:09.658 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:09.664 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:09.666 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:09.667 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:09.670 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:09.673 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:09.675 -05:00 [DBG] Start discovery request
2021-03-30 15:32:09.686 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:09.863 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:09.865 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:09.867 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:09.869 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:10.109 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:10.112 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:10.116 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:10.118 -05:00 [DBG] Start authorize request
2021-03-30 15:32:10.119 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:10.122 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:10.161 -05:00 [DBG] js found in database: true
2021-03-30 15:32:10.162 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:10.166 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:10.173 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:10.193 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:10.199 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:10.204 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:10.206 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:10.207 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"fae39aee14b64363afc2cb776691a81e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"fae39aee14b64363afc2cb776691a81e","code_challenge":"TB8l1swgTn_jvARrRhu7b7PFfl-vt_ahosFJK_JRgI4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:10.221 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:10.223 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"fae39aee14b64363afc2cb776691a81e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"fae39aee14b64363afc2cb776691a81e","code_challenge":"TB8l1swgTn_jvARrRhu7b7PFfl-vt_ahosFJK_JRgI4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:10.242 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000E9","TimeStamp":"2021-03-30T20:32:10.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:10.738 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:10.743 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:10.744 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:10.745 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:10.747 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:10.751 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:10.752 -05:00 [DBG] Start discovery request
2021-03-30 15:32:10.765 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:32:10.958 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:32:10.960 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:32:10.962 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:32:10.964 -05:00 [DBG] Rendering check session result
2021-03-30 15:32:11.356 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:32:11.359 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:32:11.361 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:32:11.366 -05:00 [DBG] Start authorize request
2021-03-30 15:32:11.369 -05:00 [DBG] No user present in authorize request
2021-03-30 15:32:11.370 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:32:11.414 -05:00 [DBG] js found in database: true
2021-03-30 15:32:11.415 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:32:11.418 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:32:11.425 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:11.445 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:11.453 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:32:11.477 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:32:11.479 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:32:11.481 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f798fbd7962d423ab529cc204c9caa7f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f798fbd7962d423ab529cc204c9caa7f","code_challenge":"7NZ1m2OanROadkQJkD-9DkHtJXI38yJXT6bCGCkoIZY","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:11.493 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:32:11.495 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f798fbd7962d423ab529cc204c9caa7f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f798fbd7962d423ab529cc204c9caa7f","code_challenge":"7NZ1m2OanROadkQJkD-9DkHtJXI38yJXT6bCGCkoIZY","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:32:11.507 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KN:000000EF","TimeStamp":"2021-03-30T20:32:11.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:32:12.582 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:32:12.589 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:32:12.590 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:32:12.592 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:32:12.597 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:32:12.600 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:32:12.602 -05:00 [DBG] Start discovery request
2021-03-30 15:32:12.622 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:33:35.041 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:33:35.047 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:33:35.049 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:33:35.051 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:33:35.055 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:33:35.058 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:33:35.060 -05:00 [DBG] Start discovery request
2021-03-30 15:33:35.078 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:33:35.132 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:33:35.135 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:33:35.137 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:33:35.138 -05:00 [DBG] Start authorize request
2021-03-30 15:33:35.139 -05:00 [DBG] No user present in authorize request
2021-03-30 15:33:35.140 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:33:35.170 -05:00 [DBG] js found in database: true
2021-03-30 15:33:35.171 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:33:35.173 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:33:35.178 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:33:35.197 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:33:35.202 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:33:35.205 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:33:35.207 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:33:35.210 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"807c5e72cc22457a87032691063f8a0c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"807c5e72cc22457a87032691063f8a0c","code_challenge":"5lTbfgo4JYunR1L0wIIFYOpnS_eyTwz5Am7iUP3ZO34","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:33:35.223 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:33:35.259 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:33:35.275 -05:00 [DBG] js found in database: true
2021-03-30 15:33:35.276 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:33:35.278 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:33:35.282 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:33:35.285 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:33:35.289 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:33:35.295 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:33:35.298 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:33:35.315 -05:00 [DBG] js found in database: true
2021-03-30 15:33:35.316 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:09.489 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:38:09.522 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:38:09.524 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:38:09.526 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:38:09.533 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:38:09.536 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:38:09.539 -05:00 [DBG] Start discovery request
2021-03-30 15:38:09.555 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:38:09.629 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:38:09.631 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:38:09.632 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:38:09.634 -05:00 [DBG] Start authorize request
2021-03-30 15:38:09.635 -05:00 [DBG] No user present in authorize request
2021-03-30 15:38:09.636 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:38:09.666 -05:00 [DBG] js found in database: true
2021-03-30 15:38:09.667 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:09.671 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:38:09.676 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:09.694 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:09.698 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:09.703 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:09.704 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:38:09.707 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"cc4dae34e06e4880b7b74279672d378f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"cc4dae34e06e4880b7b74279672d378f","code_challenge":"xSolrVxaTDZQbTRQIDQWSKO32BZeYBT6LZyOwkF69DM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:38:09.721 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:38:09.771 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:38:09.788 -05:00 [DBG] js found in database: true
2021-03-30 15:38:09.788 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:09.792 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:38:09.795 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:09.799 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:09.803 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:09.806 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:09.808 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:38:09.824 -05:00 [DBG] js found in database: true
2021-03-30 15:38:09.825 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:35.027 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:38:35.064 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:38:35.086 -05:00 [DBG] js found in database: true
2021-03-30 15:38:35.087 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:35.090 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:38:35.095 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:35.102 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:35.106 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:35.110 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:35.111 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:38:35.142 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:38:35.142 -05:00 [DBG] Adding idp claim with value: local
2021-03-30 15:38:35.144 -05:00 [DBG] Adding auth_time claim with value: 1617136715
2021-03-30 15:38:35.146 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:38:35.148 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000013","TimeStamp":"2021-03-30T20:38:35.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-30 15:38:35.171 -05:00 [DBG] js found in database: true
2021-03-30 15:38:35.171 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:35.199 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:38:35.202 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:38:35.207 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:38:35.209 -05:00 [DBG] Start authorize callback request
2021-03-30 15:38:35.210 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:38:35.212 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:38:35.231 -05:00 [DBG] js found in database: true
2021-03-30 15:38:35.231 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:38:35.234 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:38:35.238 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:35.248 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:35.254 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:35.262 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:35.264 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:38:35.271 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"cc4dae34e06e4880b7b74279672d378f","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"emXc7UkHpNe1-NuFH1CfCg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"cc4dae34e06e4880b7b74279672d378f","code_challenge":"xSolrVxaTDZQbTRQIDQWSKO32BZeYBT6LZyOwkF69DM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:38:35.289 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 15:38:35.290 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:38:35.294 -05:00 [DBG] +c2SMr37VN0TqcsSVE0lwmEph0XqdljIgDWF2owQkAo= not found in database
2021-03-30 15:38:35.301 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****3WgI","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000015","TimeStamp":"2021-03-30T20:38:35.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:38:35.313 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"cc4dae34e06e4880b7b74279672d378f","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:38:35.317 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:38:35.318 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:38:41.057 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:38:41.101 -05:00 [DBG] mvc found in database: true
2021-03-30 15:38:41.101 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:38:41.104 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:38:41.111 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:41.131 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:41.138 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:38:41.144 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:38:41.147 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:38:41.178 -05:00 [DBG] mvc found in database: true
2021-03-30 15:38:41.179 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:25.683 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:25.688 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:25.691 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:25.693 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:25.696 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:25.698 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:25.700 -05:00 [DBG] Start discovery request
2021-03-30 15:40:25.712 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:25.807 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:25.809 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:25.812 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:25.815 -05:00 [DBG] Start authorize request
2021-03-30 15:40:25.816 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:40:25.817 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:25.855 -05:00 [DBG] js found in database: true
2021-03-30 15:40:25.856 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:25.862 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:25.868 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:25.884 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:25.889 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:25.896 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:25.901 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:25.902 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"451b109c5d824311b769d0066dccae57","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"emXc7UkHpNe1-NuFH1CfCg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"451b109c5d824311b769d0066dccae57","code_challenge":"u-GkSF2dMvRE7pmGF72taaLJEpr-YeVQMJH3YrfTcCk","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:25.917 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-30 15:40:25.918 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:40:25.924 -05:00 [DBG] TjdTdk3VtUdOJE/byQ+ZiAL/VGD+WgG1oWnR5fqKyMw= not found in database
2021-03-30 15:40:25.930 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****RcAA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000023","TimeStamp":"2021-03-30T20:40:25.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:40:25.937 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"451b109c5d824311b769d0066dccae57","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:40:26.152 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:26.161 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:26.162 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:26.164 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:26.166 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:26.170 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:26.173 -05:00 [DBG] Start discovery request
2021-03-30 15:40:26.180 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:26.198 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-30 15:40:26.204 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:26.205 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:26.206 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:40:26.209 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:40:26.211 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:40:26.213 -05:00 [DBG] Start token request.
2021-03-30 15:40:26.214 -05:00 [DBG] Start client validation
2021-03-30 15:40:26.215 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:40:26.217 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:40:26.219 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:40:26.219 -05:00 [DBG] Secret id found: js
2021-03-30 15:40:26.235 -05:00 [DBG] js found in database: true
2021-03-30 15:40:26.236 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:26.239 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-30 15:40:26.239 -05:00 [DBG] Client validation success
2021-03-30 15:40:26.242 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KO:00000015","TimeStamp":"2021-03-30T20:40:26.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:40:26.247 -05:00 [DBG] Start token request validation
2021-03-30 15:40:26.248 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:40:26.251 -05:00 [DBG] TjdTdk3VtUdOJE/byQ+ZiAL/VGD+WgG1oWnR5fqKyMw= found in database: true
2021-03-30 15:40:26.255 -05:00 [DBG] removing TjdTdk3VtUdOJE/byQ+ZiAL/VGD+WgG1oWnR5fqKyMw= persisted grant from database
2021-03-30 15:40:26.261 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:40:26.263 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:40:26.264 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"isSRGUV7HCEsLKXphntbNN37QtrI19btKmRbrz7RcAA","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"isSRGUV7HCEsLKXphntbNN37QtrI19btKmRbrz7RcAA","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"697d1830823540299e0c463b644b043b2123ae557cd04536a1ea54c65cccd6a4aa68717826354180ada4285bf63872cf","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:40:26.290 -05:00 [DBG] js found in database: true
2021-03-30 15:40:26.290 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:26.295 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:26.300 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:26.301 -05:00 [DBG] Getting claims for access token for client: js
2021-03-30 15:40:26.303 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:40:26.325 -05:00 [DBG] js found in database: true
2021-03-30 15:40:26.326 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:26.331 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:26.334 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:26.336 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-30 15:40:26.339 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:40:26.345 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****65Qw","$type":"Token"},{"TokenType":"access_token","TokenValue":"****wuMQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KO:00000015","TimeStamp":"2021-03-30T20:40:26.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:40:26.352 -05:00 [DBG] Token request success.
2021-03-30 15:40:26.366 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:40:26.370 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:26.371 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:26.377 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-30 15:40:26.381 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:26.382 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:26.383 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-30 15:40:26.386 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-30 15:40:26.388 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-30 15:40:26.390 -05:00 [DBG] Start userinfo request
2021-03-30 15:40:26.391 -05:00 [DBG] Bearer token found in header
2021-03-30 15:40:26.408 -05:00 [DBG] js found in database: true
2021-03-30 15:40:26.409 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:26.425 -05:00 [DBG] js found in database: true
2021-03-30 15:40:26.425 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:26.430 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:40:26.431 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617136826,"exp":1617140426,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617136715,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:40:26.437 -05:00 [DBG] Creating userinfo response
2021-03-30 15:40:26.438 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:40:26.443 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:40:26.446 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:26.447 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-30 15:40:26.449 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-30 15:40:26.451 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:26.459 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-30 15:40:26.460 -05:00 [DBG] End userinfo request
2021-03-30 15:40:26.484 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:26.487 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:26.489 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:26.492 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:35.553 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:35.555 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:35.558 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:35.561 -05:00 [DBG] Start authorize request
2021-03-30 15:40:35.565 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:40:35.567 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:35.582 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:35.582 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:35.585 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:35.589 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:35.594 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:35.598 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:35.601 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:35.603 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:35.604 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plhji2GbzeO-J0I9NtZn9k1OHLXyjqkW_doCogjRBEbh4RX5ZWhYLwkZl6P3c6eCYXK9sWd5iXPfkRje3Cl9aGeV4TRzmUyjb6DzlfQlSpygfcPs70-x2E_ZWAEB-iHos0ZHvxdUpXMjjvf7df5Ou3eO73dh5cLnk1k_vlS0OEKhy0sSDaQp22NkWw5Nxq-LjAE_sAnI9TpJLnhcgqWI0HTgB8PwuVD0ghQyBLNZTgSL-jY2tf51yp11peuDVCn6RmWBlHSHN2tjHmutawwjZGU-JPfe91xdrrkNLOkeGlotsb6cGXSEUYacmukPiE2uo3F3fiz5tvUk_r5dZfxkr7D2YJP9-waMTdgSTwi4_9_H6Q","UiLocales":null,"Nonce":"637527336355426114.ZTdjMmZjOGUtOTdhMy00MjAxLWFiNTYtOGUzMGIzNWUyOTNmOTc0Y2NjNjQtMDc3MS00MDdkLTg4NTgtODk5ZTAyYWQ3Zjg4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"emXc7UkHpNe1-NuFH1CfCg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"o0qaXl9QzZ_1Tit7k7IeEljDisLnfDbh8-jK6um1khE","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527336355426114.ZTdjMmZjOGUtOTdhMy00MjAxLWFiNTYtOGUzMGIzNWUyOTNmOTc0Y2NjNjQtMDc3MS00MDdkLTg4NTgtODk5ZTAyYWQ3Zjg4","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plhji2GbzeO-J0I9NtZn9k1OHLXyjqkW_doCogjRBEbh4RX5ZWhYLwkZl6P3c6eCYXK9sWd5iXPfkRje3Cl9aGeV4TRzmUyjb6DzlfQlSpygfcPs70-x2E_ZWAEB-iHos0ZHvxdUpXMjjvf7df5Ou3eO73dh5cLnk1k_vlS0OEKhy0sSDaQp22NkWw5Nxq-LjAE_sAnI9TpJLnhcgqWI0HTgB8PwuVD0ghQyBLNZTgSL-jY2tf51yp11peuDVCn6RmWBlHSHN2tjHmutawwjZGU-JPfe91xdrrkNLOkeGlotsb6cGXSEUYacmukPiE2uo3F3fiz5tvUk_r5dZfxkr7D2YJP9-waMTdgSTwi4_9_H6Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:35.628 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:40:35.628 -05:00 [INF] Showing consent: User has not yet consented
2021-03-30 15:40:35.665 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:35.686 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:35.687 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:35.692 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:35.696 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:35.700 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:35.708 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:35.713 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:35.714 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:35.730 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:35.731 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:35.739 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:35.756 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:37.637 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-30 15:40:37.667 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:37.686 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:37.686 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:37.690 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:37.694 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:37.697 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:37.700 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:37.703 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:37.705 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:37.706 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:0000002B","TimeStamp":"2021-03-30T20:40:37.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-30 15:40:37.729 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:37.729 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:37.745 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-30 15:40:37.747 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-30 15:40:37.757 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-30 15:40:37.763 -05:00 [DBG] Start authorize callback request
2021-03-30 15:40:37.764 -05:00 [DBG] User in authorize request: 1
2021-03-30 15:40:37.765 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:37.782 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:37.782 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:37.785 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:37.788 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:37.792 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:37.799 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:37.801 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:37.805 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:37.806 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plhji2GbzeO-J0I9NtZn9k1OHLXyjqkW_doCogjRBEbh4RX5ZWhYLwkZl6P3c6eCYXK9sWd5iXPfkRje3Cl9aGeV4TRzmUyjb6DzlfQlSpygfcPs70-x2E_ZWAEB-iHos0ZHvxdUpXMjjvf7df5Ou3eO73dh5cLnk1k_vlS0OEKhy0sSDaQp22NkWw5Nxq-LjAE_sAnI9TpJLnhcgqWI0HTgB8PwuVD0ghQyBLNZTgSL-jY2tf51yp11peuDVCn6RmWBlHSHN2tjHmutawwjZGU-JPfe91xdrrkNLOkeGlotsb6cGXSEUYacmukPiE2uo3F3fiz5tvUk_r5dZfxkr7D2YJP9-waMTdgSTwi4_9_H6Q","UiLocales":null,"Nonce":"637527336355426114.ZTdjMmZjOGUtOTdhMy00MjAxLWFiNTYtOGUzMGIzNWUyOTNmOTc0Y2NjNjQtMDc3MS00MDdkLTg4NTgtODk5ZTAyYWQ3Zjg4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"emXc7UkHpNe1-NuFH1CfCg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"o0qaXl9QzZ_1Tit7k7IeEljDisLnfDbh8-jK6um1khE","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527336355426114.ZTdjMmZjOGUtOTdhMy00MjAxLWFiNTYtOGUzMGIzNWUyOTNmOTc0Y2NjNjQtMDc3MS00MDdkLTg4NTgtODk5ZTAyYWQ3Zjg4","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plhji2GbzeO-J0I9NtZn9k1OHLXyjqkW_doCogjRBEbh4RX5ZWhYLwkZl6P3c6eCYXK9sWd5iXPfkRje3Cl9aGeV4TRzmUyjb6DzlfQlSpygfcPs70-x2E_ZWAEB-iHos0ZHvxdUpXMjjvf7df5Ou3eO73dh5cLnk1k_vlS0OEKhy0sSDaQp22NkWw5Nxq-LjAE_sAnI9TpJLnhcgqWI0HTgB8PwuVD0ghQyBLNZTgSL-jY2tf51yp11peuDVCn6RmWBlHSHN2tjHmutawwjZGU-JPfe91xdrrkNLOkeGlotsb6cGXSEUYacmukPiE2uo3F3fiz5tvUk_r5dZfxkr7D2YJP9-waMTdgSTwi4_9_H6Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:37.834 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-30 15:40:37.835 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:40:37.848 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-30 15:40:37.851 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-30 15:40:37.855 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database
2021-03-30 15:40:37.862 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-30 15:40:37.866 -05:00 [DBG] 1Ad4/++ap5LiTMLpigbuByHZOhU1rTJKw+6UhRHLmmg= not found in database
2021-03-30 15:40:37.872 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****WTFk","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:0000002D","TimeStamp":"2021-03-30T20:40:37.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:40:37.882 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plhji2GbzeO-J0I9NtZn9k1OHLXyjqkW_doCogjRBEbh4RX5ZWhYLwkZl6P3c6eCYXK9sWd5iXPfkRje3Cl9aGeV4TRzmUyjb6DzlfQlSpygfcPs70-x2E_ZWAEB-iHos0ZHvxdUpXMjjvf7df5Ou3eO73dh5cLnk1k_vlS0OEKhy0sSDaQp22NkWw5Nxq-LjAE_sAnI9TpJLnhcgqWI0HTgB8PwuVD0ghQyBLNZTgSL-jY2tf51yp11peuDVCn6RmWBlHSHN2tjHmutawwjZGU-JPfe91xdrrkNLOkeGlotsb6cGXSEUYacmukPiE2uo3F3fiz5tvUk_r5dZfxkr7D2YJP9-waMTdgSTwi4_9_H6Q","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-30 15:40:37.890 -05:00 [DBG] Augmenting SignInContext
2021-03-30 15:40:37.891 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-30 15:40:38.014 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-30 15:40:38.016 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-30 15:40:38.020 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-30 15:40:38.022 -05:00 [DBG] Start token request.
2021-03-30 15:40:38.025 -05:00 [DBG] Start client validation
2021-03-30 15:40:38.028 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-30 15:40:38.030 -05:00 [DBG] Start parsing for secret in post body
2021-03-30 15:40:38.032 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-30 15:40:38.034 -05:00 [DBG] Secret id found: mvc
2021-03-30 15:40:38.048 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:38.048 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:38.050 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-30 15:40:38.051 -05:00 [DBG] Client validation success
2021-03-30 15:40:38.052 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7JMPMBQ2KQ:00000001","TimeStamp":"2021-03-30T20:40:38.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-30 15:40:38.058 -05:00 [DBG] Start token request validation
2021-03-30 15:40:38.059 -05:00 [DBG] Start validation of authorization code token request
2021-03-30 15:40:38.062 -05:00 [DBG] 1Ad4/++ap5LiTMLpigbuByHZOhU1rTJKw+6UhRHLmmg= found in database: true
2021-03-30 15:40:38.065 -05:00 [DBG] removing 1Ad4/++ap5LiTMLpigbuByHZOhU1rTJKw+6UhRHLmmg= persisted grant from database
2021-03-30 15:40:38.072 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-30 15:40:38.075 -05:00 [DBG] Validation of authorization code token request success
2021-03-30 15:40:38.076 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"tz-3tDn-o9QotLWazLTUMv_WuC2LDFrETjJwqvcWTFk","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"tz-3tDn-o9QotLWazLTUMv_WuC2LDFrETjJwqvcWTFk","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"BulV4G52552Jx4bk9PR00W6Mz2_dyigS3ubGJuzzfgc"},"$type":"TokenRequestValidationLog"}
2021-03-30 15:40:38.097 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:38.098 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:38.102 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:38.105 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:38.107 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-30 15:40:38.109 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-30 15:40:38.116 -05:00 [DBG] Creating refresh token
2021-03-30 15:40:38.116 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-30 15:40:38.120 -05:00 [DBG] Xb31CDtrP4Z8b3Od2arZaB2X7TM50eo4aA7eOk/u6tA= not found in database
2021-03-30 15:40:38.142 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:38.143 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:38.147 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:38.150 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:38.152 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-30 15:40:38.156 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-30 15:40:38.160 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****dR4w","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****RLTU","$type":"Token"},{"TokenType":"access_token","TokenValue":"****KLvQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7JMPMBQ2KQ:00000001","TimeStamp":"2021-03-30T20:40:38.0000000Z","ProcessId":37536,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-30 15:40:38.169 -05:00 [DBG] Token request success.
2021-03-30 15:40:46.787 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:40:46.790 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:40:46.793 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:40:46.796 -05:00 [DBG] Processing signout request for 1
2021-03-30 15:40:46.799 -05:00 [DBG] Start end session request validation
2021-03-30 15:40:46.800 -05:00 [DBG] Start identity token validation
2021-03-30 15:40:46.816 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:46.816 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:46.820 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-30 15:40:46.824 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-30 15:40:46.826 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617136838,"exp":1617137138,"iss":"https://localhost:5000","aud":"mvc","nonce":"637527336355426114.ZTdjMmZjOGUtOTdhMy00MjAxLWFiNTYtOGUzMGIzNWUyOTNmOTc0Y2NjNjQtMDc3MS00MDdkLTg4NTgtODk5ZTAyYWQ3Zjg4","iat":1617136838,"at_hash":"flg1OyuO66ehnLkq_eL8rw","s_hash":"q4Ki3Ol22C3Csr_o38yw-Q","sid":"emXc7UkHpNe1-NuFH1CfCg","sub":"1","auth_time":1617136715,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-30 15:40:46.845 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"1","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljXhzvQwrYZdXFgF72u4v3yTeHdGjMuH2OB6G0drCTH0vTTy2pvsOOrh_BcDqqluJFh8vg2jcwwrl_huhtvIwlmGluxXknJgEkPlMD4XxgQhEVr0lAZtavwzceQdbR7GTKUQBsDDju5xnKr68AGbGc-","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljXhzvQwrYZdXFgF72u4v3yTeHdGjMuH2OB6G0drCTH0vTTy2pvsOOrh_BcDqqluJFh8vg2jcwwrl_huhtvIwlmGluxXknJgEkPlMD4XxgQhEVr0lAZtavwzceQdbR7GTKUQBsDDju5xnKr68AGbGc-","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:40:46.862 -05:00 [DBG] Success validating end session request from mvc
2021-03-30 15:40:46.903 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-30 15:40:46.908 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-30 15:40:46.910 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-30 15:40:46.911 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000031","TimeStamp":"2021-03-30T20:40:46.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-30 15:40:46.970 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-30 15:40:46.982 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-30 15:40:46.983 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-30 15:40:46.985 -05:00 [DBG] Processing signout callback request
2021-03-30 15:40:47.004 -05:00 [DBG] js found in database: true
2021-03-30 15:40:47.004 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:47.025 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:47.026 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:47.031 -05:00 [DBG] No client front-channel logout URLs
2021-03-30 15:40:47.032 -05:00 [DBG] No client back-channel logout URLs
2021-03-30 15:40:47.033 -05:00 [INF] Successful signout callback.
2021-03-30 15:40:47.034 -05:00 [DBG] No client front-channel iframe urls
2021-03-30 15:40:47.035 -05:00 [DBG] No client back-channel iframe urls
2021-03-30 15:40:48.152 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:48.157 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:48.160 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:48.163 -05:00 [DBG] Start authorize request
2021-03-30 15:40:48.165 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:48.167 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:48.185 -05:00 [DBG] js found in database: true
2021-03-30 15:40:48.186 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:48.190 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:48.198 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:48.213 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:48.217 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:48.223 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:48.226 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:48.228 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3b53bbcbf6c146c8a530c33a604cf3d7","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3b53bbcbf6c146c8a530c33a604cf3d7","code_challenge":"39vCGlh3fCW--oxoSr7E9vOTE6Ep02Ngx1Uadv5v--g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:48.234 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:48.242 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"3b53bbcbf6c146c8a530c33a604cf3d7","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"3b53bbcbf6c146c8a530c33a604cf3d7","code_challenge":"39vCGlh3fCW--oxoSr7E9vOTE6Ep02Ngx1Uadv5v--g","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:48.252 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000035","TimeStamp":"2021-03-30T20:40:48.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:48.430 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:48.436 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:48.438 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:48.439 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:48.447 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:48.450 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:48.453 -05:00 [DBG] Start discovery request
2021-03-30 15:40:48.476 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:48.504 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:48.506 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:48.508 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:48.510 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:48.665 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:48.669 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:48.671 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:48.674 -05:00 [DBG] Start authorize request
2021-03-30 15:40:48.675 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:48.676 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:48.697 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:48.698 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:48.701 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:48.706 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:48.710 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:48.711 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:48.712 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:48.712 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:48.716 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:48.717 -05:00 [DBG] Start authorize request
2021-03-30 15:40:48.722 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:48.724 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:48.725 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:48.727 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:48.731 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlifBaFaKH8ThOn4AxKOys1aBmHbSfUoY53IJliro3CoBHbiBRxzoj-yM6Md5cMT-YvXvWai7TlFN8G98t3chTn_N3yZJkUNnUtxFKpTk8tQngkEDO-zeg7YSOjyif08B3rRDZe8PtL7yfrFeC1SI_Gapb36tu-7eIvB6DIaefM0o0ngbxbLbeOb1fUCMVoemhjWQoCrYsXO0qpccM0o-tOyvqj3AiB9KndcWQ8ibwBVx-1Tp7NC3Gdw6l_JgzgEVNs4FuIc_OzJNMkvQmo1zryHiVn61mE4JgRN4bkFsmPCkGXyssupJxabL-2F90nCni-Cbe5CmEi1Ci0TL6K1nTXop8_1oIYy4ojCvoSz1tlWgQ","UiLocales":null,"Nonce":"637527336486539657.OWFiODM5NmYtYTBlOC00ZjIxLWEzMjItYWNmYjA5ZmQzMTE5MGJmZDA2YTctOTdlMC00ZDFjLWJmMzEtYWI5NDAwOTAzY2Iw","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"nrHhILsi0raF-l-GY-uVm2MfqrpLTZ6FniLsxzO0dFM","code_challenge_method":"S256","response_mode":"form_post","nonce":"637527336486539657.OWFiODM5NmYtYTBlOC00ZjIxLWEzMjItYWNmYjA5ZmQzMTE5MGJmZDA2YTctOTdlMC00ZDFjLWJmMzEtYWI5NDAwOTAzY2Iw","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlifBaFaKH8ThOn4AxKOys1aBmHbSfUoY53IJliro3CoBHbiBRxzoj-yM6Md5cMT-YvXvWai7TlFN8G98t3chTn_N3yZJkUNnUtxFKpTk8tQngkEDO-zeg7YSOjyif08B3rRDZe8PtL7yfrFeC1SI_Gapb36tu-7eIvB6DIaefM0o0ngbxbLbeOb1fUCMVoemhjWQoCrYsXO0qpccM0o-tOyvqj3AiB9KndcWQ8ibwBVx-1Tp7NC3Gdw6l_JgzgEVNs4FuIc_OzJNMkvQmo1zryHiVn61mE4JgRN4bkFsmPCkGXyssupJxabL-2F90nCni-Cbe5CmEi1Ci0TL6K1nTXop8_1oIYy4ojCvoSz1tlWgQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:48.740 -05:00 [DBG] js found in database: true
2021-03-30 15:40:48.749 -05:00 [INF] Showing login: User is not authenticated
2021-03-30 15:40:48.750 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:48.755 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:48.759 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:48.763 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:48.814 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:48.817 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:48.837 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:48.839 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:48.864 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"bec945ef6645400691258c9aed7a0b36","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"bec945ef6645400691258c9aed7a0b36","code_challenge":"QihxccoToE7rmYyhwZuMpI4G2cak5lRxxArEyFsa3f4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:48.876 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:48.879 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:48.880 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:48.882 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"bec945ef6645400691258c9aed7a0b36","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"bec945ef6645400691258c9aed7a0b36","code_challenge":"QihxccoToE7rmYyhwZuMpI4G2cak5lRxxArEyFsa3f4","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:48.885 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:48.902 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:0000003B","TimeStamp":"2021-03-30T20:40:48.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:48.907 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:48.917 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:48.926 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-30 15:40:48.930 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-30 15:40:48.932 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:48.958 -05:00 [DBG] mvc found in database: true
2021-03-30 15:40:48.959 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-30 15:40:49.162 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:49.167 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:49.168 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:49.170 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:49.176 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:49.178 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:49.180 -05:00 [DBG] Start discovery request
2021-03-30 15:40:49.185 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:49.204 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:49.206 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:49.209 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:49.210 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:49.412 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:49.413 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:49.415 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:49.417 -05:00 [DBG] Start authorize request
2021-03-30 15:40:49.417 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:49.419 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:49.437 -05:00 [DBG] js found in database: true
2021-03-30 15:40:49.437 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:49.440 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:49.444 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:49.448 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:49.451 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:49.454 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:49.455 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:49.458 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"dae9ac4e26db460bbe8589607360091a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"dae9ac4e26db460bbe8589607360091a","code_challenge":"gdNevMogowGK8PlBrESkP63sK4xGdCavJdApxyzWDcw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:49.470 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:49.472 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"dae9ac4e26db460bbe8589607360091a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"dae9ac4e26db460bbe8589607360091a","code_challenge":"gdNevMogowGK8PlBrESkP63sK4xGdCavJdApxyzWDcw","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:49.483 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000041","TimeStamp":"2021-03-30T20:40:49.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:49.681 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:49.687 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:49.688 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:49.689 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:49.691 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:49.692 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:49.696 -05:00 [DBG] Start discovery request
2021-03-30 15:40:49.701 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:49.726 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:49.728 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:49.730 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:49.732 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:49.886 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:49.892 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:49.894 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:49.895 -05:00 [DBG] Start authorize request
2021-03-30 15:40:49.896 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:49.898 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:49.912 -05:00 [DBG] js found in database: true
2021-03-30 15:40:49.913 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:49.917 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:49.922 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:49.926 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:49.931 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:49.935 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:49.937 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:49.942 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"9945885cccc04d219da6f4e7f331d062","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"9945885cccc04d219da6f4e7f331d062","code_challenge":"bTQiIpSgUnrEEN2bAU80Z-lFNbxRxOEtNE5QHRlRR4U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:49.960 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:49.962 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"9945885cccc04d219da6f4e7f331d062","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"9945885cccc04d219da6f4e7f331d062","code_challenge":"bTQiIpSgUnrEEN2bAU80Z-lFNbxRxOEtNE5QHRlRR4U","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:49.977 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000045","TimeStamp":"2021-03-30T20:40:49.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:50.245 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:50.253 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:50.255 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:50.256 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:50.258 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:50.262 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:50.265 -05:00 [DBG] Start discovery request
2021-03-30 15:40:50.272 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:50.296 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:50.298 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:50.299 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:50.301 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:50.361 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:50.363 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:50.365 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:50.367 -05:00 [DBG] Start authorize request
2021-03-30 15:40:50.368 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:50.369 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:50.390 -05:00 [DBG] js found in database: true
2021-03-30 15:40:50.407 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:50.413 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:50.416 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:50.420 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:50.426 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:50.430 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:50.432 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:50.435 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f366779c36254d97bb0b45e09018710c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f366779c36254d97bb0b45e09018710c","code_challenge":"g07_XOJRFS1g-c8CBUzy_fzY3Aic6Lf0czEKSPFXbXs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:50.450 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:50.455 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f366779c36254d97bb0b45e09018710c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f366779c36254d97bb0b45e09018710c","code_challenge":"g07_XOJRFS1g-c8CBUzy_fzY3Aic6Lf0czEKSPFXbXs","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:50.470 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000049","TimeStamp":"2021-03-30T20:40:50.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:50.690 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:50.696 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:50.714 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:50.718 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:50.720 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:50.721 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:50.727 -05:00 [DBG] Start discovery request
2021-03-30 15:40:50.737 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:50.763 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:50.765 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:50.766 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:50.771 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:50.818 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:50.820 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:50.822 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:50.823 -05:00 [DBG] Start authorize request
2021-03-30 15:40:50.824 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:50.824 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:50.842 -05:00 [DBG] js found in database: true
2021-03-30 15:40:50.843 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:50.844 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:50.847 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:50.849 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:50.852 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:50.854 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:50.855 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:50.856 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"c8b1abda5c814896b8a82f934ca4b3e3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"c8b1abda5c814896b8a82f934ca4b3e3","code_challenge":"PsBMS3ycy6TP9zui2Eqq3mOZiA3PQfJJgAeRXQnSIsA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:50.858 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:50.859 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"c8b1abda5c814896b8a82f934ca4b3e3","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"c8b1abda5c814896b8a82f934ca4b3e3","code_challenge":"PsBMS3ycy6TP9zui2Eqq3mOZiA3PQfJJgAeRXQnSIsA","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:50.868 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:0000004D","TimeStamp":"2021-03-30T20:40:50.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:51.062 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-30 15:40:51.065 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-30 15:40:51.066 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-30 15:40:51.067 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-30 15:40:51.067 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-30 15:40:51.068 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-30 15:40:51.068 -05:00 [DBG] Start discovery request
2021-03-30 15:40:51.074 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-30 15:40:51.105 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-30 15:40:51.107 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-30 15:40:51.109 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-30 15:40:51.110 -05:00 [DBG] Rendering check session result
2021-03-30 15:40:51.164 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-30 15:40:51.165 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-30 15:40:51.166 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-30 15:40:51.166 -05:00 [DBG] Start authorize request
2021-03-30 15:40:51.167 -05:00 [DBG] No user present in authorize request
2021-03-30 15:40:51.167 -05:00 [DBG] Start authorize request protocol validation
2021-03-30 15:40:51.184 -05:00 [DBG] js found in database: true
2021-03-30 15:40:51.184 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-30 15:40:51.185 -05:00 [DBG] Checking for PKCE parameters
2021-03-30 15:40:51.187 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:51.189 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:51.192 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-30 15:40:51.194 -05:00 [DBG] Found [] API scopes in database
2021-03-30 15:40:51.194 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-30 15:40:51.195 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"6668060a3e3e46b1950ca28eda2d8c6e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"6668060a3e3e46b1950ca28eda2d8c6e","code_challenge":"Ndo-fZYB4ak9uXcXOEExLEbSEMG_WubWuXUbKSk2_Jg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:51.199 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-30 15:40:51.200 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"6668060a3e3e46b1950ca28eda2d8c6e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"6668060a3e3e46b1950ca28eda2d8c6e","code_challenge":"Ndo-fZYB4ak9uXcXOEExLEbSEMG_WubWuXUbKSk2_Jg","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-30 15:40:51.203 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7JMPMBQ2KP:00000051","TimeStamp":"2021-03-30T20:40:51.0000000Z","ProcessId":37536,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-30 15:40:51.396 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-30 15:40:51.397 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-30 15:40:51.398 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-30 15:40:51.398 -05:00 [DBG] Processing signout request for anonymous
2021-03-30 15:40:51.398 -05:00 [DBG] Start end session request validation
2021-03-30 15:40:51.399 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-30 15:40:51.400 -05:00 [DBG] Success validating end session request from null
2021-03-31 10:54:43.545 -05:00 [INF] Starting host...
2021-03-31 10:54:53.352 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-31 10:54:53.619 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-31 10:54:53.624 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-31 10:54:53.625 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-31 10:54:53.625 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-31 10:54:53.626 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-31 10:54:53.626 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-31 10:54:56.327 -05:00 [DBG] Login Url: /Account/Login
2021-03-31 10:54:56.330 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-31 10:54:56.331 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-31 10:54:56.333 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-31 10:54:56.335 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-31 10:54:56.336 -05:00 [DBG] Error Url: /home/error
2021-03-31 10:54:56.337 -05:00 [DBG] Error Id Parameter: errorId
2021-03-31 10:56:59.783 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 10:56:59.814 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 10:56:59.817 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 10:56:59.820 -05:00 [DBG] Start discovery request
2021-03-31 10:57:03.363 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 10:57:04.099 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-31 10:57:04.107 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-31 10:57:04.136 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-31 10:57:04.141 -05:00 [DBG] Start key discovery request
2021-03-31 10:57:04.340 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 10:57:04.356 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 10:57:04.358 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 10:57:04.363 -05:00 [DBG] Start authorize request
2021-03-31 10:57:04.373 -05:00 [DBG] No user present in authorize request
2021-03-31 10:57:04.377 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 10:57:05.019 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:05.027 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:05.050 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 10:57:05.147 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:05.253 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:05.278 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:05.286 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:05.302 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 10:57:05.325 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlizC-ZJ2nLrtxXMrGtrpyF64Oiyz3VJGo_j3GoFB804RjHypwgq1ddkAu5ahTlMwig4_MSZMzxMT0YMGP1Kw-ye0sIMw-IKdYEXFAaIZpXFUQ7-0ky4IrrZGivuZnWqVYKpLA9wRrAEwSFXVjk22XzsShKn05empb3uLVVZUBaPeD0ngGjXLwFp0i4tsPNShLVqwTAmQOXHhaZLkKQcwUY0z720lEqvu10b3njnCijjdB8aTgEhkAAA90MBmSJNFDnmURYLLxXAMifGN5vKhUcIOmWquQJjusRWuAuZ1wgydbGE1BG_Ytc_A0wKrnELd41MpIDsVHzVkb180I3cnjAM4lcihICcFfoH_utA7RQB1w","UiLocales":null,"Nonce":"637528030242603057.NjZlODcwYTgtYjZmOS00YWVkLWFmZjAtZjc4ODNhNWJhNGMyZDQ5Y2Y3M2EtYWNmMS00ODMyLWEyY2YtYjczYTQ2MjA5ZDZi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"YiovLvU07j3xXlUFwyOdFrFJ8shZzuf5zL7ElOYGFcY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528030242603057.NjZlODcwYTgtYjZmOS00YWVkLWFmZjAtZjc4ODNhNWJhNGMyZDQ5Y2Y3M2EtYWNmMS00ODMyLWEyY2YtYjczYTQ2MjA5ZDZi","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlizC-ZJ2nLrtxXMrGtrpyF64Oiyz3VJGo_j3GoFB804RjHypwgq1ddkAu5ahTlMwig4_MSZMzxMT0YMGP1Kw-ye0sIMw-IKdYEXFAaIZpXFUQ7-0ky4IrrZGivuZnWqVYKpLA9wRrAEwSFXVjk22XzsShKn05empb3uLVVZUBaPeD0ngGjXLwFp0i4tsPNShLVqwTAmQOXHhaZLkKQcwUY0z720lEqvu10b3njnCijjdB8aTgEhkAAA90MBmSJNFDnmURYLLxXAMifGN5vKhUcIOmWquQJjusRWuAuZ1wgydbGE1BG_Ytc_A0wKrnELd41MpIDsVHzVkb180I3cnjAM4lcihICcFfoH_utA7RQB1w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 10:57:05.353 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 10:57:05.469 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 10:57:05.504 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:05.505 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:05.507 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 10:57:05.511 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:05.519 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:05.523 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:05.528 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:05.530 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 10:57:05.554 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:05.555 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:35.780 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 10:57:35.833 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:35.835 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:35.838 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 10:57:35.845 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:35.876 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:35.884 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:35.888 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:35.890 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 10:57:35.911 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:35.912 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:58.103 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 10:57:58.108 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 10:57:58.110 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 10:57:58.113 -05:00 [DBG] Start discovery request
2021-03-31 10:57:58.142 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 10:57:58.611 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-31 10:57:58.615 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-31 10:57:58.618 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-31 10:57:58.619 -05:00 [DBG] Start key discovery request
2021-03-31 10:57:58.765 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 10:57:58.768 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 10:57:58.769 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 10:57:58.771 -05:00 [DBG] Start authorize request
2021-03-31 10:57:58.773 -05:00 [DBG] No user present in authorize request
2021-03-31 10:57:58.774 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 10:57:58.799 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:58.800 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:58.804 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 10:57:58.808 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:58.815 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:58.819 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:58.824 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:58.825 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 10:57:58.828 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","UiLocales":null,"Nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"gqo-nIrTq_-7e5S7A5rF5C6qzmTYwt6PburWWjegbWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 10:57:58.847 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 10:57:58.920 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 10:57:58.943 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:58.943 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 10:57:58.947 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 10:57:58.951 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:58.955 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:58.959 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 10:57:58.964 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 10:57:58.966 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 10:57:59.001 -05:00 [DBG] mvc found in database: true
2021-03-31 10:57:59.001 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:11.312 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:38:11.364 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:38:11.367 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:38:11.371 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:38:11.374 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:38:11.376 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:38:11.378 -05:00 [DBG] Start discovery request
2021-03-31 11:38:11.394 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:38:11.494 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:38:11.507 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:38:11.508 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:38:11.510 -05:00 [DBG] Start authorize request
2021-03-31 11:38:11.511 -05:00 [DBG] No user present in authorize request
2021-03-31 11:38:11.512 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:11.567 -05:00 [DBG] js found in database: true
2021-03-31 11:38:11.568 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:11.571 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:11.578 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:11.606 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:11.621 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:11.625 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:11.627 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:11.628 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"897ae8f131dd4cb896ced3620881488c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"897ae8f131dd4cb896ced3620881488c","code_challenge":"TSv8DcgHcljZvYMMT9M5PM6ps7ex3bIFOHtFsKuOLiA","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:38:11.642 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 11:38:11.693 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:11.738 -05:00 [DBG] js found in database: true
2021-03-31 11:38:11.739 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:11.742 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:11.745 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:11.752 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:11.757 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:11.760 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:11.765 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:11.790 -05:00 [DBG] js found in database: true
2021-03-31 11:38:11.791 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:27.469 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:38:27.553 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:27.580 -05:00 [DBG] js found in database: true
2021-03-31 11:38:27.581 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:27.585 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:27.589 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:27.597 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:27.602 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:27.606 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:27.608 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:28.251 -05:00 [WRN] Invalid password for user 1.
2021-03-31 11:38:28.253 -05:00 [WRN] User 1 failed to provide the correct password.
2021-03-31 11:38:28.469 -05:00 [INF] {"Username":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HM7KBL9PV7U6:00000013","TimeStamp":"2021-03-31T16:38:28.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginFailureEvent"}
2021-03-31 11:38:28.475 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:28.494 -05:00 [DBG] js found in database: true
2021-03-31 11:38:28.494 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:28.497 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:28.501 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:28.505 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:28.509 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:28.513 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:28.517 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:28.537 -05:00 [DBG] js found in database: true
2021-03-31 11:38:28.537 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:39.363 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:38:39.408 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:39.435 -05:00 [DBG] js found in database: true
2021-03-31 11:38:39.436 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:39.439 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:39.445 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:39.449 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:39.456 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:39.460 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:39.461 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:39.564 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:38:39.565 -05:00 [DBG] Adding idp claim with value: local
2021-03-31 11:38:39.566 -05:00 [DBG] Adding auth_time claim with value: 1617208719
2021-03-31 11:38:39.581 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:38:39.586 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000015","TimeStamp":"2021-03-31T16:38:39.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-31 11:38:39.612 -05:00 [DBG] js found in database: true
2021-03-31 11:38:39.613 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:39.650 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:38:39.654 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:38:39.656 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:38:39.661 -05:00 [DBG] Start authorize callback request
2021-03-31 11:38:39.666 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:38:39.667 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:39.690 -05:00 [DBG] js found in database: true
2021-03-31 11:38:39.691 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:38:39.694 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:39.697 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:39.704 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:39.708 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:39.713 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:39.717 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:39.720 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"897ae8f131dd4cb896ced3620881488c","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rL7XMskixHTZomuimSTElg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"897ae8f131dd4cb896ced3620881488c","code_challenge":"TSv8DcgHcljZvYMMT9M5PM6ps7ex3bIFOHtFsKuOLiA","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:38:39.776 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 11:38:39.780 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:38:39.845 -05:00 [DBG] TCSXhaNdVMSEJEhCdGe7eQpukHXbO1DyQUVXNnA0EpE= not found in database
2021-03-31 11:38:39.912 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****MdnQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000017","TimeStamp":"2021-03-31T16:38:39.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:38:39.924 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"897ae8f131dd4cb896ced3620881488c","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:38:39.939 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:38:39.940 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:38:56.917 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:56.958 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:56.959 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:56.963 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:56.969 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:56.975 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:56.981 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:56.987 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:56.989 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:57.014 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:57.015 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:58.480 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:38:58.519 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:58.538 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:58.539 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:58.542 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:58.547 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:58.551 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:58.556 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:58.561 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:58.563 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:58.565 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:58.582 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:58.582 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:58.586 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:58.589 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:58.592 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:58.597 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:58.600 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:58.601 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:38:58.619 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:58.620 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:59.893 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:38:59.939 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:38:59.966 -05:00 [DBG] mvc found in database: true
2021-03-31 11:38:59.966 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:38:59.970 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:38:59.974 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:59.978 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:59.983 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:38:59.988 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:38:59.990 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:00.029 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:00.030 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:00.042 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:39:00.044 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:39:00.045 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:39:00.047 -05:00 [DBG] Start authorize callback request
2021-03-31 11:39:00.065 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:39:00.065 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:00.082 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:00.083 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:00.086 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:00.089 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:00.094 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:00.097 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:00.102 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:00.105 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:00.109 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","UiLocales":null,"Nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rL7XMskixHTZomuimSTElg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"gqo-nIrTq_-7e5S7A5rF5C6qzmTYwt6PburWWjegbWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:39:00.131 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:39:00.132 -05:00 [INF] Error: User denied consent
2021-03-31 11:39:00.135 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","UiLocales":null,"Nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rL7XMskixHTZomuimSTElg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"gqo-nIrTq_-7e5S7A5rF5C6qzmTYwt6PburWWjegbWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528030786766045.OGIyMDEyNzYtMmI3YS00Y2U1LTk2MDMtNzZkY2MwMDc3NTNmNjkyNGY4MzEtM2QzYS00ZjFhLTlmYjctNmQ0ZWU3MzY2MGJh","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlhXAjZG6B_Sh48WcXUyP1_KIU0c71zpUjpTn83jlmlSfYnTWSsB073lxQDb4U1UJoOOKycRWD8VQk-mesOpFJ7jyPFF-3tTmBNzdiTvs8lo7eSvn6xgN5Z3c614IIrIsoS_Mvf-fA_-JA7rzvRIOwLSkzC_eNxu228WSxP1drNtW0YW-ViGvKk5QVXRxG0KJ5pa1g-hIYz9ziAn-l9vDqY1KqBcA2K81s6cRGx4xG0wKjGNh_Jld7my0JZNYoHYuOKKBSlQad1C3Y6kgDGigcunacqai1oju4PVyrrmZ24iDO5JDZBlX0G-ey16ZgcnbC2tPN9DMZwNz5VracxlVCZVNqz59l0ZZbgroQEu9vzqAQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:39:00.156 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Error":"access_denied","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000029","TimeStamp":"2021-03-31T16:39:00.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:39:10.277 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:10.321 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:10.321 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:10.326 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:10.333 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:10.352 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:10.357 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:10.360 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:10.361 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:10.377 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:10.377 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:28.362 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:39:28.364 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:39:28.366 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:39:28.367 -05:00 [DBG] Start discovery request
2021-03-31 11:39:28.383 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:39:28.786 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-31 11:39:28.791 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-31 11:39:28.794 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-31 11:39:28.795 -05:00 [DBG] Start key discovery request
2021-03-31 11:39:28.909 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:39:28.911 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:39:28.914 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:39:28.915 -05:00 [DBG] Start authorize request
2021-03-31 11:39:28.916 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:39:28.917 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:28.949 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:28.949 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:28.951 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:28.954 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:28.957 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:28.960 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:28.963 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:28.965 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:28.968 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliH-go1cQd5_NZDX4m8X5vSB9CwLWJHlf9OtB1ZtxJdtZ_NGm49RvAeX4gzo9FwGJHB9XxF8B5KpbHRVZDQzsuOl2jLtVhKFWljUZx3NXj5pO9jT8sL4seJMgtvXlmVDcP9qt7gG-UkLIL6FijTWCYR6gjnURXTkfrjJydhU81UxVvisd02I6RN4XKqiGVea8waMDyEDDZ-_fQ2DbhOY-MxaKf_UKFpV4OhNcIdV134jsJ3yvukCus4VUnsfEe8tBPv5Rs8at182dA-NMNHRDCDUIbKB1AmsQq34D40ecmdebQAyG-BmHMs2jpCVs9jGXFC-miPozpwfxCPB_ajWz43wMZRLnsDyVNVO0zY2Y163A","UiLocales":null,"Nonce":"637528055688578271.OGQ0YTAyMjgtYTZmZi00MTQyLTljMWUtYjJjYmJmZjlhZDc4ZTZlZDZmYTAtMjA4ZC00MDIyLTg4ODgtNjRiNDI4ZmFlZTRk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rL7XMskixHTZomuimSTElg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"47om9DW4VjbMWlx2C2UYk62BdwjetBQ0rB15ofWQ4vw","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528055688578271.OGQ0YTAyMjgtYTZmZi00MTQyLTljMWUtYjJjYmJmZjlhZDc4ZTZlZDZmYTAtMjA4ZC00MDIyLTg4ODgtNjRiNDI4ZmFlZTRk","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliH-go1cQd5_NZDX4m8X5vSB9CwLWJHlf9OtB1ZtxJdtZ_NGm49RvAeX4gzo9FwGJHB9XxF8B5KpbHRVZDQzsuOl2jLtVhKFWljUZx3NXj5pO9jT8sL4seJMgtvXlmVDcP9qt7gG-UkLIL6FijTWCYR6gjnURXTkfrjJydhU81UxVvisd02I6RN4XKqiGVea8waMDyEDDZ-_fQ2DbhOY-MxaKf_UKFpV4OhNcIdV134jsJ3yvukCus4VUnsfEe8tBPv5Rs8at182dA-NMNHRDCDUIbKB1AmsQq34D40ecmdebQAyG-BmHMs2jpCVs9jGXFC-miPozpwfxCPB_ajWz43wMZRLnsDyVNVO0zY2Y163A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:39:28.981 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:39:28.981 -05:00 [INF] Showing consent: User has not yet consented
2021-03-31 11:39:29.042 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:29.058 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:29.059 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:29.060 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:29.062 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:29.066 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:29.069 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:29.072 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:29.074 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:29.087 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:29.087 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:29.094 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:29.111 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:32.394 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:39:32.456 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:32.477 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:32.477 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:32.479 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:32.482 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:32.486 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:32.489 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:32.493 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:32.494 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:32.500 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000033","TimeStamp":"2021-03-31T16:39:32.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-31 11:39:32.520 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:32.521 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:32.533 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:39:32.538 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:39:32.538 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:39:32.540 -05:00 [DBG] Start authorize callback request
2021-03-31 11:39:32.551 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:39:32.551 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:32.567 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:32.567 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:32.569 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:32.572 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:32.576 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:32.578 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:32.581 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:32.582 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:32.584 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliH-go1cQd5_NZDX4m8X5vSB9CwLWJHlf9OtB1ZtxJdtZ_NGm49RvAeX4gzo9FwGJHB9XxF8B5KpbHRVZDQzsuOl2jLtVhKFWljUZx3NXj5pO9jT8sL4seJMgtvXlmVDcP9qt7gG-UkLIL6FijTWCYR6gjnURXTkfrjJydhU81UxVvisd02I6RN4XKqiGVea8waMDyEDDZ-_fQ2DbhOY-MxaKf_UKFpV4OhNcIdV134jsJ3yvukCus4VUnsfEe8tBPv5Rs8at182dA-NMNHRDCDUIbKB1AmsQq34D40ecmdebQAyG-BmHMs2jpCVs9jGXFC-miPozpwfxCPB_ajWz43wMZRLnsDyVNVO0zY2Y163A","UiLocales":null,"Nonce":"637528055688578271.OGQ0YTAyMjgtYTZmZi00MTQyLTljMWUtYjJjYmJmZjlhZDc4ZTZlZDZmYTAtMjA4ZC00MDIyLTg4ODgtNjRiNDI4ZmFlZTRk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"rL7XMskixHTZomuimSTElg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"47om9DW4VjbMWlx2C2UYk62BdwjetBQ0rB15ofWQ4vw","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528055688578271.OGQ0YTAyMjgtYTZmZi00MTQyLTljMWUtYjJjYmJmZjlhZDc4ZTZlZDZmYTAtMjA4ZC00MDIyLTg4ODgtNjRiNDI4ZmFlZTRk","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliH-go1cQd5_NZDX4m8X5vSB9CwLWJHlf9OtB1ZtxJdtZ_NGm49RvAeX4gzo9FwGJHB9XxF8B5KpbHRVZDQzsuOl2jLtVhKFWljUZx3NXj5pO9jT8sL4seJMgtvXlmVDcP9qt7gG-UkLIL6FijTWCYR6gjnURXTkfrjJydhU81UxVvisd02I6RN4XKqiGVea8waMDyEDDZ-_fQ2DbhOY-MxaKf_UKFpV4OhNcIdV134jsJ3yvukCus4VUnsfEe8tBPv5Rs8at182dA-NMNHRDCDUIbKB1AmsQq34D40ecmdebQAyG-BmHMs2jpCVs9jGXFC-miPozpwfxCPB_ajWz43wMZRLnsDyVNVO0zY2Y163A","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:39:32.597 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:39:32.603 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:39:32.604 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:39:32.606 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-31 11:39:32.617 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database
2021-03-31 11:39:32.628 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:39:32.631 -05:00 [DBG] CXz7Zzcw2oJlxsK8JJpHft4zyXi/7knIFeq6nxHNzJg= not found in database
2021-03-31 11:39:32.640 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****tXgA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000035","TimeStamp":"2021-03-31T16:39:32.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:39:32.646 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliH-go1cQd5_NZDX4m8X5vSB9CwLWJHlf9OtB1ZtxJdtZ_NGm49RvAeX4gzo9FwGJHB9XxF8B5KpbHRVZDQzsuOl2jLtVhKFWljUZx3NXj5pO9jT8sL4seJMgtvXlmVDcP9qt7gG-UkLIL6FijTWCYR6gjnURXTkfrjJydhU81UxVvisd02I6RN4XKqiGVea8waMDyEDDZ-_fQ2DbhOY-MxaKf_UKFpV4OhNcIdV134jsJ3yvukCus4VUnsfEe8tBPv5Rs8at182dA-NMNHRDCDUIbKB1AmsQq34D40ecmdebQAyG-BmHMs2jpCVs9jGXFC-miPozpwfxCPB_ajWz43wMZRLnsDyVNVO0zY2Y163A","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:39:32.652 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:39:32.653 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:39:32.816 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:39:32.823 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:39:32.825 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:39:32.832 -05:00 [DBG] Start token request.
2021-03-31 11:39:32.835 -05:00 [DBG] Start client validation
2021-03-31 11:39:32.840 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:39:32.843 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:39:32.846 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:39:32.847 -05:00 [DBG] Secret id found: mvc
2021-03-31 11:39:32.864 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:32.864 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:32.878 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-31 11:39:32.878 -05:00 [DBG] Client validation success
2021-03-31 11:39:32.882 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U7:00000003","TimeStamp":"2021-03-31T16:39:32.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:39:32.889 -05:00 [DBG] Start token request validation
2021-03-31 11:39:32.895 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:39:32.911 -05:00 [DBG] CXz7Zzcw2oJlxsK8JJpHft4zyXi/7knIFeq6nxHNzJg= found in database: true
2021-03-31 11:39:32.941 -05:00 [DBG] removing CXz7Zzcw2oJlxsK8JJpHft4zyXi/7knIFeq6nxHNzJg= persisted grant from database
2021-03-31 11:39:32.957 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:39:32.961 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:39:32.967 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"1qEqrF88C_Dh8MzjyG4SdVBV2Pfdz7kuwZ-F0g4tXgA","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"1qEqrF88C_Dh8MzjyG4SdVBV2Pfdz7kuwZ-F0g4tXgA","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"x5Yoi2mhjNVEIBjHxQEgZoO3mfwtnxU-hCl3Ga5Dp_k"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:39:32.994 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:32.995 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:33.001 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:33.004 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:33.016 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-31 11:39:33.017 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 11:39:33.123 -05:00 [DBG] Creating refresh token
2021-03-31 11:39:33.123 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-31 11:39:33.139 -05:00 [DBG] sXdm2yAxuWhPideBQsVa9MPvPyYy1dmkSI/E07dV++c= not found in database
2021-03-31 11:39:33.159 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:33.160 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:33.163 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:33.167 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:33.176 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-31 11:39:33.177 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:39:33.181 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****646Q","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****ltBs","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Cakw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U7:00000003","TimeStamp":"2021-03-31T16:39:33.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:39:33.187 -05:00 [DBG] Token request success.
2021-03-31 11:39:42.027 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 11:39:42.032 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 11:39:42.033 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 11:39:42.037 -05:00 [DBG] Processing signout request for 1
2021-03-31 11:39:42.041 -05:00 [DBG] Start end session request validation
2021-03-31 11:39:42.045 -05:00 [DBG] Start identity token validation
2021-03-31 11:39:42.087 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:42.088 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:42.092 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-31 11:39:42.146 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 11:39:42.149 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617208773,"exp":1617209073,"iss":"https://localhost:5000","aud":"mvc","nonce":"637528055688578271.OGQ0YTAyMjgtYTZmZi00MTQyLTljMWUtYjJjYmJmZjlhZDc4ZTZlZDZmYTAtMjA4ZC00MDIyLTg4ODgtNjRiNDI4ZmFlZTRk","iat":1617208773,"at_hash":"RQNk94QbqX5H1OG2EQmMAw","s_hash":"H90R27FVIjYy9o2SzMrtWQ","sid":"rL7XMskixHTZomuimSTElg","sub":"1","auth_time":1617208719,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 11:39:42.159 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"1","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plirv62fnj06gQP0wANdTC0SbSsIi421X3TnOZ5fMt6zGXYTYace3ImsAtfU3kickyTT6kgQ5j4O86QH-xQ47Zujn8L5BiT4tJO1izh-ZbGgwi8Fjv9m_uQ7ScQjM4-4NsJ1Oz52rmINp8kljB_ZbXFz","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plirv62fnj06gQP0wANdTC0SbSsIi421X3TnOZ5fMt6zGXYTYace3ImsAtfU3kickyTT6kgQ5j4O86QH-xQ47Zujn8L5BiT4tJO1izh-ZbGgwi8Fjv9m_uQ7ScQjM4-4NsJ1Oz52rmINp8kljB_ZbXFz","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 11:39:42.165 -05:00 [DBG] Success validating end session request from mvc
2021-03-31 11:39:42.251 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-31 11:39:42.253 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-31 11:39:42.255 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-31 11:39:42.257 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7KBL9PV7U6:00000039","TimeStamp":"2021-03-31T16:39:42.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-31 11:39:42.334 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-31 11:39:42.342 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-31 11:39:42.343 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-31 11:39:42.350 -05:00 [DBG] Processing signout callback request
2021-03-31 11:39:42.411 -05:00 [DBG] js found in database: true
2021-03-31 11:39:42.412 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:39:42.431 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:42.432 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:42.433 -05:00 [DBG] No client front-channel logout URLs
2021-03-31 11:39:42.435 -05:00 [DBG] No client back-channel logout URLs
2021-03-31 11:39:42.438 -05:00 [INF] Successful signout callback.
2021-03-31 11:39:42.439 -05:00 [DBG] No client front-channel iframe urls
2021-03-31 11:39:42.440 -05:00 [DBG] No client back-channel iframe urls
2021-03-31 11:39:43.841 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:39:43.843 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:39:43.844 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:39:43.845 -05:00 [DBG] Start authorize request
2021-03-31 11:39:43.846 -05:00 [DBG] No user present in authorize request
2021-03-31 11:39:43.846 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:43.866 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:43.867 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:43.868 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:43.871 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:43.875 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:43.879 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:43.883 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:43.885 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:43.886 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","UiLocales":null,"Nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"1nso6F8Xkzs8fl1sGyY1THkp89DInSB2DbTD2cikelM","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:39:43.896 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 11:39:43.952 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:39:43.971 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:43.972 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:39:43.973 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:39:43.977 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:43.981 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:43.986 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:39:43.989 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:39:43.991 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:39:44.010 -05:00 [DBG] mvc found in database: true
2021-03-31 11:39:44.011 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:38.607 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:42:38.649 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:38.694 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:38.695 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:38.697 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:38.705 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:38.731 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:38.735 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:38.739 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:38.741 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:38.769 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:42:38.769 -05:00 [DBG] Adding idp claim with value: local
2021-03-31 11:42:38.770 -05:00 [DBG] Adding auth_time claim with value: 1617208958
2021-03-31 11:42:38.774 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:42:38.777 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000000F","TimeStamp":"2021-03-31T16:42:38.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-31 11:42:38.803 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:38.803 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:38.817 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:42:38.818 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:42:38.819 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:42:38.820 -05:00 [DBG] Start authorize callback request
2021-03-31 11:42:38.821 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:42:38.821 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:38.872 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:38.873 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:38.874 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:38.877 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:38.880 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:38.883 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:38.887 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:38.889 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:38.891 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","UiLocales":null,"Nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"HR2kS-kEk37VF1nEI3X3Qg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"1nso6F8Xkzs8fl1sGyY1THkp89DInSB2DbTD2cikelM","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:42:38.906 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:42:38.907 -05:00 [INF] Showing consent: User has not yet consented
2021-03-31 11:42:38.974 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:38.991 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:38.992 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:38.993 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:38.996 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:39.000 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:39.004 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:39.007 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:39.008 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:39.023 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:39.024 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:39.030 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:39.052 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:45.630 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:42:45.665 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:45.689 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:45.689 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:45.691 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:45.694 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:45.698 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:45.702 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:45.705 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:45.706 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:45.707 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000015","TimeStamp":"2021-03-31T16:42:45.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-31 11:42:45.728 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:45.729 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:45.743 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:42:45.744 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:42:45.746 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:42:45.749 -05:00 [DBG] Start authorize callback request
2021-03-31 11:42:45.750 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:42:45.751 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:45.768 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:45.768 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:45.770 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:45.773 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:45.777 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:45.782 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:45.785 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:45.787 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:45.788 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","UiLocales":null,"Nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"HR2kS-kEk37VF1nEI3X3Qg","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"1nso6F8Xkzs8fl1sGyY1THkp89DInSB2DbTD2cikelM","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:42:45.804 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:42:45.805 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:42:45.806 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:42:45.807 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-31 11:42:45.811 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database
2021-03-31 11:42:45.817 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:42:45.820 -05:00 [DBG] 8uStbSGB2zHFgaTXox+zS+K79RB9erpcZLW51emh+OA= not found in database
2021-03-31 11:42:45.827 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****zCv0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000017","TimeStamp":"2021-03-31T16:42:45.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:42:45.833 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plg0FXz6gqSBaVphlWT34bxNW9gzvJuE7abV7aCTDOdV7bIn6_S0qIy9Yo1hY5T1bDLew_NXsB7FmD-OfQXTk1RT3hSAM3Cuz7zfM06IsxsYn-mDha1vLrNoSS2-bRG88BCpYOrMd3rNSt6vedTTHd3HogWQ7fX9pZZu4zU0xjKUlfqCIVMUFQOL9TCO9bqCSCFWv0PaJFlhpJANOJor4NCPhrYnJ5OExBOlIzr3ztOyFL3KY7-M1NZ-D8-QrObCPIr-78f93hhJVqh0ge4Modpqe4JGO6w2ocshNetwaR3XTpXQh-sUcUUTMkO3DEvOXddhmzfYv3KDd4ecgCfZLdmLZSO0R2_knWYvujxV3wGZvg","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:42:45.835 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:42:45.836 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:42:45.978 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:42:45.980 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:42:45.981 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:42:45.983 -05:00 [DBG] Start token request.
2021-03-31 11:42:45.983 -05:00 [DBG] Start client validation
2021-03-31 11:42:45.985 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:42:45.985 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:42:45.987 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:42:45.988 -05:00 [DBG] Secret id found: mvc
2021-03-31 11:42:46.005 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:46.006 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:46.007 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-31 11:42:46.008 -05:00 [DBG] Client validation success
2021-03-31 11:42:46.009 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U9:00000001","TimeStamp":"2021-03-31T16:42:46.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:42:46.012 -05:00 [DBG] Start token request validation
2021-03-31 11:42:46.013 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:42:46.017 -05:00 [DBG] 8uStbSGB2zHFgaTXox+zS+K79RB9erpcZLW51emh+OA= found in database: true
2021-03-31 11:42:46.021 -05:00 [DBG] removing 8uStbSGB2zHFgaTXox+zS+K79RB9erpcZLW51emh+OA= persisted grant from database
2021-03-31 11:42:46.026 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:42:46.029 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:42:46.030 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"AIG6tmlbIvQb_PfhL0ohSlG4qmrz6Y28c0WM-q4zCv0","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"AIG6tmlbIvQb_PfhL0ohSlG4qmrz6Y28c0WM-q4zCv0","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"UY-7ixiZPZ2wpfjNXB5gu6_bqKgw-fFTaP0HIvAJRY0"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:42:46.048 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:46.049 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:46.053 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:46.056 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:46.057 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-31 11:42:46.058 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 11:42:46.066 -05:00 [DBG] Creating refresh token
2021-03-31 11:42:46.066 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-31 11:42:46.069 -05:00 [DBG] Qm5+GjnP07oLGK3we+4lNKR8fXDmtrQh1EDu1dIl8i8= not found in database
2021-03-31 11:42:46.090 -05:00 [DBG] mvc found in database: true
2021-03-31 11:42:46.090 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:42:46.094 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:46.097 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:46.098 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-31 11:42:46.099 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:42:46.102 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****bkhA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****lBcA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Zuuw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U9:00000001","TimeStamp":"2021-03-31T16:42:46.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:42:46.107 -05:00 [DBG] Token request success.
2021-03-31 11:42:48.002 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:42:48.006 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:42:48.007 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:42:48.008 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:42:48.009 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:42:48.012 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:42:48.015 -05:00 [DBG] Start discovery request
2021-03-31 11:42:48.027 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:42:48.074 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:42:48.075 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:42:48.077 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:42:48.078 -05:00 [DBG] Start authorize request
2021-03-31 11:42:48.079 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:42:48.081 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:42:48.097 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.098 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.099 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:42:48.102 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.104 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:48.109 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.114 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:48.115 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:42:48.116 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"c401c3d606d849acbc3f6a51a4b0524d","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"HR2kS-kEk37VF1nEI3X3Qg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"c401c3d606d849acbc3f6a51a4b0524d","code_challenge":"dUQGUpEq9QqfOp9Zycx1tS7ye0FAN547zrmVEZ__p5w","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:42:48.130 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 11:42:48.131 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:42:48.135 -05:00 [DBG] l0xQUjTC+H4iDH4dCZQLklMo4WyVIQIvaPV+DWPVC7g= not found in database
2021-03-31 11:42:48.141 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****6kJs","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000001B","TimeStamp":"2021-03-31T16:42:48.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:42:48.148 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"c401c3d606d849acbc3f6a51a4b0524d","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:42:48.153 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:42:48.154 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:42:48.525 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:42:48.549 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:42:48.551 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:42:48.554 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:42:48.555 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:42:48.556 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:42:48.558 -05:00 [DBG] Start discovery request
2021-03-31 11:42:48.566 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:42:48.589 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 11:42:48.594 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:42:48.595 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:42:48.596 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:42:48.608 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:42:48.610 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:42:48.611 -05:00 [DBG] Start token request.
2021-03-31 11:42:48.611 -05:00 [DBG] Start client validation
2021-03-31 11:42:48.612 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:42:48.613 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:42:48.614 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:42:48.615 -05:00 [DBG] Secret id found: js
2021-03-31 11:42:48.632 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.633 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.636 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 11:42:48.637 -05:00 [DBG] Client validation success
2021-03-31 11:42:48.637 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000001F","TimeStamp":"2021-03-31T16:42:48.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:42:48.640 -05:00 [DBG] Start token request validation
2021-03-31 11:42:48.640 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:42:48.643 -05:00 [DBG] l0xQUjTC+H4iDH4dCZQLklMo4WyVIQIvaPV+DWPVC7g= found in database: true
2021-03-31 11:42:48.648 -05:00 [DBG] removing l0xQUjTC+H4iDH4dCZQLklMo4WyVIQIvaPV+DWPVC7g= persisted grant from database
2021-03-31 11:42:48.652 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:42:48.655 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:42:48.656 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"C1mV-rIn-WefD_S7uI15lkOKTyPGtzcKdT-m8am6kJs","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"C1mV-rIn-WefD_S7uI15lkOKTyPGtzcKdT-m8am6kJs","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"1dcb3280356e481eba86abda2e3208759c6b99e1219843b2807c84b21087b14fb9a94db0023243679507b504c5c0936c","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:42:48.676 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.677 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.680 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.684 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:48.686 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 11:42:48.687 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 11:42:48.711 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.711 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.718 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.725 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:42:48.726 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-31 11:42:48.727 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:42:48.730 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****McqQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7ejQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000001F","TimeStamp":"2021-03-31T16:42:48.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:42:48.736 -05:00 [DBG] Token request success.
2021-03-31 11:42:48.751 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:42:48.755 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:42:48.755 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:42:48.765 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:42:48.770 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:42:48.771 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:42:48.772 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 11:42:48.775 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 11:42:48.776 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 11:42:48.784 -05:00 [DBG] Start userinfo request
2021-03-31 11:42:48.788 -05:00 [DBG] Bearer token found in header
2021-03-31 11:42:48.815 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.816 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.834 -05:00 [DBG] js found in database: true
2021-03-31 11:42:48.834 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:42:48.840 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 11:42:48.841 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617208968,"exp":1617212568,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617208958,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 11:42:48.852 -05:00 [DBG] Creating userinfo response
2021-03-31 11:42:48.856 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:42:48.858 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:42:48.862 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.870 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 11:42:48.871 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:42:48.874 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:42:48.881 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 11:42:48.883 -05:00 [DBG] End userinfo request
2021-03-31 11:42:48.921 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:42:48.922 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:42:48.924 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:42:48.927 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:08.131 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:08.142 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:08.144 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:08.150 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:08.156 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:08.168 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:08.172 -05:00 [DBG] Start discovery request
2021-03-31 11:44:08.191 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:08.221 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:08.224 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:08.225 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:08.227 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:10.270 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 11:44:10.273 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 11:44:10.275 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 11:44:10.280 -05:00 [DBG] Processing signout request for 1
2021-03-31 11:44:10.281 -05:00 [DBG] Start end session request validation
2021-03-31 11:44:10.283 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"1","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 11:44:10.287 -05:00 [DBG] Success validating end session request from null
2021-03-31 11:44:14.089 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:14.094 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:14.096 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:14.097 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:14.099 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:14.103 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:14.106 -05:00 [DBG] Start discovery request
2021-03-31 11:44:14.112 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:14.315 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:14.317 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:14.319 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:14.321 -05:00 [DBG] Start authorize request
2021-03-31 11:44:14.323 -05:00 [DBG] User in authorize request: 1
2021-03-31 11:44:14.324 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:14.363 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.364 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.367 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:14.374 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.395 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:14.400 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.405 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:14.406 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:14.410 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"2dbac89abaec4db9b073f1731b257bde","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"HR2kS-kEk37VF1nEI3X3Qg","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"2dbac89abaec4db9b073f1731b257bde","code_challenge":"gatlBrg4iHowLLEljenYU64oUfvrTTFrLlow8Tpe0eI","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:14.430 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 11:44:14.430 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:44:14.434 -05:00 [DBG] mMXIODPtr5qncGpYjlBJ5msASSbYJTxm6WRrr9sVJwo= not found in database
2021-03-31 11:44:14.441 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****1BCk","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000031","TimeStamp":"2021-03-31T16:44:14.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:14.449 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"2dbac89abaec4db9b073f1731b257bde","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:44:14.673 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:14.679 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:14.680 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:14.682 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:14.685 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:14.689 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:14.691 -05:00 [DBG] Start discovery request
2021-03-31 11:44:14.697 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:14.707 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 11:44:14.712 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:14.715 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:14.717 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:44:14.720 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:44:14.722 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:44:14.723 -05:00 [DBG] Start token request.
2021-03-31 11:44:14.724 -05:00 [DBG] Start client validation
2021-03-31 11:44:14.725 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:44:14.726 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:44:14.727 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:44:14.730 -05:00 [DBG] Secret id found: js
2021-03-31 11:44:14.744 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.745 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.748 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 11:44:14.749 -05:00 [DBG] Client validation success
2021-03-31 11:44:14.751 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000035","TimeStamp":"2021-03-31T16:44:14.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:44:14.755 -05:00 [DBG] Start token request validation
2021-03-31 11:44:14.756 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:44:14.759 -05:00 [DBG] mMXIODPtr5qncGpYjlBJ5msASSbYJTxm6WRrr9sVJwo= found in database: true
2021-03-31 11:44:14.763 -05:00 [DBG] removing mMXIODPtr5qncGpYjlBJ5msASSbYJTxm6WRrr9sVJwo= persisted grant from database
2021-03-31 11:44:14.771 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:44:14.773 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:44:14.774 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"TPDgsqWIEw2nL6I7EqwQQ_8QcFz_NdSFHgeAu9a1BCk","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"TPDgsqWIEw2nL6I7EqwQQ_8QcFz_NdSFHgeAu9a1BCk","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"52d27da9f4e045bdb774a16b5d091af72d0d535e8eeb453fbaaaeab80e759aabdc9825db6ec34f279dd5cc341e48a02e","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:44:14.813 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.814 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.820 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.824 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:14.826 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 11:44:14.827 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 11:44:14.852 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.853 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.857 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.860 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:14.862 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-31 11:44:14.866 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:44:14.870 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****wUUg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****TrFw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000035","TimeStamp":"2021-03-31T16:44:14.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:14.878 -05:00 [DBG] Token request success.
2021-03-31 11:44:14.897 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:44:14.902 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:14.903 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:14.908 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:44:14.912 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:14.914 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:14.915 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 11:44:14.918 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 11:44:14.921 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 11:44:14.923 -05:00 [DBG] Start userinfo request
2021-03-31 11:44:14.924 -05:00 [DBG] Bearer token found in header
2021-03-31 11:44:14.941 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.942 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.959 -05:00 [DBG] js found in database: true
2021-03-31 11:44:14.960 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:14.965 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 11:44:14.967 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617209054,"exp":1617212654,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617208958,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 11:44:14.972 -05:00 [DBG] Creating userinfo response
2021-03-31 11:44:14.975 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:14.976 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:14.979 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.981 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 11:44:14.982 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:14.986 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:14.993 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 11:44:14.997 -05:00 [DBG] End userinfo request
2021-03-31 11:44:15.027 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:15.030 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:15.032 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:15.034 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:19.898 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:19.903 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:19.908 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:19.909 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:19.913 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:19.918 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:19.922 -05:00 [DBG] Start discovery request
2021-03-31 11:44:19.928 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:19.969 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:19.973 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:19.975 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:19.977 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:25.954 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 11:44:25.961 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 11:44:25.963 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 11:44:25.968 -05:00 [DBG] Processing signout request for 1
2021-03-31 11:44:25.969 -05:00 [DBG] Start end session request validation
2021-03-31 11:44:25.970 -05:00 [DBG] Start identity token validation
2021-03-31 11:44:25.989 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:25.990 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:25.992 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-31 11:44:25.997 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 11:44:25.999 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617208966,"exp":1617209266,"iss":"https://localhost:5000","aud":"mvc","nonce":"637528055838262692.MzA3MDU4MjktNjlhMi00Y2M5LTkxZjUtNDhmMjM4NmYyNzQwZTI1ZThjNDgtYzdkZi00OTI4LTljZGYtNjRlZWE5Mzc0ODc4","iat":1617208966,"at_hash":"wsZ4DJYu-vITN2Uheib8cg","s_hash":"RUzFdDQssnDgrjtDgmitSA","sid":"HR2kS-kEk37VF1nEI3X3Qg","sub":"1","auth_time":1617208958,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 11:44:26.007 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"1","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliS5EukmefV7U9rWxxuIsZ4tZWjiJ0OA1uCcCQvRx-BNzIX14AJBytDehBjqPDSC8gRq7uMTppKu_zXzkspFwx5ATKvMHi1pfME7VMCHJceN3tc1kzhAP0iGczWmOktNiXcHFzavgFhgGjDT0gwo7zo","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliS5EukmefV7U9rWxxuIsZ4tZWjiJ0OA1uCcCQvRx-BNzIX14AJBytDehBjqPDSC8gRq7uMTppKu_zXzkspFwx5ATKvMHi1pfME7VMCHJceN3tc1kzhAP0iGczWmOktNiXcHFzavgFhgGjDT0gwo7zo","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 11:44:26.016 -05:00 [DBG] Success validating end session request from mvc
2021-03-31 11:44:26.053 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-31 11:44:26.055 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-31 11:44:26.060 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-31 11:44:26.063 -05:00 [INF] {"SubjectId":"1","DisplayName":"Alice Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000043","TimeStamp":"2021-03-31T16:44:26.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-31 11:44:26.120 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-31 11:44:26.125 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-31 11:44:26.127 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-31 11:44:26.130 -05:00 [DBG] Processing signout callback request
2021-03-31 11:44:26.146 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:26.147 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:26.167 -05:00 [DBG] js found in database: true
2021-03-31 11:44:26.169 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:26.171 -05:00 [DBG] No client front-channel logout URLs
2021-03-31 11:44:26.173 -05:00 [DBG] No client back-channel logout URLs
2021-03-31 11:44:26.175 -05:00 [INF] Successful signout callback.
2021-03-31 11:44:26.175 -05:00 [DBG] No client front-channel iframe urls
2021-03-31 11:44:26.176 -05:00 [DBG] No client back-channel iframe urls
2021-03-31 11:44:27.766 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:27.769 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:27.771 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:27.774 -05:00 [DBG] Start authorize request
2021-03-31 11:44:27.776 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:27.779 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:27.799 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:27.800 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:27.803 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:27.807 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:27.813 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:27.818 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:27.822 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:27.824 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:27.826 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","UiLocales":null,"Nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"c5a1vxDVZRKZaMfOIxM2o6vCdforHLUjtUVcdiSoiWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:27.841 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 11:44:27.899 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:27.939 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:27.939 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:27.942 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:27.945 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:27.948 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:27.954 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:27.957 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:27.959 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:27.976 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:27.977 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:28.036 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:28.043 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:28.046 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:28.049 -05:00 [DBG] Start authorize request
2021-03-31 11:44:28.051 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:28.052 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:28.070 -05:00 [DBG] js found in database: true
2021-03-31 11:44:28.071 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:28.074 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:28.083 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:28.125 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:28.130 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:28.134 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:28.136 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:28.139 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ff9c44e7c6c04e0cae6a68f8003e2eec","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ff9c44e7c6c04e0cae6a68f8003e2eec","code_challenge":"wQu12PqgM9AYA_Y6_868lCnPq8Hg3tm2NRdgniiSTBc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:28.152 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:28.154 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"ff9c44e7c6c04e0cae6a68f8003e2eec","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"ff9c44e7c6c04e0cae6a68f8003e2eec","code_challenge":"wQu12PqgM9AYA_Y6_868lCnPq8Hg3tm2NRdgniiSTBc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:28.167 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000004B","TimeStamp":"2021-03-31T16:44:28.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:28.348 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:28.353 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:28.354 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:28.356 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:28.358 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:28.364 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:28.367 -05:00 [DBG] Start discovery request
2021-03-31 11:44:28.376 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:28.401 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:28.404 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:28.406 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:28.408 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:28.656 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:28.659 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:28.660 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:28.662 -05:00 [DBG] Start authorize request
2021-03-31 11:44:28.664 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:28.664 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:28.681 -05:00 [DBG] js found in database: true
2021-03-31 11:44:28.682 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:28.685 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:28.688 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:28.692 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:28.698 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:28.703 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:28.705 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:28.707 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"e482f6129ae14efa874225b0c7926244","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"e482f6129ae14efa874225b0c7926244","code_challenge":"MuBMPLCDMXXCdgHedsU43P5WJAxrzFNR-2MsKhTTPuM","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:28.726 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:28.729 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"e482f6129ae14efa874225b0c7926244","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"e482f6129ae14efa874225b0c7926244","code_challenge":"MuBMPLCDMXXCdgHedsU43P5WJAxrzFNR-2MsKhTTPuM","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:28.748 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000051","TimeStamp":"2021-03-31T16:44:28.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:28.909 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:28.914 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:28.919 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:28.922 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:28.925 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:28.927 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:28.933 -05:00 [DBG] Start discovery request
2021-03-31 11:44:28.945 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:28.986 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:28.991 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:28.992 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:28.997 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:29.207 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:29.210 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:29.213 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:29.215 -05:00 [DBG] Start authorize request
2021-03-31 11:44:29.216 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:29.220 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:29.239 -05:00 [DBG] js found in database: true
2021-03-31 11:44:29.239 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:29.242 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:29.247 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:29.250 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:29.254 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:29.258 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:29.260 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:29.264 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"437dbab468a643e5a329eb6175ca7dbd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"437dbab468a643e5a329eb6175ca7dbd","code_challenge":"3HjUrUYSTTgxKVOXsCMJTRpALNMhxK8qHmxrgY-Xh1E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:29.275 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:29.277 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"437dbab468a643e5a329eb6175ca7dbd","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"437dbab468a643e5a329eb6175ca7dbd","code_challenge":"3HjUrUYSTTgxKVOXsCMJTRpALNMhxK8qHmxrgY-Xh1E","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:29.296 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000057","TimeStamp":"2021-03-31T16:44:29.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:29.503 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:29.510 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:29.512 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:29.514 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:29.518 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:29.520 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:29.530 -05:00 [DBG] Start discovery request
2021-03-31 11:44:29.567 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:29.682 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:29.687 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:29.689 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:29.691 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:29.865 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:29.869 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:29.871 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:29.873 -05:00 [DBG] Start authorize request
2021-03-31 11:44:29.874 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:29.875 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:29.904 -05:00 [DBG] js found in database: true
2021-03-31 11:44:29.904 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:29.907 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:29.910 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:29.914 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:29.920 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:29.923 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:29.926 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:29.928 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"39ba610facc44c2c9084122122f7a921","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"39ba610facc44c2c9084122122f7a921","code_challenge":"KFnbBYCi1l_ICV-Z4vUkfr8VtwkKwRuOaruqQG03h_w","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:29.938 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:29.940 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"39ba610facc44c2c9084122122f7a921","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"39ba610facc44c2c9084122122f7a921","code_challenge":"KFnbBYCi1l_ICV-Z4vUkfr8VtwkKwRuOaruqQG03h_w","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:29.950 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000005D","TimeStamp":"2021-03-31T16:44:29.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:30.244 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:30.255 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:30.256 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:30.258 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:30.260 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:30.262 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:30.269 -05:00 [DBG] Start discovery request
2021-03-31 11:44:30.277 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:30.346 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:30.350 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:30.354 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:30.357 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:30.640 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:30.643 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:30.646 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:30.648 -05:00 [DBG] Start authorize request
2021-03-31 11:44:30.649 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:30.650 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:30.709 -05:00 [DBG] js found in database: true
2021-03-31 11:44:30.710 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:30.712 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:30.717 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:30.721 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:30.725 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:30.729 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:30.732 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:30.734 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"cb1718699cb843fea7a671e0b63b468b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"cb1718699cb843fea7a671e0b63b468b","code_challenge":"ePf4v0nivQJwdSxrpgT52nM2uthjoxYUF9OCELMd2Rc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:30.746 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:30.749 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"cb1718699cb843fea7a671e0b63b468b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"cb1718699cb843fea7a671e0b63b468b","code_challenge":"ePf4v0nivQJwdSxrpgT52nM2uthjoxYUF9OCELMd2Rc","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:30.758 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000063","TimeStamp":"2021-03-31T16:44:30.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:31.037 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:31.051 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:31.053 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:31.055 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:31.058 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:31.063 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:31.065 -05:00 [DBG] Start discovery request
2021-03-31 11:44:31.075 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:31.197 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:31.199 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:31.201 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:31.203 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:31.380 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:31.383 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:31.385 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:31.388 -05:00 [DBG] Start authorize request
2021-03-31 11:44:31.389 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:31.389 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:31.406 -05:00 [DBG] js found in database: true
2021-03-31 11:44:31.406 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:31.410 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:31.413 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:31.417 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:31.422 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:31.425 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:31.426 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:31.428 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"2e211c63366346d4bebac418a0d65e57","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"2e211c63366346d4bebac418a0d65e57","code_challenge":"QZjU96jLW0aGy7fBpAjjg7H2GPpVyrFGJDeXzpLN7CE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:31.440 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:31.442 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"2e211c63366346d4bebac418a0d65e57","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"2e211c63366346d4bebac418a0d65e57","code_challenge":"QZjU96jLW0aGy7fBpAjjg7H2GPpVyrFGJDeXzpLN7CE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:31.454 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000069","TimeStamp":"2021-03-31T16:44:31.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:31.673 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:31.677 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:31.678 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:31.680 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:31.682 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:31.687 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:31.691 -05:00 [DBG] Start discovery request
2021-03-31 11:44:31.710 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:31.737 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:31.740 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:31.742 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:31.746 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:31.806 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:31.809 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:31.812 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:31.814 -05:00 [DBG] Start authorize request
2021-03-31 11:44:31.815 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:31.816 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:31.834 -05:00 [DBG] js found in database: true
2021-03-31 11:44:31.834 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:31.836 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:31.839 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:31.843 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:31.847 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:31.851 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:31.852 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:31.854 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"5000952e928643f5846d640248d56630","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"5000952e928643f5846d640248d56630","code_challenge":"P7IrhJ_c0XJBPi9cp7guzZZILeAtV7_-U97Ed_TL9jI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:31.865 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:31.867 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"5000952e928643f5846d640248d56630","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"5000952e928643f5846d640248d56630","code_challenge":"P7IrhJ_c0XJBPi9cp7guzZZILeAtV7_-U97Ed_TL9jI","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:31.877 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000006F","TimeStamp":"2021-03-31T16:44:31.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:32.084 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:32.088 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:32.089 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:32.091 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:32.097 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:32.098 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:32.100 -05:00 [DBG] Start discovery request
2021-03-31 11:44:32.105 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:32.125 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:32.129 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:32.133 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:32.136 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:32.217 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:32.224 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:32.225 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:32.228 -05:00 [DBG] Start authorize request
2021-03-31 11:44:32.232 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:32.233 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:32.252 -05:00 [DBG] js found in database: true
2021-03-31 11:44:32.253 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:32.256 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:32.259 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:32.263 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:32.269 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:32.274 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:32.277 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:32.279 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f196fd994bbb473897533ed1b66a9683","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f196fd994bbb473897533ed1b66a9683","code_challenge":"VL9EhAooiYqWsfu6lMv0suVK5Y5y1uvxu2imRdAg3Hk","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:32.290 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:32.293 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"f196fd994bbb473897533ed1b66a9683","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"f196fd994bbb473897533ed1b66a9683","code_challenge":"VL9EhAooiYqWsfu6lMv0suVK5Y5y1uvxu2imRdAg3Hk","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:32.308 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000075","TimeStamp":"2021-03-31T16:44:32.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:32.550 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:32.565 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:32.567 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:32.568 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:32.570 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:32.574 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:32.577 -05:00 [DBG] Start discovery request
2021-03-31 11:44:32.585 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:32.610 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:32.613 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:32.616 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:32.618 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:32.666 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:32.670 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:32.671 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:32.673 -05:00 [DBG] Start authorize request
2021-03-31 11:44:32.674 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:32.675 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:32.693 -05:00 [DBG] js found in database: true
2021-03-31 11:44:32.694 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:32.697 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:32.700 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:32.704 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:32.708 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:32.711 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:32.713 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:32.718 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"51765526668946e4bdcc0ae03c37a747","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"51765526668946e4bdcc0ae03c37a747","code_challenge":"X5XoZa6JGrtOS4ZFxm4vyHVJRWS9tSzH681aN8tHDI8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:32.730 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:32.731 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"51765526668946e4bdcc0ae03c37a747","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"51765526668946e4bdcc0ae03c37a747","code_challenge":"X5XoZa6JGrtOS4ZFxm4vyHVJRWS9tSzH681aN8tHDI8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:32.743 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000007B","TimeStamp":"2021-03-31T16:44:32.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:32.950 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:32.954 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:32.956 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:32.957 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:32.959 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:32.964 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:32.966 -05:00 [DBG] Start discovery request
2021-03-31 11:44:32.970 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:33.906 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:33.911 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:33.913 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:33.915 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:33.920 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:33.922 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:33.925 -05:00 [DBG] Start discovery request
2021-03-31 11:44:33.934 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:33.971 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:33.974 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:33.976 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:33.980 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:34.038 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:34.042 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:34.043 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:34.046 -05:00 [DBG] Start authorize request
2021-03-31 11:44:34.047 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:34.048 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:34.069 -05:00 [DBG] js found in database: true
2021-03-31 11:44:34.069 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:34.072 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:34.076 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.079 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.084 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.087 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.088 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:34.092 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0e250b3fcd45451ab720e75b9702c6d8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0e250b3fcd45451ab720e75b9702c6d8","code_challenge":"9eN8rdiyXWDwPU7A9_SesY8PAm1cFm2bn4STRwIDq9I","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.104 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:34.107 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"0e250b3fcd45451ab720e75b9702c6d8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"0e250b3fcd45451ab720e75b9702c6d8","code_challenge":"9eN8rdiyXWDwPU7A9_SesY8PAm1cFm2bn4STRwIDq9I","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.121 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000083","TimeStamp":"2021-03-31T16:44:34.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:34.308 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:34.317 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:34.319 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:34.320 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:34.326 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:34.328 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:34.332 -05:00 [DBG] Start discovery request
2021-03-31 11:44:34.342 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:34.368 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:34.371 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:34.375 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:34.378 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:34.421 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:34.424 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:34.426 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:34.428 -05:00 [DBG] Start authorize request
2021-03-31 11:44:34.430 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:34.432 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:34.450 -05:00 [DBG] js found in database: true
2021-03-31 11:44:34.450 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:34.454 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:34.458 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.462 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.467 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.470 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.472 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:34.475 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"38d9c4d290154ff9b98b0cfa000944be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"38d9c4d290154ff9b98b0cfa000944be","code_challenge":"eUElGQoKujQNz9PGNn61eYLJT6GQrPB56uWuwkZYYWE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.485 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:34.487 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"38d9c4d290154ff9b98b0cfa000944be","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"38d9c4d290154ff9b98b0cfa000944be","code_challenge":"eUElGQoKujQNz9PGNn61eYLJT6GQrPB56uWuwkZYYWE","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.500 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000089","TimeStamp":"2021-03-31T16:44:34.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:34.706 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:34.710 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:34.713 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:34.715 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:34.718 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:34.720 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:34.721 -05:00 [DBG] Start discovery request
2021-03-31 11:44:34.726 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:34.751 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:34.753 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:34.756 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:34.757 -05:00 [DBG] Rendering check session result
2021-03-31 11:44:34.810 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:34.813 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:34.815 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:34.817 -05:00 [DBG] Start authorize request
2021-03-31 11:44:34.818 -05:00 [DBG] No user present in authorize request
2021-03-31 11:44:34.818 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:34.837 -05:00 [DBG] js found in database: true
2021-03-31 11:44:34.837 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:34.840 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:34.844 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.848 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.851 -05:00 [DBG] Found ["openid"] identity scopes in database
2021-03-31 11:44:34.855 -05:00 [DBG] Found [] API scopes in database
2021-03-31 11:44:34.857 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:34.860 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"964c55319e9d4ad4abd28929c7760a7a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"964c55319e9d4ad4abd28929c7760a7a","code_challenge":"9gci-iKvxELjiCr5jWUCqR7B6zNQZmhBZ7LY8qJMRa8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.872 -05:00 [INF] Showing error: prompt=none was requested but user is not authenticated
2021-03-31 11:44:34.874 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid","State":"964c55319e9d4ad4abd28929c7760a7a","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":"none","MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid","state":"964c55319e9d4ad4abd28929c7760a7a","code_challenge":"9gci-iKvxELjiCr5jWUCqR7B6zNQZmhBZ7LY8qJMRa8","code_challenge_method":"S256","prompt":"none","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:34.885 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid","GrantType":"authorization_code","Error":"login_required","ErrorDescription":null,"Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000008F","TimeStamp":"2021-03-31T16:44:34.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedFailureEvent"}
2021-03-31 11:44:34.987 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 11:44:34.989 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 11:44:34.991 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 11:44:34.992 -05:00 [DBG] Processing signout request for anonymous
2021-03-31 11:44:34.995 -05:00 [DBG] Start end session request validation
2021-03-31 11:44:34.997 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"unknown","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 11:44:35.002 -05:00 [DBG] Success validating end session request from null
2021-03-31 11:44:47.401 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:44:47.437 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:47.475 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:47.476 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:47.479 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:47.486 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.507 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.512 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.516 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.517 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:47.552 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:44:47.552 -05:00 [DBG] Adding idp claim with value: local
2021-03-31 11:44:47.554 -05:00 [DBG] Adding auth_time claim with value: 1617209087
2021-03-31 11:44:47.559 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:44:47.562 -05:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"2","DisplayName":"bob","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:00000095","TimeStamp":"2021-03-31T16:44:47.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-31 11:44:47.586 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:47.587 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:47.604 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:44:47.607 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:44:47.610 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:44:47.613 -05:00 [DBG] Start authorize callback request
2021-03-31 11:44:47.617 -05:00 [DBG] User in authorize request: 2
2021-03-31 11:44:47.620 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:47.645 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:47.646 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:47.650 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:47.654 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.658 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.662 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.668 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.670 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:47.672 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","UiLocales":null,"Nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Q4xMll4qxEIpAC8UlxAdnQ","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"c5a1vxDVZRKZaMfOIxM2o6vCdforHLUjtUVcdiSoiWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:47.702 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:44:47.703 -05:00 [INF] Showing consent: User has not yet consented
2021-03-31 11:44:47.752 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:47.821 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:47.822 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:47.825 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:47.828 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.832 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.836 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.839 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:47.841 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:47.861 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:47.861 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:47.869 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:47.891 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:48.990 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 11:44:49.030 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:49.051 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.052 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.055 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:49.059 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.064 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.068 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.072 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.074 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:49.077 -05:00 [INF] {"SubjectId":"2","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000009B","TimeStamp":"2021-03-31T16:44:49.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-31 11:44:49.105 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.106 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.120 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 11:44:49.122 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 11:44:49.123 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 11:44:49.126 -05:00 [DBG] Start authorize callback request
2021-03-31 11:44:49.129 -05:00 [DBG] User in authorize request: 2
2021-03-31 11:44:49.129 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:49.146 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.146 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.150 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:49.153 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.155 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.160 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.164 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.167 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:49.169 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","UiLocales":null,"Nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Q4xMll4qxEIpAC8UlxAdnQ","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"c5a1vxDVZRKZaMfOIxM2o6vCdforHLUjtUVcdiSoiWY","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:49.190 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 11:44:49.191 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:44:49.193 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 11:44:49.194 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 2
2021-03-31 11:44:49.200 -05:00 [DBG] QIM5q/EfBaHTA6V377/X6CDksjn7Imin78ZZLT1RY0E= not found in database
2021-03-31 11:44:49.205 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:44:49.208 -05:00 [DBG] rOCEt3qA5Uzt8488EKNklPvbBdF9Y3gUXIvO37Bp5VY= not found in database
2021-03-31 11:44:49.215 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"2","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****-HAg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:0000009D","TimeStamp":"2021-03-31T16:44:49.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:49.224 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"2","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PliGQzBNXYO8vv983hPIrJBdDnA1qT-sJl7NNejnvCIhCjLGU854Ls2OkhcJhGLB9mqQxbUQGlWlExN2TFRYC8YJ6zVaU4p6IkMtI125ssPNV122-2sQpWkH2J6wVEQHqOoW_shldsMzcpkZbp4x7gGm7Ye5MmEbrtldWc_pj-nRJk4PHkH1xObUJG9lx4hrEjr7YHPaddFpkra_9YQnyYwGNPxLY80mNzdNkv89FM6FgjkckVwpA4v8YRrlN_RTH3GIDvx-ix89F5I5sVQBnxGv6SLGbchYorsV8335Rn3bI3wc5ZJIjNqTynxmBAeCNTnSwWQKL3T3xbXNy6Z7qMbqMVS4IiLN4eYNs7Y0mzfHrA","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:44:49.230 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:44:49.234 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:44:49.329 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:44:49.332 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:44:49.334 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:44:49.336 -05:00 [DBG] Start token request.
2021-03-31 11:44:49.337 -05:00 [DBG] Start client validation
2021-03-31 11:44:49.339 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:44:49.342 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:44:49.343 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:44:49.344 -05:00 [DBG] Secret id found: mvc
2021-03-31 11:44:49.359 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.360 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.363 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-31 11:44:49.364 -05:00 [DBG] Client validation success
2021-03-31 11:44:49.366 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U9:00000002","TimeStamp":"2021-03-31T16:44:49.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:44:49.373 -05:00 [DBG] Start token request validation
2021-03-31 11:44:49.374 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:44:49.377 -05:00 [DBG] rOCEt3qA5Uzt8488EKNklPvbBdF9Y3gUXIvO37Bp5VY= found in database: true
2021-03-31 11:44:49.380 -05:00 [DBG] removing rOCEt3qA5Uzt8488EKNklPvbBdF9Y3gUXIvO37Bp5VY= persisted grant from database
2021-03-31 11:44:49.388 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:44:49.391 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:44:49.391 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"soww566a_dpEZQQvwPNLzYE-m6Ha2fBx3Z6ta34-HAg","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"soww566a_dpEZQQvwPNLzYE-m6Ha2fBx3Z6ta34-HAg","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"d8G2_tUOEtuYwmRej8bvVqiovoa1v5nkSSytVWxCpu0"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:44:49.412 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.413 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.418 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.421 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.423 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-31 11:44:49.425 -05:00 [DBG] Getting claims for access token for subject: 2
2021-03-31 11:44:49.433 -05:00 [DBG] Creating refresh token
2021-03-31 11:44:49.434 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-31 11:44:49.438 -05:00 [DBG] E/GDamRfVKW56HSnIpU+ROFywOjP5bDI8ewVYJ2x5dA= not found in database
2021-03-31 11:44:49.456 -05:00 [DBG] mvc found in database: true
2021-03-31 11:44:49.457 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 11:44:49.461 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:49.464 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:49.466 -05:00 [DBG] Getting claims for identity token for subject: 2 and client: mvc
2021-03-31 11:44:49.469 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:44:49.474 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"2","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****iFkQ","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****7DCs","$type":"Token"},{"TokenType":"access_token","TokenValue":"****tKZA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U9:00000002","TimeStamp":"2021-03-31T16:44:49.0000000Z","ProcessId":18760,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:49.486 -05:00 [DBG] Token request success.
2021-03-31 11:44:51.509 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:51.515 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:51.517 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:51.517 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:51.519 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:51.522 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:51.524 -05:00 [DBG] Start discovery request
2021-03-31 11:44:51.539 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:51.631 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 11:44:51.633 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 11:44:51.635 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 11:44:51.636 -05:00 [DBG] Start authorize request
2021-03-31 11:44:51.637 -05:00 [DBG] User in authorize request: 2
2021-03-31 11:44:51.638 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 11:44:51.656 -05:00 [DBG] js found in database: true
2021-03-31 11:44:51.656 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:51.659 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 11:44:51.663 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:51.668 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:51.672 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:51.675 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:51.677 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 11:44:51.685 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"bf1b788d511e412fb9580c8c0d4e6373","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Q4xMll4qxEIpAC8UlxAdnQ","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"bf1b788d511e412fb9580c8c0d4e6373","code_challenge":"s6r2NR9Xqn2gcv364eXs8T-QuuErH-R4-ruzC36i4_U","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 11:44:51.702 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 11:44:51.703 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 11:44:51.706 -05:00 [DBG] zsBBW2XNMNrp8AX47XUGbDrxWo67eYCH4trPSMPv2uw= not found in database
2021-03-31 11:44:51.711 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****IJNc","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:000000A1","TimeStamp":"2021-03-31T16:44:51.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:51.720 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"2","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"bf1b788d511e412fb9580c8c0d4e6373","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 11:44:51.725 -05:00 [DBG] Augmenting SignInContext
2021-03-31 11:44:51.726 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 11:44:51.940 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:44:51.946 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:51.949 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:51.950 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:44:51.953 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:44:51.955 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:44:51.958 -05:00 [DBG] Start discovery request
2021-03-31 11:44:51.965 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:44:51.985 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 11:44:51.990 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:51.992 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:51.993 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 11:44:51.999 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 11:44:52.001 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 11:44:52.003 -05:00 [DBG] Start token request.
2021-03-31 11:44:52.004 -05:00 [DBG] Start client validation
2021-03-31 11:44:52.005 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 11:44:52.006 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 11:44:52.007 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 11:44:52.010 -05:00 [DBG] Secret id found: js
2021-03-31 11:44:52.030 -05:00 [DBG] js found in database: true
2021-03-31 11:44:52.031 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:52.034 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 11:44:52.035 -05:00 [DBG] Client validation success
2021-03-31 11:44:52.036 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7U8:000000A5","TimeStamp":"2021-03-31T16:44:52.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 11:44:52.043 -05:00 [DBG] Start token request validation
2021-03-31 11:44:52.044 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 11:44:52.048 -05:00 [DBG] zsBBW2XNMNrp8AX47XUGbDrxWo67eYCH4trPSMPv2uw= found in database: true
2021-03-31 11:44:52.052 -05:00 [DBG] removing zsBBW2XNMNrp8AX47XUGbDrxWo67eYCH4trPSMPv2uw= persisted grant from database
2021-03-31 11:44:52.057 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 11:44:52.060 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 11:44:52.061 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"YdPF0Cfszov9A6w2vd93xz9n52teAYe-VQMrtmeIJNc","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"YdPF0Cfszov9A6w2vd93xz9n52teAYe-VQMrtmeIJNc","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"049bf989337444acbf9077f25b8605fc71d0f9200a5a4957a299ccbac83a1139a4bb3b4371384d96b29cdc7e85e9609b","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 11:44:52.084 -05:00 [DBG] js found in database: true
2021-03-31 11:44:52.084 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:52.089 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:52.092 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:52.094 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 11:44:52.097 -05:00 [DBG] Getting claims for access token for subject: 2
2021-03-31 11:44:52.118 -05:00 [DBG] js found in database: true
2021-03-31 11:44:52.118 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:52.124 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:52.127 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 11:44:52.131 -05:00 [DBG] Getting claims for identity token for subject: 2 and client: js
2021-03-31 11:44:52.132 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 11:44:52.135 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****5fkA","$type":"Token"},{"TokenType":"access_token","TokenValue":"****dkhg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7U8:000000A5","TimeStamp":"2021-03-31T16:44:52.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 11:44:52.144 -05:00 [DBG] Token request success.
2021-03-31 11:44:52.165 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:44:52.170 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:52.171 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:52.180 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 11:44:52.184 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:44:52.186 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:44:52.187 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 11:44:52.192 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 11:44:52.193 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 11:44:52.198 -05:00 [DBG] Start userinfo request
2021-03-31 11:44:52.199 -05:00 [DBG] Bearer token found in header
2021-03-31 11:44:52.219 -05:00 [DBG] js found in database: true
2021-03-31 11:44:52.220 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:52.238 -05:00 [DBG] js found in database: true
2021-03-31 11:44:52.238 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 11:44:52.244 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 11:44:52.247 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617209092,"exp":1617212692,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"2","auth_time":1617209087,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 11:44:52.255 -05:00 [DBG] Creating userinfo response
2021-03-31 11:44:52.255 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:52.256 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:52.259 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:52.264 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 11:44:52.266 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 11:44:52.269 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 11:44:52.275 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 11:44:52.276 -05:00 [DBG] End userinfo request
2021-03-31 11:44:52.304 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:44:52.307 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:44:52.309 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:44:52.312 -05:00 [DBG] Rendering check session result
2021-03-31 11:45:05.875 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:45:05.884 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:45:05.886 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:45:05.897 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:45:05.898 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:45:05.901 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:45:05.903 -05:00 [DBG] Start discovery request
2021-03-31 11:45:05.916 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:45:06.074 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:45:06.077 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:45:06.080 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:45:06.082 -05:00 [DBG] Rendering check session result
2021-03-31 11:52:07.491 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:52:07.526 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:52:07.529 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:52:07.530 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:52:07.532 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:52:07.533 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:52:07.535 -05:00 [DBG] Start discovery request
2021-03-31 11:52:07.548 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:52:07.770 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:52:07.771 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:52:07.777 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:52:07.778 -05:00 [DBG] Rendering check session result
2021-03-31 11:52:41.931 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:52:41.937 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:52:41.938 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:52:41.940 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:52:41.944 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:52:41.947 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:52:41.950 -05:00 [DBG] Start discovery request
2021-03-31 11:52:41.971 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:52:42.081 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:52:42.083 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:52:42.088 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:52:42.090 -05:00 [DBG] Rendering check session result
2021-03-31 11:53:10.642 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:53:10.647 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:53:10.649 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:53:10.650 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:53:10.653 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:53:10.657 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:53:10.660 -05:00 [DBG] Start discovery request
2021-03-31 11:53:10.666 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:53:10.769 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:53:10.772 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:53:10.781 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:53:10.784 -05:00 [DBG] Rendering check session result
2021-03-31 11:54:07.732 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:54:07.737 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:54:07.739 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:54:07.741 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:54:07.745 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:54:07.746 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:54:07.748 -05:00 [DBG] Start discovery request
2021-03-31 11:54:07.763 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:54:07.930 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:54:07.943 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:54:07.946 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:54:07.947 -05:00 [DBG] Rendering check session result
2021-03-31 11:54:22.250 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:54:22.255 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:54:22.256 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:54:22.258 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:54:22.260 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:54:22.265 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:54:22.267 -05:00 [DBG] Start discovery request
2021-03-31 11:54:22.276 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:54:22.395 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:54:22.398 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:54:22.401 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:54:22.403 -05:00 [DBG] Rendering check session result
2021-03-31 11:54:40.643 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:54:40.648 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:54:40.651 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:54:40.652 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:54:40.656 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:54:40.658 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:54:40.660 -05:00 [DBG] Start discovery request
2021-03-31 11:54:40.677 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:54:40.867 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:54:40.869 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:54:40.873 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:54:40.877 -05:00 [DBG] Rendering check session result
2021-03-31 11:54:53.404 -05:00 [INF] Removing 3 grants
2021-03-31 11:54:53.436 -05:00 [INF] Removing 0 device flow codes
2021-03-31 11:55:34.665 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 11:55:34.672 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 11:55:34.673 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 11:55:34.674 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 11:55:34.678 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 11:55:34.681 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 11:55:34.684 -05:00 [DBG] Start discovery request
2021-03-31 11:55:34.691 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 11:55:34.878 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 11:55:34.881 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 11:55:34.882 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 11:55:34.884 -05:00 [DBG] Rendering check session result
2021-03-31 12:05:17.933 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:05:18.191 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:05:18.206 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:05:18.209 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:05:18.215 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:05:18.219 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:05:18.227 -05:00 [DBG] Start discovery request
2021-03-31 12:05:18.290 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:05:18.479 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:05:18.482 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:05:18.484 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:05:18.486 -05:00 [DBG] Rendering check session result
2021-03-31 12:07:35.796 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:07:35.809 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:07:35.811 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:07:35.815 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:07:35.818 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:07:35.822 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:07:35.825 -05:00 [DBG] Start discovery request
2021-03-31 12:07:35.847 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:07:35.975 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:07:35.978 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:07:35.982 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:07:35.985 -05:00 [DBG] Rendering check session result
2021-03-31 12:07:48.523 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:07:48.555 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:07:48.558 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:07:48.561 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:07:48.564 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:07:48.570 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:07:48.573 -05:00 [DBG] Start discovery request
2021-03-31 12:07:48.625 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:07:48.817 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:07:48.821 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:07:48.827 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:07:48.828 -05:00 [DBG] Rendering check session result
2021-03-31 12:10:03.074 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:10:03.080 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:10:03.082 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:10:03.084 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:10:03.089 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:10:03.091 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:10:03.092 -05:00 [DBG] Start discovery request
2021-03-31 12:10:03.104 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:10:03.151 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:10:03.153 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:10:03.155 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:10:03.157 -05:00 [DBG] Start authorize request
2021-03-31 12:10:03.158 -05:00 [DBG] User in authorize request: 2
2021-03-31 12:10:03.158 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:10:03.192 -05:00 [DBG] js found in database: true
2021-03-31 12:10:03.192 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:03.195 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:10:03.201 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:03.226 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:10:03.232 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:03.236 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:10:03.238 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:10:03.240 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"478e873f7fab40d284df194a895f35b8","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"Q4xMll4qxEIpAC8UlxAdnQ","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"478e873f7fab40d284df194a895f35b8","code_challenge":"WvlK6-lyIi0eLZTsO46DMZQ-NfDnlO6TGXZqff-p1pw","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:10:03.260 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:10:03.260 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:10:03.266 -05:00 [DBG] F49fv4b/aAt/YDSEwSm6syOX8L5pEXany5ifk74RX0U= not found in database
2021-03-31 12:10:03.272 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****CBr8","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7UD:00000015","TimeStamp":"2021-03-31T17:10:03.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:10:03.282 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"2","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"478e873f7fab40d284df194a895f35b8","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:10:03.684 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:10:03.690 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:10:03.691 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:10:03.694 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:10:03.696 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:10:03.700 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:10:03.702 -05:00 [DBG] Start discovery request
2021-03-31 12:10:03.706 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:10:03.756 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 12:10:03.762 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:10:03.763 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:10:03.764 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:10:03.766 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:10:03.768 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:10:03.773 -05:00 [DBG] Start token request.
2021-03-31 12:10:03.775 -05:00 [DBG] Start client validation
2021-03-31 12:10:03.777 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:10:03.779 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:10:03.780 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:10:03.784 -05:00 [DBG] Secret id found: js
2021-03-31 12:10:03.800 -05:00 [DBG] js found in database: true
2021-03-31 12:10:03.800 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:03.805 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 12:10:03.806 -05:00 [DBG] Client validation success
2021-03-31 12:10:03.807 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KBL9PV7UC:00000019","TimeStamp":"2021-03-31T17:10:03.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:10:03.812 -05:00 [DBG] Start token request validation
2021-03-31 12:10:03.812 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:10:03.819 -05:00 [DBG] F49fv4b/aAt/YDSEwSm6syOX8L5pEXany5ifk74RX0U= found in database: true
2021-03-31 12:10:03.822 -05:00 [DBG] removing F49fv4b/aAt/YDSEwSm6syOX8L5pEXany5ifk74RX0U= persisted grant from database
2021-03-31 12:10:03.827 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:10:03.831 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:10:03.832 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"3n8TJ-6XJ2sAbctnhTuJluQ3O-nMxBRCCD6H3z6CBr8","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"3n8TJ-6XJ2sAbctnhTuJluQ3O-nMxBRCCD6H3z6CBr8","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"320d9f4a51224058b8a6ce21e4d56de39f1c36c2f0e940b9afebb9cb730b33da2dda7bdbd22d460f86f887e92f807b57","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:10:03.855 -05:00 [DBG] js found in database: true
2021-03-31 12:10:03.855 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:03.860 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:03.865 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:10:03.867 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 12:10:03.868 -05:00 [DBG] Getting claims for access token for subject: 2
2021-03-31 12:10:03.896 -05:00 [DBG] js found in database: true
2021-03-31 12:10:03.897 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:03.904 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:03.908 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:10:03.910 -05:00 [DBG] Getting claims for identity token for subject: 2 and client: js
2021-03-31 12:10:03.912 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:10:03.918 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****emBQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****Rddw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KBL9PV7UC:00000019","TimeStamp":"2021-03-31T17:10:03.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:10:03.926 -05:00 [DBG] Token request success.
2021-03-31 12:10:03.955 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:10:03.959 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:10:03.960 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:10:03.987 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:10:03.992 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:10:03.993 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:10:03.994 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 12:10:03.996 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 12:10:04.000 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 12:10:04.002 -05:00 [DBG] Start userinfo request
2021-03-31 12:10:04.003 -05:00 [DBG] Bearer token found in header
2021-03-31 12:10:04.020 -05:00 [DBG] js found in database: true
2021-03-31 12:10:04.021 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:04.038 -05:00 [DBG] js found in database: true
2021-03-31 12:10:04.038 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:10:04.043 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:10:04.044 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617210603,"exp":1617214203,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"2","auth_time":1617209087,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:10:04.050 -05:00 [DBG] Creating userinfo response
2021-03-31 12:10:04.050 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:10:04.052 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:10:04.059 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:04.060 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 12:10:04.062 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:10:04.065 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:10:04.073 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 12:10:04.074 -05:00 [DBG] End userinfo request
2021-03-31 12:10:04.154 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:10:04.156 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:10:04.158 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:10:04.159 -05:00 [DBG] Rendering check session result
2021-03-31 12:14:05.597 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:14:05.635 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:14:05.637 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:14:05.641 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:14:05.643 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:14:05.644 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:14:05.648 -05:00 [DBG] Start discovery request
2021-03-31 12:14:05.680 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:14:05.837 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:14:05.840 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:14:05.842 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:14:05.845 -05:00 [DBG] Rendering check session result
2021-03-31 12:24:04.178 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 12:24:04.181 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 12:24:04.183 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 12:24:04.185 -05:00 [DBG] Processing signout request for 2
2021-03-31 12:24:04.185 -05:00 [DBG] Start end session request validation
2021-03-31 12:24:04.186 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"2","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 12:24:04.191 -05:00 [DBG] Success validating end session request from null
2021-03-31 12:24:11.165 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:24:11.212 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-31 12:24:11.214 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-31 12:24:11.216 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-31 12:24:11.217 -05:00 [INF] {"SubjectId":"2","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7KBL9PV7UG:00000013","TimeStamp":"2021-03-31T17:24:11.0000000Z","ProcessId":18760,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-31 12:24:11.350 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-31 12:24:11.360 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-31 12:24:11.362 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-31 12:24:11.364 -05:00 [DBG] Processing signout callback request
2021-03-31 12:24:11.422 -05:00 [DBG] mvc found in database: true
2021-03-31 12:24:11.423 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:24:11.441 -05:00 [DBG] js found in database: true
2021-03-31 12:24:11.442 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:24:11.445 -05:00 [DBG] No client front-channel logout URLs
2021-03-31 12:24:11.446 -05:00 [DBG] No client back-channel logout URLs
2021-03-31 12:24:11.448 -05:00 [INF] Successful signout callback.
2021-03-31 12:24:11.449 -05:00 [DBG] No client front-channel iframe urls
2021-03-31 12:24:11.451 -05:00 [DBG] No client back-channel iframe urls
2021-03-31 12:27:58.190 -05:00 [INF] Starting host...
2021-03-31 12:28:04.281 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-31 12:28:05.364 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-31 12:28:05.365 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-31 12:28:05.367 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-31 12:28:05.367 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-31 12:28:05.369 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-31 12:28:05.370 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-31 12:28:09.509 -05:00 [DBG] Login Url: /Account/Login
2021-03-31 12:28:09.513 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-31 12:28:09.513 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-31 12:28:09.515 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-31 12:28:09.516 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-31 12:28:09.517 -05:00 [DBG] Error Url: /home/error
2021-03-31 12:28:09.519 -05:00 [DBG] Error Id Parameter: errorId
2021-03-31 12:28:19.111 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:28:19.130 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:28:19.132 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:28:19.136 -05:00 [DBG] Start discovery request
2021-03-31 12:28:21.607 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:28:22.016 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-31 12:28:22.020 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-31 12:28:22.021 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-31 12:28:22.027 -05:00 [DBG] Start key discovery request
2021-03-31 12:28:22.136 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 12:28:22.142 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 12:28:22.143 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 12:28:22.151 -05:00 [DBG] Processing signout request for anonymous
2021-03-31 12:28:22.154 -05:00 [DBG] Start end session request validation
2021-03-31 12:28:22.159 -05:00 [DBG] Start identity token validation
2021-03-31 12:28:22.728 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:22.738 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:22.742 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-31 12:28:22.978 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:28:22.988 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617209089,"exp":1617209389,"iss":"https://localhost:5000","aud":"mvc","nonce":"637528058677549927.MmEzNWRmMzEtMTNkOC00NTE2LWIyMjAtZjA3ODY5YWUxZDgyMTlkYjNlMDctZWNjMS00YjdmLWE4OTEtMzY4ZmZlYmEyMDI2","iat":1617209089,"at_hash":"-2iuRjVoxm9tdPHG6GCgaw","s_hash":"xJOQl8UAzZhrP92fnjN_HA","sid":"Q4xMll4qxEIpAC8UlxAdnQ","sub":"2","auth_time":1617209087,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:28:23.005 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgUxQIk94Zq2JaqLwS5Us4M4KxN6f9yD1MqWa6dqPPuO9dhXz_Ha4M4P1iBrrKL8fiu44kwrkH_orAJBSqGG7gUtlLtvbHeK8F1xc_x7b-5nLKDdbS70ltMVjiS9JxJbHLkKiADNayjtaU-Uq5qxRq9","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlgUxQIk94Zq2JaqLwS5Us4M4KxN6f9yD1MqWa6dqPPuO9dhXz_Ha4M4P1iBrrKL8fiu44kwrkH_orAJBSqGG7gUtlLtvbHeK8F1xc_x7b-5nLKDdbS70ltMVjiS9JxJbHLkKiADNayjtaU-Uq5qxRq9","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 12:28:23.013 -05:00 [DBG] Success validating end session request from mvc
2021-03-31 12:28:24.697 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:28:24.703 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:28:24.705 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:28:24.709 -05:00 [DBG] Start authorize request
2021-03-31 12:28:24.712 -05:00 [DBG] No user present in authorize request
2021-03-31 12:28:24.714 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:24.748 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:24.749 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:24.770 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:24.866 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:24.934 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:24.953 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:24.959 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:24.969 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:24.980 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","UiLocales":null,"Nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"iV4AEI6ohR4K9Bi594xwO_AxZ-sgvB0mRC0fN_ah35Y","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:28:25.001 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 12:28:25.067 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:25.088 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:25.089 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:25.092 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:25.096 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:25.100 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:25.105 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:25.110 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:25.111 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:25.132 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:25.132 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:32.549 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:28:32.570 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:32.575 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:32.581 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:28:32.583 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:28:32.586 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:28:32.588 -05:00 [DBG] Start discovery request
2021-03-31 12:28:32.596 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:28:32.658 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:28:32.661 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:28:32.666 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:28:32.667 -05:00 [DBG] Start authorize request
2021-03-31 12:28:32.668 -05:00 [DBG] No user present in authorize request
2021-03-31 12:28:32.671 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:32.703 -05:00 [DBG] js found in database: true
2021-03-31 12:28:32.705 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:32.708 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:32.714 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:32.719 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:32.725 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:32.732 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:32.734 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:32.738 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"77a913e5c1714ca8a21b0b90b74673e9","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"77a913e5c1714ca8a21b0b90b74673e9","code_challenge":"iPvdJ3gLH0WXYzuAKCn-WMqozEgWLHt_kYpgz7TxMZ0","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:28:32.759 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 12:28:32.813 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:32.836 -05:00 [DBG] js found in database: true
2021-03-31 12:28:32.837 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:32.840 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:32.844 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:32.848 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:32.855 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:32.860 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:32.861 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:32.881 -05:00 [DBG] js found in database: true
2021-03-31 12:28:32.882 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:47.562 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:28:47.650 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:47.693 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:47.694 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:47.697 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:47.704 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:47.728 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:47.734 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:47.739 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:47.741 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:47.899 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:28:47.900 -05:00 [DBG] Adding idp claim with value: local
2021-03-31 12:28:47.901 -05:00 [DBG] Adding auth_time claim with value: 1617211727
2021-03-31 12:28:47.920 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:28:47.934 -05:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"2","DisplayName":"bob","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000001F","TimeStamp":"2021-03-31T17:28:47.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-31 12:28:47.959 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:47.959 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:47.989 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 12:28:47.992 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 12:28:47.993 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 12:28:48.000 -05:00 [DBG] Start authorize callback request
2021-03-31 12:28:48.005 -05:00 [DBG] User in authorize request: 2
2021-03-31 12:28:48.005 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:48.035 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:48.035 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:48.039 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:48.044 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:48.048 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:48.051 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:48.056 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:48.057 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:48.059 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","UiLocales":null,"Nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"fjP5J5_o3QmWOtHUQJ2e3w","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"iV4AEI6ohR4K9Bi594xwO_AxZ-sgvB0mRC0fN_ah35Y","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:28:48.088 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 12:28:48.088 -05:00 [INF] Showing consent: User has not yet consented
2021-03-31 12:28:48.143 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:48.162 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:48.163 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:48.166 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:48.169 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:48.173 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:48.177 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:48.182 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:48.185 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:48.206 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:48.207 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:48.215 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:48.241 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:49.250 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:28:49.333 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:49.362 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:49.362 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:49.367 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:49.371 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:49.393 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:49.399 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:49.406 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:49.408 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:49.412 -05:00 [INF] {"SubjectId":"2","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:00000025","TimeStamp":"2021-03-31T17:28:49.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-31 12:28:49.452 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:49.452 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:49.468 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 12:28:49.470 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 12:28:49.473 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 12:28:49.477 -05:00 [DBG] Start authorize callback request
2021-03-31 12:28:49.486 -05:00 [DBG] User in authorize request: 2
2021-03-31 12:28:49.486 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:49.505 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:49.506 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:49.508 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:49.512 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:49.517 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:49.521 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:49.526 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:49.528 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:49.530 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","UiLocales":null,"Nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"fjP5J5_o3QmWOtHUQJ2e3w","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"iV4AEI6ohR4K9Bi594xwO_AxZ-sgvB0mRC0fN_ah35Y","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:28:49.550 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 12:28:49.557 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 12:28:49.560 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 12:28:49.563 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 2
2021-03-31 12:28:49.627 -05:00 [DBG] QIM5q/EfBaHTA6V377/X6CDksjn7Imin78ZZLT1RY0E= found in database
2021-03-31 12:28:49.813 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:28:49.837 -05:00 [DBG] 63n6v+ZjcJK9s4oKAt86vZj/yLEhf3K3BrP9xyQdKPQ= not found in database
2021-03-31 12:28:49.890 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"2","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****4x6o","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:00000027","TimeStamp":"2021-03-31T17:28:49.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:28:49.904 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"2","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljCMIrxQQNV2WS3ijrg1xAFM6uJZgm7wrB8vmThjWElfpc5FaTVtYbt_YiItg6VTb4-1I5DkmxGFE2CzSubIU2JZ9O68Ner9SnpW658-3X5qinIkAQx-8iVjpJSkLoaN-4Wsw89WSkJQ6udhW4IFf1Kpa0jmchBSUmCHAtB7sNEgL4IKYr3IUD96PCZR80xjuCtGHd4j-dLkRWQ8ALSbs6i_rBj2Lqh8CJQAH0WC4SZUXb5UMZsiMIyXCbMNROGYSZf5mRC8_ckjCX6kXcWtf5pNDwWYvhpvOJPrEOO0E8UMF2RiqDSu9JETt8J8MIfZofsHUiFcxMtB1SOINEI89YxIX_Zgh9GmwzMcZNGVoxj6g","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:28:49.920 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:28:49.921 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:28:50.077 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:28:50.084 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:28:50.092 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:28:50.099 -05:00 [DBG] Start token request.
2021-03-31 12:28:50.104 -05:00 [DBG] Start client validation
2021-03-31 12:28:50.113 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:28:50.116 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:28:50.119 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:28:50.119 -05:00 [DBG] Secret id found: mvc
2021-03-31 12:28:50.159 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:50.160 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:50.185 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-31 12:28:50.186 -05:00 [DBG] Client validation success
2021-03-31 12:28:50.191 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KD9CIOBKR:00000003","TimeStamp":"2021-03-31T17:28:50.0000000Z","ProcessId":37504,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:28:50.205 -05:00 [DBG] Start token request validation
2021-03-31 12:28:50.215 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:28:50.249 -05:00 [DBG] 63n6v+ZjcJK9s4oKAt86vZj/yLEhf3K3BrP9xyQdKPQ= found in database: true
2021-03-31 12:28:50.298 -05:00 [DBG] removing 63n6v+ZjcJK9s4oKAt86vZj/yLEhf3K3BrP9xyQdKPQ= persisted grant from database
2021-03-31 12:28:50.313 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:28:50.318 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:28:50.325 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"Wet3vWRe3HY5TJRJAlhdHeS41n32FRkrgCZGS5t4x6o","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"Wet3vWRe3HY5TJRJAlhdHeS41n32FRkrgCZGS5t4x6o","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"ka14Av-onRpGM-_98zOVLY5UWjTz4U7Qd4D-J9pZVu4"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:28:50.355 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:50.356 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:50.362 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:50.366 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:50.382 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-31 12:28:50.383 -05:00 [DBG] Getting claims for access token for subject: 2
2021-03-31 12:28:50.433 -05:00 [DBG] Creating refresh token
2021-03-31 12:28:50.434 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-31 12:28:50.455 -05:00 [DBG] Q9DHbG/im64dxQiGg7bZv9f7hBxzwPPckij7bJOzd6E= not found in database
2021-03-31 12:28:50.487 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:50.488 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:50.493 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:50.497 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:50.510 -05:00 [DBG] Getting claims for identity token for subject: 2 and client: mvc
2021-03-31 12:28:50.512 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:28:50.518 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"2","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****UD_Q","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****jGq8","$type":"Token"},{"TokenType":"access_token","TokenValue":"****vl_g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKR:00000003","TimeStamp":"2021-03-31T17:28:50.0000000Z","ProcessId":37504,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:28:50.528 -05:00 [DBG] Token request success.
2021-03-31 12:28:52.450 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:28:52.458 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:52.460 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:52.462 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:28:52.467 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:28:52.469 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:28:52.472 -05:00 [DBG] Start discovery request
2021-03-31 12:28:52.486 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:28:52.542 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:28:52.554 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:28:52.562 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:28:52.564 -05:00 [DBG] Start authorize request
2021-03-31 12:28:52.566 -05:00 [DBG] User in authorize request: 2
2021-03-31 12:28:52.567 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:28:52.588 -05:00 [DBG] js found in database: true
2021-03-31 12:28:52.589 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:52.593 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:28:52.597 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:52.602 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:52.607 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:52.611 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:52.613 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:28:52.615 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"2","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"3e4942a0424d4bd2970d699e37c7bae2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"fjP5J5_o3QmWOtHUQJ2e3w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"3e4942a0424d4bd2970d699e37c7bae2","code_challenge":"p2rslbidWAXGCrHoaZZd5eYJ-R-VZug1usabh5tGsLU","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:28:52.631 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:28:52.631 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:28:52.638 -05:00 [DBG] ifiLsIrzUNK4cIyDS3eaqUvB+i0NuUU8SOP1w/546ls= not found in database
2021-03-31 12:28:52.645 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****Y8No","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000002B","TimeStamp":"2021-03-31T17:28:52.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:28:52.652 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"2","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"3e4942a0424d4bd2970d699e37c7bae2","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:28:52.659 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:28:52.660 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:28:52.882 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:28:52.895 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:52.899 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:52.901 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:28:52.905 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:28:52.914 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:28:52.917 -05:00 [DBG] Start discovery request
2021-03-31 12:28:52.928 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:28:52.948 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 12:28:52.954 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:52.955 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:52.957 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:28:52.962 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:28:52.963 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:28:52.965 -05:00 [DBG] Start token request.
2021-03-31 12:28:52.966 -05:00 [DBG] Start client validation
2021-03-31 12:28:52.967 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:28:52.968 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:28:52.969 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:28:52.972 -05:00 [DBG] Secret id found: js
2021-03-31 12:28:52.995 -05:00 [DBG] js found in database: true
2021-03-31 12:28:52.996 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:52.999 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 12:28:53.000 -05:00 [DBG] Client validation success
2021-03-31 12:28:53.002 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000002F","TimeStamp":"2021-03-31T17:28:53.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:28:53.010 -05:00 [DBG] Start token request validation
2021-03-31 12:28:53.011 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:28:53.014 -05:00 [DBG] ifiLsIrzUNK4cIyDS3eaqUvB+i0NuUU8SOP1w/546ls= found in database: true
2021-03-31 12:28:53.022 -05:00 [DBG] removing ifiLsIrzUNK4cIyDS3eaqUvB+i0NuUU8SOP1w/546ls= persisted grant from database
2021-03-31 12:28:53.029 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:28:53.032 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:28:53.033 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"GARAVmyb8LDKqwQqdwFOOgavZszBLo938V38-KxY8No","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"GARAVmyb8LDKqwQqdwFOOgavZszBLo938V38-KxY8No","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"bd7300081ec74390b9963457f6bbd0133ebf0193cc7d4db6a21393fa06381612e156dc31afbb4d62a91598a008668d05","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:28:53.056 -05:00 [DBG] js found in database: true
2021-03-31 12:28:53.057 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:53.063 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:53.067 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:53.068 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 12:28:53.071 -05:00 [DBG] Getting claims for access token for subject: 2
2021-03-31 12:28:53.099 -05:00 [DBG] js found in database: true
2021-03-31 12:28:53.100 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:53.106 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:53.110 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:28:53.112 -05:00 [DBG] Getting claims for identity token for subject: 2 and client: js
2021-03-31 12:28:53.113 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:28:53.116 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"2","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****8O8Q","$type":"Token"},{"TokenType":"access_token","TokenValue":"****bGow","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000002F","TimeStamp":"2021-03-31T17:28:53.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:28:53.127 -05:00 [DBG] Token request success.
2021-03-31 12:28:53.143 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:28:53.148 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:53.150 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:53.156 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:28:53.161 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:28:53.162 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:28:53.166 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 12:28:53.170 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 12:28:53.172 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 12:28:53.177 -05:00 [DBG] Start userinfo request
2021-03-31 12:28:53.180 -05:00 [DBG] Bearer token found in header
2021-03-31 12:28:53.210 -05:00 [DBG] js found in database: true
2021-03-31 12:28:53.210 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:53.231 -05:00 [DBG] js found in database: true
2021-03-31 12:28:53.232 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:53.240 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:28:53.242 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617211733,"exp":1617215333,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"2","auth_time":1617211727,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:28:53.252 -05:00 [DBG] Creating userinfo response
2021-03-31 12:28:53.257 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:28:53.259 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:28:53.263 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:53.268 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 12:28:53.269 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:28:53.275 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:28:53.282 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 12:28:53.284 -05:00 [DBG] End userinfo request
2021-03-31 12:28:53.313 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:28:53.316 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:28:53.318 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:28:53.322 -05:00 [DBG] Rendering check session result
2021-03-31 12:28:54.871 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 12:28:54.876 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 12:28:54.878 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 12:28:54.880 -05:00 [DBG] Processing signout request for 2
2021-03-31 12:28:54.881 -05:00 [DBG] Start end session request validation
2021-03-31 12:28:54.882 -05:00 [INF] End session request validation success
{"ClientId":null,"ClientName":null,"SubjectId":"2","PostLogOutUri":null,"State":null,"Raw":{"post_logout_redirect_uri":"http://localhost:3000/signout-callback-oidc"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 12:28:54.887 -05:00 [DBG] Success validating end session request from null
2021-03-31 12:28:56.653 -05:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:28:56.700 -05:00 [INF] AuthenticationScheme: Identity.Application signed out.
2021-03-31 12:28:56.704 -05:00 [INF] AuthenticationScheme: Identity.External signed out.
2021-03-31 12:28:56.706 -05:00 [INF] AuthenticationScheme: Identity.TwoFactorUserId signed out.
2021-03-31 12:28:56.710 -05:00 [INF] {"SubjectId":"2","DisplayName":"Bob Smith","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000003B","TimeStamp":"2021-03-31T17:28:56.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLogoutSuccessEvent"}
2021-03-31 12:28:56.782 -05:00 [DBG] Request path /connect/endsession/callback matched to endpoint type Endsession
2021-03-31 12:28:56.796 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionCallbackEndpoint
2021-03-31 12:28:56.799 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionCallbackEndpoint for /connect/endsession/callback
2021-03-31 12:28:56.808 -05:00 [DBG] Processing signout callback request
2021-03-31 12:28:56.844 -05:00 [DBG] mvc found in database: true
2021-03-31 12:28:56.844 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:28:56.867 -05:00 [DBG] js found in database: true
2021-03-31 12:28:56.867 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:28:56.872 -05:00 [DBG] No client front-channel logout URLs
2021-03-31 12:28:56.874 -05:00 [DBG] No client back-channel logout URLs
2021-03-31 12:28:56.877 -05:00 [INF] Successful signout callback.
2021-03-31 12:28:56.878 -05:00 [DBG] No client front-channel iframe urls
2021-03-31 12:28:56.879 -05:00 [DBG] No client back-channel iframe urls
2021-03-31 12:29:08.744 -05:00 [DBG] Request path /connect/endsession matched to endpoint type Endsession
2021-03-31 12:29:08.751 -05:00 [DBG] Endpoint enabled: Endsession, successfully created handler: IdentityServer4.Endpoints.EndSessionEndpoint
2021-03-31 12:29:08.752 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.EndSessionEndpoint for /connect/endsession
2021-03-31 12:29:08.755 -05:00 [DBG] Processing signout request for anonymous
2021-03-31 12:29:08.757 -05:00 [DBG] Start end session request validation
2021-03-31 12:29:08.758 -05:00 [DBG] Start identity token validation
2021-03-31 12:29:08.783 -05:00 [DBG] mvc found in database: true
2021-03-31 12:29:08.784 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:29:08.787 -05:00 [DBG] Client found: mvc / MVC Client
2021-03-31 12:29:08.794 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:29:08.796 -05:00 [DBG] Token validation success
{"ClientId":"mvc","ClientName":"MVC Client","ValidateLifetime":false,"AccessTokenType":null,"ExpectedScope":null,"TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617211730,"exp":1617212030,"iss":"https://localhost:5000","aud":"mvc","nonce":"637528085046721504.MWJjNzZmMjAtNThlNS00MDk0LTk4ZDktOTQzMDk3NGViMjc0OWY1YTY1ZTItMGE0Mi00YjEzLWI0YzItOGFkYmIyNjUzNTE5","iat":1617211730,"at_hash":"oM3PsaQ7AmnN_WbUmp9COQ","s_hash":"__6OmXn4HMGdnnx7cqbIAw","sid":"fjP5J5_o3QmWOtHUQJ2e3w","sub":"2","auth_time":1617211727,"idp":"local","amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:29:08.806 -05:00 [INF] End session request validation success
{"ClientId":"mvc","ClientName":"MVC Client","SubjectId":"unknown","PostLogOutUri":"https://localhost:44359/signout-callback-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlicHzCchfmMN5yUJaFlWcG9ON0enZz-uPcwtG_UA721rtJRXFIFBJ86sMrZBZduEta6iitapQwtekd85z4ZUW_9WiSsAeJPW7TxuEafVZ15JuJm12yIXpgipxW7p2VMpwuDT-hZd1_jrFIQeU8Nyd1h","Raw":{"post_logout_redirect_uri":"https://localhost:44359/signout-callback-oidc","id_token_hint":"***REDACTED***","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PlicHzCchfmMN5yUJaFlWcG9ON0enZz-uPcwtG_UA721rtJRXFIFBJ86sMrZBZduEta6iitapQwtekd85z4ZUW_9WiSsAeJPW7TxuEafVZ15JuJm12yIXpgipxW7p2VMpwuDT-hZd1_jrFIQeU8Nyd1h","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"EndSessionRequestValidationLog"}
2021-03-31 12:29:08.814 -05:00 [DBG] Success validating end session request from mvc
2021-03-31 12:29:20.216 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:29:20.219 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:29:20.221 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:29:20.225 -05:00 [DBG] Start authorize request
2021-03-31 12:29:20.229 -05:00 [DBG] No user present in authorize request
2021-03-31 12:29:20.229 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:20.259 -05:00 [DBG] mvc found in database: true
2021-03-31 12:29:20.260 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:29:20.265 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:20.270 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:20.280 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:20.285 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:20.294 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:20.296 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:20.298 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plj3PfSOR-AbuO1zX7uziFGJ_6O6hl476RAMLUTitsWzym-glf4xMprHYG4ov6y2qaOooPXiYYlzzHK_blnf9N9YZBpr07H7nRQfhpJEL3U_4X8H5iJOJmyJXy1JrCbildyfg-_HDhGXhcc5YP1Uxm9B8kMoQ-TFtjU1xCe8UNDkhCOBI7o6icteAUHpcNAknJH5_osrjHj5zZzpl5_0lXW1yxGMWaPVivCQMNjfmQyJF3feO6AcgK46u8RCdBjhOvc0bvMamd_b5uIeShvTdtLEa-qXqtErxPAioFCr0LwKoWGO3rL9Po8S0l_Ik1dRDboDqxxfKu2DjOGVDdfEgmz4Bpo9VLqhbAfOiolTteQruA","UiLocales":null,"Nonce":"637528085602065509.MTQwMGZjMTMtZmM3MS00NjU3LWIwMjEtZTRjNGEyYjIwNmZlMjdkNjQxOWEtNTNiYy00ODQ5LTg1NGEtYzdkMTEzNmFkODc0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"IzLn8zGrM6F8aQaKIXBwbrd4DYXB5JNDvoBjaDBmVos","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528085602065509.MTQwMGZjMTMtZmM3MS00NjU3LWIwMjEtZTRjNGEyYjIwNmZlMjdkNjQxOWEtNTNiYy00ODQ5LTg1NGEtYzdkMTEzNmFkODc0","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-Plj3PfSOR-AbuO1zX7uziFGJ_6O6hl476RAMLUTitsWzym-glf4xMprHYG4ov6y2qaOooPXiYYlzzHK_blnf9N9YZBpr07H7nRQfhpJEL3U_4X8H5iJOJmyJXy1JrCbildyfg-_HDhGXhcc5YP1Uxm9B8kMoQ-TFtjU1xCe8UNDkhCOBI7o6icteAUHpcNAknJH5_osrjHj5zZzpl5_0lXW1yxGMWaPVivCQMNjfmQyJF3feO6AcgK46u8RCdBjhOvc0bvMamd_b5uIeShvTdtLEa-qXqtErxPAioFCr0LwKoWGO3rL9Po8S0l_Ik1dRDboDqxxfKu2DjOGVDdfEgmz4Bpo9VLqhbAfOiolTteQruA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:29:20.325 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 12:29:20.382 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:20.401 -05:00 [DBG] mvc found in database: true
2021-03-31 12:29:20.401 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:29:20.404 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:20.408 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:20.412 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:20.416 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:20.420 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:20.422 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:20.440 -05:00 [DBG] mvc found in database: true
2021-03-31 12:29:20.441 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:29:40.083 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:29:40.093 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:29:40.095 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:29:40.097 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:29:40.101 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:29:40.102 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:29:40.106 -05:00 [DBG] Start discovery request
2021-03-31 12:29:40.119 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:29:40.242 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:29:40.247 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:29:40.248 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:29:40.250 -05:00 [DBG] Start authorize request
2021-03-31 12:29:40.251 -05:00 [DBG] No user present in authorize request
2021-03-31 12:29:40.252 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:40.276 -05:00 [DBG] js found in database: true
2021-03-31 12:29:40.277 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:40.280 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:40.284 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:40.288 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:40.292 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:40.296 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:40.298 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:40.301 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"b023322ea8ba4d0e9292e079a0960ab2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"b023322ea8ba4d0e9292e079a0960ab2","code_challenge":"-GeNkIhJnYbb_Wb4_m9kDP6uY8NkFhEfPBR8rPyGZes","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:29:40.313 -05:00 [INF] Showing login: User is not authenticated
2021-03-31 12:29:40.363 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:40.383 -05:00 [DBG] js found in database: true
2021-03-31 12:29:40.383 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:40.386 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:40.389 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:40.392 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:40.396 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:40.400 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:40.401 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:40.416 -05:00 [DBG] js found in database: true
2021-03-31 12:29:40.416 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:49.160 -05:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:29:49.196 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:49.242 -05:00 [DBG] js found in database: true
2021-03-31 12:29:49.243 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:49.246 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:49.252 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:49.276 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:49.281 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:49.285 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:49.287 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:49.320 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:29:49.320 -05:00 [DBG] Adding idp claim with value: local
2021-03-31 12:29:49.323 -05:00 [DBG] Adding auth_time claim with value: 1617211789
2021-03-31 12:29:49.325 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:29:49.327 -05:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"1","DisplayName":"alice","Endpoint":"UI","ClientId":null,"Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000004D","TimeStamp":"2021-03-31T17:29:49.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"UserLoginSuccessEvent"}
2021-03-31 12:29:49.359 -05:00 [DBG] js found in database: true
2021-03-31 12:29:49.361 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:49.391 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 12:29:49.402 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 12:29:49.404 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 12:29:49.406 -05:00 [DBG] Start authorize callback request
2021-03-31 12:29:49.407 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:29:49.407 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:29:49.430 -05:00 [DBG] js found in database: true
2021-03-31 12:29:49.431 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:29:49.434 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:29:49.438 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:49.442 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:49.447 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:29:49.450 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:29:49.453 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:29:49.456 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"b023322ea8ba4d0e9292e079a0960ab2","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"b023322ea8ba4d0e9292e079a0960ab2","code_challenge":"-GeNkIhJnYbb_Wb4_m9kDP6uY8NkFhEfPBR8rPyGZes","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:29:49.473 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:29:49.474 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:29:49.479 -05:00 [DBG] S3WZGGPhyLcmWjbUREihdDvRiOGBnH0q60OSMtQTP4k= not found in database
2021-03-31 12:29:49.487 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****9CCg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:0000004F","TimeStamp":"2021-03-31T17:29:49.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:29:49.496 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"b023322ea8ba4d0e9292e079a0960ab2","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:29:49.499 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:29:49.500 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:30:51.121 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:30:51.128 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:30:51.133 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:30:51.136 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:30:51.137 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:30:51.139 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:30:51.141 -05:00 [DBG] Start discovery request
2021-03-31 12:30:51.158 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:30:51.206 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:30:51.209 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:30:51.210 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:30:51.213 -05:00 [DBG] Start authorize request
2021-03-31 12:30:51.214 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:30:51.215 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:30:51.239 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.239 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.243 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:30:51.247 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.250 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:30:51.254 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.258 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:30:51.260 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:30:51.264 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"f8a98cfd8c39499d92e78bbdbe6ee3c4","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"f8a98cfd8c39499d92e78bbdbe6ee3c4","code_challenge":"dIfNzLSTH6fHl84K7WmGm8VroD9XtTddzvc0vGQFvF0","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:30:51.277 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:30:51.278 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:30:51.281 -05:00 [DBG] URLml3bnCjZBu/Wya/W1Cz4YRz5TZFR3dLgLU2rIXcc= not found in database
2021-03-31 12:30:51.287 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****3srg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:00000053","TimeStamp":"2021-03-31T17:30:51.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:30:51.295 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"f8a98cfd8c39499d92e78bbdbe6ee3c4","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:30:51.481 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:30:51.486 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:30:51.487 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:30:51.489 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:30:51.494 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:30:51.496 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:30:51.499 -05:00 [DBG] Start discovery request
2021-03-31 12:30:51.505 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:30:51.517 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 12:30:51.521 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:30:51.523 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:30:51.524 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:30:51.533 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:30:51.535 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:30:51.538 -05:00 [DBG] Start token request.
2021-03-31 12:30:51.538 -05:00 [DBG] Start client validation
2021-03-31 12:30:51.539 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:30:51.542 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:30:51.545 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:30:51.546 -05:00 [DBG] Secret id found: js
2021-03-31 12:30:51.564 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.564 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.567 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 12:30:51.568 -05:00 [DBG] Client validation success
2021-03-31 12:30:51.569 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:00000057","TimeStamp":"2021-03-31T17:30:51.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:30:51.576 -05:00 [DBG] Start token request validation
2021-03-31 12:30:51.577 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:30:51.581 -05:00 [DBG] URLml3bnCjZBu/Wya/W1Cz4YRz5TZFR3dLgLU2rIXcc= found in database: true
2021-03-31 12:30:51.586 -05:00 [DBG] removing URLml3bnCjZBu/Wya/W1Cz4YRz5TZFR3dLgLU2rIXcc= persisted grant from database
2021-03-31 12:30:51.592 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:30:51.594 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:30:51.595 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"-OrXLN-eXqPI66V9AXKD_O42Tb-riKgsEUv3bP23srg","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"-OrXLN-eXqPI66V9AXKD_O42Tb-riKgsEUv3bP23srg","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"2400bf17577b4a319432103647b0df7d1f8b6d412543406d8fb21e5bfd8d39b745a1b807cfe845978cfa18d34e747797","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:30:51.636 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.636 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.641 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.645 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:30:51.647 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 12:30:51.649 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 12:30:51.671 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.671 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.676 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.680 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:30:51.683 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-31 12:30:51.684 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:30:51.687 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****sDXQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****ObNg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KD9CIOBKQ:00000057","TimeStamp":"2021-03-31T17:30:51.0000000Z","ProcessId":37504,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:30:51.695 -05:00 [DBG] Token request success.
2021-03-31 12:30:51.714 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:30:51.719 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:30:51.720 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:30:51.724 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:30:51.728 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:30:51.729 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:30:51.730 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 12:30:51.732 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 12:30:51.733 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 12:30:51.737 -05:00 [DBG] Start userinfo request
2021-03-31 12:30:51.739 -05:00 [DBG] Bearer token found in header
2021-03-31 12:30:51.756 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.756 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.775 -05:00 [DBG] js found in database: true
2021-03-31 12:30:51.776 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:30:51.782 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:30:51.783 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617211851,"exp":1617215451,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617211789,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:30:51.796 -05:00 [DBG] Creating userinfo response
2021-03-31 12:30:51.799 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:30:51.800 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:30:51.809 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.811 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 12:30:51.813 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:30:51.816 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:30:51.824 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 12:30:51.826 -05:00 [DBG] End userinfo request
2021-03-31 12:30:51.857 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:30:51.859 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:30:51.861 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:30:51.863 -05:00 [DBG] Rendering check session result
2021-03-31 12:34:05.012 -05:00 [INF] Starting host...
2021-03-31 12:34:09.225 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-31 12:34:09.419 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-31 12:34:09.420 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-31 12:34:09.420 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-31 12:34:09.421 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-31 12:34:09.421 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-31 12:34:09.421 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-31 12:34:11.440 -05:00 [DBG] Login Url: /Account/Login
2021-03-31 12:34:11.443 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-31 12:34:11.444 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-31 12:34:11.445 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-31 12:34:11.446 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-31 12:34:11.448 -05:00 [DBG] Error Url: /home/error
2021-03-31 12:34:11.450 -05:00 [DBG] Error Id Parameter: errorId
2021-03-31 12:34:21.167 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:34:22.750 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:34:22.754 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:34:22.761 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:34:22.778 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:34:22.781 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:34:22.786 -05:00 [DBG] Start discovery request
2021-03-31 12:34:23.408 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:34:23.577 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:34:23.585 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:34:23.587 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:34:23.593 -05:00 [DBG] Start authorize request
2021-03-31 12:34:23.602 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:34:23.621 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:34:24.108 -05:00 [DBG] js found in database: true
2021-03-31 12:34:24.119 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:34:24.133 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:34:24.210 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:24.282 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:24.302 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:24.309 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:24.317 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:34:24.339 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","AllowedRedirectUris":["http://localhost:3000/"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"b8f97fd79f2b4e54933221df02392b28","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/","response_type":"code","scope":"openid profile web_api","state":"b8f97fd79f2b4e54933221df02392b28","code_challenge":"4FH5y_Nct4I_MXjwY9atyNrVoyn-i-goiBf4lZOx9pg","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:34:24.529 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:34:24.532 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:34:24.594 -05:00 [DBG] iNRrn5Q3JvTIUDv95Zg9EAAWMbl9cI5i3aHldY9e5jk= not found in database
2021-03-31 12:34:24.794 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****TLas","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDCOO4192:00000011","TimeStamp":"2021-03-31T17:34:24.0000000Z","ProcessId":28860,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:34:24.805 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/","State":"b8f97fd79f2b4e54933221df02392b28","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:34:32.392 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:34:32.408 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:34:32.413 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:34:32.415 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:34:32.417 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:34:32.420 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:34:32.422 -05:00 [DBG] Start discovery request
2021-03-31 12:34:32.432 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:34:32.532 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:34:32.535 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:34:32.537 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:34:32.541 -05:00 [DBG] Start authorize request
2021-03-31 12:34:32.542 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:34:32.544 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:34:32.568 -05:00 [DBG] js found in database: true
2021-03-31 12:34:32.569 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:34:32.572 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:34:32.578 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:32.583 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:32.590 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:32.594 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:32.596 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:34:32.600 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","AllowedRedirectUris":["http://localhost:3000/"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"bacf1ffb2f3f476faafcdd31f012b1bf","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/","response_type":"code","scope":"openid profile web_api","state":"bacf1ffb2f3f476faafcdd31f012b1bf","code_challenge":"fnnGVTCq8772LvKde5T86UNAn8btJgOgc-x3tIRaJlE","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:34:32.617 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:34:32.618 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:34:32.624 -05:00 [DBG] DC1HTHmwrMx6SnYv3YDaq+M/PX0NvQd0IznJtHncCn8= not found in database
2021-03-31 12:34:32.629 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****KSs4","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDCOO4192:00000013","TimeStamp":"2021-03-31T17:34:32.0000000Z","ProcessId":28860,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:34:32.640 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/","State":"bacf1ffb2f3f476faafcdd31f012b1bf","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:34:33.864 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:34:33.877 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:34:33.879 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:34:33.882 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:34:33.891 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:34:33.893 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:34:33.897 -05:00 [DBG] Start discovery request
2021-03-31 12:34:33.921 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:34:33.960 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:34:33.970 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:34:33.972 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:34:33.975 -05:00 [DBG] Start authorize request
2021-03-31 12:34:33.977 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:34:33.977 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:34:33.998 -05:00 [DBG] js found in database: true
2021-03-31 12:34:33.998 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:34:34.001 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:34:34.005 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:34.010 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:34.014 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:34.018 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:34.021 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:34:34.023 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","AllowedRedirectUris":["http://localhost:3000/"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"4027ed0994fd43e7ba4b0373aa269485","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/","response_type":"code","scope":"openid profile web_api","state":"4027ed0994fd43e7ba4b0373aa269485","code_challenge":"BOMmVQ2RSmgG1xtOIRhFjYVydmDPTRkyWdc-PluJNQ8","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:34:34.036 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:34:34.037 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:34:34.042 -05:00 [DBG] FFV7ghASMX4MWHHlxdERufntavLjQZsmt+v3oW9//eM= not found in database
2021-03-31 12:34:34.048 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****HXy0","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDCOO4192:00000015","TimeStamp":"2021-03-31T17:34:34.0000000Z","ProcessId":28860,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:34:34.056 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/","State":"4027ed0994fd43e7ba4b0373aa269485","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:34:42.477 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:34:42.484 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:34:42.484 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:34:42.485 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:34:42.487 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:34:42.488 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:34:42.493 -05:00 [DBG] Start discovery request
2021-03-31 12:34:42.500 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:34:42.720 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:34:42.723 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:34:42.729 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:34:42.732 -05:00 [DBG] Start authorize request
2021-03-31 12:34:42.735 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:34:42.735 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:34:42.757 -05:00 [DBG] js found in database: true
2021-03-31 12:34:42.758 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:34:42.761 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:34:42.764 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:42.769 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:42.774 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:34:42.779 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:34:42.782 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:34:42.789 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","AllowedRedirectUris":["http://localhost:3000/"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"db6ee824a9f8407d80e335d49b12325e","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/","response_type":"code","scope":"openid profile web_api","state":"db6ee824a9f8407d80e335d49b12325e","code_challenge":"1UmZ2oLDTmxmrqpR4F4Jv9aBnPwL9eCcAUjbi49JwOM","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:34:42.811 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:34:42.811 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:34:42.815 -05:00 [DBG] 0j3VDc495YmBUWFNDDflgrbF5v2pZiw0ScUxUCsodhY= not found in database
2021-03-31 12:34:42.823 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****280Y","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDCOO4192:00000017","TimeStamp":"2021-03-31T17:34:42.0000000Z","ProcessId":28860,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:34:42.830 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/","State":"db6ee824a9f8407d80e335d49b12325e","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:38:18.317 -05:00 [INF] Starting host...
2021-03-31 12:38:22.943 -05:00 [INF] Starting IdentityServer4 version 3.1.0.0
2021-03-31 12:38:23.119 -05:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2021-03-31 12:38:23.120 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2021-03-31 12:38:23.120 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2021-03-31 12:38:23.121 -05:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2021-03-31 12:38:23.121 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2021-03-31 12:38:23.121 -05:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2021-03-31 12:38:24.798 -05:00 [DBG] Login Url: /Account/Login
2021-03-31 12:38:24.805 -05:00 [DBG] Login Return Url Parameter: ReturnUrl
2021-03-31 12:38:24.806 -05:00 [DBG] Logout Url: /Account/Logout
2021-03-31 12:38:24.807 -05:00 [DBG] ConsentUrl Url: /consent
2021-03-31 12:38:24.809 -05:00 [DBG] Consent Return Url Parameter: returnUrl
2021-03-31 12:38:24.809 -05:00 [DBG] Error Url: /home/error
2021-03-31 12:38:24.811 -05:00 [DBG] Error Id Parameter: errorId
2021-03-31 12:38:31.710 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:38:33.405 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:38:33.410 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:38:33.427 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:38:33.443 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:38:33.445 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:38:33.450 -05:00 [DBG] Start discovery request
2021-03-31 12:38:34.078 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:39:09.205 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:39:09.259 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:39:09.260 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:39:09.262 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:39:09.266 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:39:09.269 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:39:09.273 -05:00 [DBG] Start discovery request
2021-03-31 12:39:09.288 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:39:09.397 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:39:09.404 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:39:09.406 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:39:09.410 -05:00 [DBG] Start authorize request
2021-03-31 12:39:09.420 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:39:09.438 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:39:09.873 -05:00 [DBG] js found in database: true
2021-03-31 12:39:09.882 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:09.895 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:39:09.979 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:10.053 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:10.068 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:10.072 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:10.079 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:39:10.098 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","AllowedRedirectUris":["http://localhost:3000/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"query","GrantType":"authorization_code","RequestedScopes":"openid profile web_api","State":"390819287c6c4232b5f55c5198c0bb5b","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"js","redirect_uri":"http://localhost:3000/signin-oidc","response_type":"code","scope":"openid profile web_api","state":"390819287c6c4232b5f55c5198c0bb5b","code_challenge":"i84MYgRRSjbXqvO4HVMPQh1AZEQw4HttE0-joRu_kPE","code_challenge_method":"S256","response_mode":"query"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:39:10.279 -05:00 [DBG] Client is configured to not require consent, no consent is required
2021-03-31 12:39:10.283 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:39:10.352 -05:00 [DBG] JkOrnehXdjCH05vrLCjGvF0U8mwkiLbK+WzFpImceR0= not found in database
2021-03-31 12:39:10.538 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":"http://localhost:3000/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****DAlM","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDF483V35:00000011","TimeStamp":"2021-03-31T17:39:10.0000000Z","ProcessId":24780,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:39:10.557 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"js","RedirectUri":"http://localhost:3000/signin-oidc","State":"390819287c6c4232b5f55c5198c0bb5b","Scope":"openid profile web_api","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:39:10.941 -05:00 [DBG] CORS request made for path: /.well-known/openid-configuration from origin: http://localhost:3000
2021-03-31 12:39:10.959 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:39:10.962 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:39:10.966 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:39:10.985 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:39:10.989 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:39:10.990 -05:00 [DBG] Start discovery request
2021-03-31 12:39:11.000 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:39:11.043 -05:00 [DBG] CORS request made for path: /connect/token from origin: http://localhost:3000
2021-03-31 12:39:11.049 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:39:11.052 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:39:11.053 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:39:11.060 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:39:11.061 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:39:11.071 -05:00 [DBG] Start token request.
2021-03-31 12:39:11.073 -05:00 [DBG] Start client validation
2021-03-31 12:39:11.078 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:39:11.080 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:39:11.088 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:39:11.089 -05:00 [DBG] Secret id found: js
2021-03-31 12:39:11.113 -05:00 [DBG] js found in database: true
2021-03-31 12:39:11.114 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:11.119 -05:00 [DBG] Public Client - skipping secret validation success
2021-03-31 12:39:11.119 -05:00 [DBG] Client validation success
2021-03-31 12:39:11.122 -05:00 [INF] {"ClientId":"js","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KDF483V36:00000015","TimeStamp":"2021-03-31T17:39:11.0000000Z","ProcessId":24780,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:39:11.131 -05:00 [DBG] Start token request validation
2021-03-31 12:39:11.136 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:39:11.161 -05:00 [DBG] JkOrnehXdjCH05vrLCjGvF0U8mwkiLbK+WzFpImceR0= found in database: true
2021-03-31 12:39:11.211 -05:00 [DBG] removing JkOrnehXdjCH05vrLCjGvF0U8mwkiLbK+WzFpImceR0= persisted grant from database
2021-03-31 12:39:11.231 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:39:11.237 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:39:11.241 -05:00 [INF] Token request validation success, {"ClientId":"js","ClientName":"JavaScript client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"1XH49kd9J4R2XCdR1tK-x-n3WNgPlJ0P_NrnsBQDAlM","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"js","client_secret":"***REDACTED***","code":"1XH49kd9J4R2XCdR1tK-x-n3WNgPlJ0P_NrnsBQDAlM","redirect_uri":"http://localhost:3000/signin-oidc","code_verifier":"83bd5841f5ca47e68b33a48f39571f9c6b91b662913c4fd3a75fea2510e72566aa4074ad93d945dfb4ac82ca7228003c","grant_type":"authorization_code"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:39:11.273 -05:00 [DBG] js found in database: true
2021-03-31 12:39:11.273 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:11.279 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:11.284 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:11.297 -05:00 [DBG] Getting claims for access token for client: js
2021-03-31 12:39:11.298 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 12:39:11.480 -05:00 [DBG] js found in database: true
2021-03-31 12:39:11.480 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:11.487 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:11.491 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:11.503 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: js
2021-03-31 12:39:11.505 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:39:11.511 -05:00 [INF] {"ClientId":"js","ClientName":"JavaScript client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****jIhQ","$type":"Token"},{"TokenType":"access_token","TokenValue":"****01QQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDF483V36:00000015","TimeStamp":"2021-03-31T17:39:11.0000000Z","ProcessId":24780,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:39:11.521 -05:00 [DBG] Token request success.
2021-03-31 12:39:11.546 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:39:11.554 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:39:11.555 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:39:11.565 -05:00 [DBG] CORS request made for path: /connect/userinfo from origin: http://localhost:3000
2021-03-31 12:39:11.572 -05:00 [DBG] Origin http://localhost:3000 is allowed: true
2021-03-31 12:39:11.573 -05:00 [DBG] CorsPolicyService allowed origin: http://localhost:3000
2021-03-31 12:39:11.574 -05:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2021-03-31 12:39:11.578 -05:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2021-03-31 12:39:11.580 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2021-03-31 12:39:11.587 -05:00 [DBG] Start userinfo request
2021-03-31 12:39:11.591 -05:00 [DBG] Bearer token found in header
2021-03-31 12:39:11.684 -05:00 [DBG] js found in database: true
2021-03-31 12:39:11.684 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:11.707 -05:00 [DBG] js found in database: true
2021-03-31 12:39:11.707 -05:00 [DBG] client configuration validation for client js succeeded.
2021-03-31 12:39:11.714 -05:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2021-03-31 12:39:11.718 -05:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1617212351,"exp":1617215951,"iss":"https://localhost:5000","aud":"web_api","client_id":"js","sub":"1","auth_time":1617211789,"idp":"local","employee_id":"","scope":["openid","profile","web_api"],"amr":"pwd"},"$type":"TokenValidationLog"}
2021-03-31 12:39:11.728 -05:00 [DBG] Creating userinfo response
2021-03-31 12:39:11.733 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:39:11.735 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:39:11.739 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:11.745 -05:00 [DBG] Requested claim types: sub email website given_name family_name name
2021-03-31 12:39:11.746 -05:00 [DBG] Scopes in access token: openid profile web_api
2021-03-31 12:39:11.750 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:11.759 -05:00 [INF] Profile service returned the following claim types: sub name given_name family_name email website email employee_id
2021-03-31 12:39:11.760 -05:00 [DBG] End userinfo request
2021-03-31 12:39:11.872 -05:00 [DBG] Request path /connect/checksession matched to endpoint type Checksession
2021-03-31 12:39:11.874 -05:00 [DBG] Endpoint enabled: Checksession, successfully created handler: IdentityServer4.Endpoints.CheckSessionEndpoint
2021-03-31 12:39:11.876 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.CheckSessionEndpoint for /connect/checksession
2021-03-31 12:39:11.879 -05:00 [DBG] Rendering check session result
2021-03-31 12:39:47.860 -05:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2021-03-31 12:39:47.864 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2021-03-31 12:39:47.865 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2021-03-31 12:39:47.868 -05:00 [DBG] Start discovery request
2021-03-31 12:39:47.885 -05:00 [DBG] Found ["openid","profile","web_api"] as all scopes in database
2021-03-31 12:39:48.213 -05:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2021-03-31 12:39:48.219 -05:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2021-03-31 12:39:48.222 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2021-03-31 12:39:48.229 -05:00 [DBG] Start key discovery request
2021-03-31 12:39:48.358 -05:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2021-03-31 12:39:48.362 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2021-03-31 12:39:48.363 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2021-03-31 12:39:48.368 -05:00 [DBG] Start authorize request
2021-03-31 12:39:48.371 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:39:48.373 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:39:48.418 -05:00 [DBG] mvc found in database: true
2021-03-31 12:39:48.418 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:39:48.421 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:39:48.429 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:48.448 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:48.453 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:48.456 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:48.459 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:39:48.461 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljhQ3ZtwAc6r88hbHh_Blo7vxYfZnM3B9KEmYzh_lKc0O9bNfJnl540qGyfXtbRR3LY1SfuMp8KkbsdZrdR7-CHDZSff33r1TtiuX4kZgTJb5SmmS0t7XAVyphDIARruPryxdKOm_G1TPpoPMV-0Hca1M2666qTUUXB8WaSTfLStkGYso-yYSfyjtxrZTHDGj08PMM-jJxIwM7sE8K8UTVmY2OHiKQG03NCOU4qgvwLzGxxoEmai5qjmdrAZALpkf63_eu4hymUIT8PFDUFrNcY9WEeizjz3BAks33BqHoTRC_Sr8kASOKdNBQRygKq1umMJAkcrRuclv79jMyIruiYrFX1FCoovDTd9ZHgoMfLkg","UiLocales":null,"Nonce":"637528091882864602.MzRlNWUwYjktNTcxYy00NDIyLWI3NjQtYmJiYjExNDIwZWQ2OTMxZGYxMjctOGZkNi00ODc2LWI0OWEtOGMyOGE3YmY0YjY2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"J-FikOvo-GJ7yjB2_UtHCLBI2ozgffMKSGi6YpTSCKo","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528091882864602.MzRlNWUwYjktNTcxYy00NDIyLWI3NjQtYmJiYjExNDIwZWQ2OTMxZGYxMjctOGZkNi00ODc2LWI0OWEtOGMyOGE3YmY0YjY2","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljhQ3ZtwAc6r88hbHh_Blo7vxYfZnM3B9KEmYzh_lKc0O9bNfJnl540qGyfXtbRR3LY1SfuMp8KkbsdZrdR7-CHDZSff33r1TtiuX4kZgTJb5SmmS0t7XAVyphDIARruPryxdKOm_G1TPpoPMV-0Hca1M2666qTUUXB8WaSTfLStkGYso-yYSfyjtxrZTHDGj08PMM-jJxIwM7sE8K8UTVmY2OHiKQG03NCOU4qgvwLzGxxoEmai5qjmdrAZALpkf63_eu4hymUIT8PFDUFrNcY9WEeizjz3BAks33BqHoTRC_Sr8kASOKdNBQRygKq1umMJAkcrRuclv79jMyIruiYrFX1FCoovDTd9ZHgoMfLkg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:39:48.483 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 12:39:48.484 -05:00 [INF] Showing consent: User has not yet consented
2021-03-31 12:39:48.564 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:39:48.585 -05:00 [DBG] mvc found in database: true
2021-03-31 12:39:48.586 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:39:48.589 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:39:48.593 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:48.598 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:48.602 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:48.607 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:39:48.609 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:39:48.636 -05:00 [DBG] mvc found in database: true
2021-03-31 12:39:48.637 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:39:48.647 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:39:48.676 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.343 -05:00 [DBG] CORS request made for path: /Consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2021-03-31 12:40:00.384 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:40:00.406 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.407 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.410 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:40:00.415 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.420 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.423 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.428 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.430 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:40:00.434 -05:00 [INF] {"SubjectId":"1","ClientId":"mvc","RequestedScopes":["openid","profile","web_api","offline_access"],"GrantedScopes":["openid","profile","web_api","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HM7KDF483V35:00000019","TimeStamp":"2021-03-31T17:40:00.0000000Z","ProcessId":24780,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"ConsentGrantedEvent"}
2021-03-31 12:40:00.481 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.482 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.501 -05:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2021-03-31 12:40:00.507 -05:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2021-03-31 12:40:00.509 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2021-03-31 12:40:00.516 -05:00 [DBG] Start authorize callback request
2021-03-31 12:40:00.533 -05:00 [DBG] User in authorize request: 1
2021-03-31 12:40:00.533 -05:00 [DBG] Start authorize request protocol validation
2021-03-31 12:40:00.554 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.555 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.559 -05:00 [DBG] Checking for PKCE parameters
2021-03-31 12:40:00.563 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.569 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.572 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.576 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.577 -05:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2021-03-31 12:40:00.581 -05:00 [DBG] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","AllowedRedirectUris":["https://localhost:44359/signin-oidc"],"SubjectId":"1","ResponseType":"code","ResponseMode":"form_post","GrantType":"authorization_code","RequestedScopes":"openid profile web_api offline_access","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljhQ3ZtwAc6r88hbHh_Blo7vxYfZnM3B9KEmYzh_lKc0O9bNfJnl540qGyfXtbRR3LY1SfuMp8KkbsdZrdR7-CHDZSff33r1TtiuX4kZgTJb5SmmS0t7XAVyphDIARruPryxdKOm_G1TPpoPMV-0Hca1M2666qTUUXB8WaSTfLStkGYso-yYSfyjtxrZTHDGj08PMM-jJxIwM7sE8K8UTVmY2OHiKQG03NCOU4qgvwLzGxxoEmai5qjmdrAZALpkf63_eu4hymUIT8PFDUFrNcY9WEeizjz3BAks33BqHoTRC_Sr8kASOKdNBQRygKq1umMJAkcrRuclv79jMyIruiYrFX1FCoovDTd9ZHgoMfLkg","UiLocales":null,"Nonce":"637528091882864602.MzRlNWUwYjktNTcxYy00NDIyLWI3NjQtYmJiYjExNDIwZWQ2OTMxZGYxMjctOGZkNi00ODc2LWI0OWEtOGMyOGE3YmY0YjY2","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"dKmygAruJO8BiukCTnJ78w","Raw":{"client_id":"mvc","redirect_uri":"https://localhost:44359/signin-oidc","response_type":"code","scope":"openid profile web_api offline_access","code_challenge":"J-FikOvo-GJ7yjB2_UtHCLBI2ozgffMKSGi6YpTSCKo","code_challenge_method":"S256","response_mode":"form_post","nonce":"637528091882864602.MzRlNWUwYjktNTcxYy00NDIyLWI3NjQtYmJiYjExNDIwZWQ2OTMxZGYxMjctOGZkNi00ODc2LWI0OWEtOGMyOGE3YmY0YjY2","state":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljhQ3ZtwAc6r88hbHh_Blo7vxYfZnM3B9KEmYzh_lKc0O9bNfJnl540qGyfXtbRR3LY1SfuMp8KkbsdZrdR7-CHDZSff33r1TtiuX4kZgTJb5SmmS0t7XAVyphDIARruPryxdKOm_G1TPpoPMV-0Hca1M2666qTUUXB8WaSTfLStkGYso-yYSfyjtxrZTHDGj08PMM-jJxIwM7sE8K8UTVmY2OHiKQG03NCOU4qgvwLzGxxoEmai5qjmdrAZALpkf63_eu4hymUIT8PFDUFrNcY9WEeizjz3BAks33BqHoTRC_Sr8kASOKdNBQRygKq1umMJAkcrRuclv79jMyIruiYrFX1FCoovDTd9ZHgoMfLkg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"6.7.1.0"},"$type":"AuthorizeRequestValidationLog"}
2021-03-31 12:40:00.605 -05:00 [DBG] Scopes contains offline_access, consent is required
2021-03-31 12:40:00.609 -05:00 [INF] User consented to scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 12:40:00.610 -05:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","web_api","offline_access"]
2021-03-31 12:40:00.616 -05:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: 1
2021-03-31 12:40:00.623 -05:00 [DBG] wpoLTEdzjFGLw3nr0g0sE+zpRZAD/+/LeapdwXDttM4= found in database
2021-03-31 12:40:00.635 -05:00 [DBG] Creating Authorization Code Flow response.
2021-03-31 12:40:00.638 -05:00 [DBG] csSJgUbicEuCQuc8BrSCSOw1+5QmcGFZYR543s/aLeM= not found in database
2021-03-31 12:40:00.648 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"https://localhost:44359/signin-oidc","Endpoint":"Authorize","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"code","TokenValue":"****k4Jw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDF483V35:0000001B","TimeStamp":"2021-03-31T17:40:00.0000000Z","ProcessId":24780,"LocalIpAddress":"127.0.0.1:5000","RemoteIpAddress":"127.0.0.1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:40:00.654 -05:00 [DBG] Authorize endpoint response
{"SubjectId":"1","ClientId":"mvc","RedirectUri":"https://localhost:44359/signin-oidc","State":"CfDJ8JB4Y5yN1IJHoTkjZC9-PljhQ3ZtwAc6r88hbHh_Blo7vxYfZnM3B9KEmYzh_lKc0O9bNfJnl540qGyfXtbRR3LY1SfuMp8KkbsdZrdR7-CHDZSff33r1TtiuX4kZgTJb5SmmS0t7XAVyphDIARruPryxdKOm_G1TPpoPMV-0Hca1M2666qTUUXB8WaSTfLStkGYso-yYSfyjtxrZTHDGj08PMM-jJxIwM7sE8K8UTVmY2OHiKQG03NCOU4qgvwLzGxxoEmai5qjmdrAZALpkf63_eu4hymUIT8PFDUFrNcY9WEeizjz3BAks33BqHoTRC_Sr8kASOKdNBQRygKq1umMJAkcrRuclv79jMyIruiYrFX1FCoovDTd9ZHgoMfLkg","Scope":"openid profile web_api offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2021-03-31 12:40:00.668 -05:00 [DBG] Augmenting SignInContext
2021-03-31 12:40:00.678 -05:00 [INF] AuthenticationScheme: Identity.Application signed in.
2021-03-31 12:40:00.796 -05:00 [DBG] Request path /connect/token matched to endpoint type Token
2021-03-31 12:40:00.799 -05:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2021-03-31 12:40:00.801 -05:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2021-03-31 12:40:00.803 -05:00 [DBG] Start token request.
2021-03-31 12:40:00.804 -05:00 [DBG] Start client validation
2021-03-31 12:40:00.805 -05:00 [DBG] Start parsing Basic Authentication secret
2021-03-31 12:40:00.805 -05:00 [DBG] Start parsing for secret in post body
2021-03-31 12:40:00.810 -05:00 [DBG] Parser found secret: PostBodySecretParser
2021-03-31 12:40:00.810 -05:00 [DBG] Secret id found: mvc
2021-03-31 12:40:00.830 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.830 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.843 -05:00 [DBG] Secret validator success: HashedSharedSecretValidator
2021-03-31 12:40:00.843 -05:00 [DBG] Client validation success
2021-03-31 12:40:00.846 -05:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HM7KDF483V37:00000003","TimeStamp":"2021-03-31T17:40:00.0000000Z","ProcessId":24780,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2021-03-31 12:40:00.851 -05:00 [DBG] Start token request validation
2021-03-31 12:40:00.852 -05:00 [DBG] Start validation of authorization code token request
2021-03-31 12:40:00.855 -05:00 [DBG] csSJgUbicEuCQuc8BrSCSOw1+5QmcGFZYR543s/aLeM= found in database: true
2021-03-31 12:40:00.858 -05:00 [DBG] removing csSJgUbicEuCQuc8BrSCSOw1+5QmcGFZYR543s/aLeM= persisted grant from database
2021-03-31 12:40:00.865 -05:00 [DBG] Client required a proof key for code exchange. Starting PKCE validation
2021-03-31 12:40:00.868 -05:00 [DBG] Validation of authorization code token request success
2021-03-31 12:40:00.868 -05:00 [INF] Token request validation success, {"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"JKdz5dOq-qFKOrPsGPD0muuw0fj8o9PWdtAbFr9k4Jw","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"JKdz5dOq-qFKOrPsGPD0muuw0fj8o9PWdtAbFr9k4Jw","grant_type":"authorization_code","redirect_uri":"https://localhost:44359/signin-oidc","code_verifier":"7S0yOvRt21OiAk9_7-p7bxVq3HRae4y1-IqRPIMkWws"},"$type":"TokenRequestValidationLog"}
2021-03-31 12:40:00.892 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.893 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.899 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.903 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.905 -05:00 [DBG] Getting claims for access token for client: mvc
2021-03-31 12:40:00.905 -05:00 [DBG] Getting claims for access token for subject: 1
2021-03-31 12:40:00.918 -05:00 [DBG] Creating refresh token
2021-03-31 12:40:00.919 -05:00 [DBG] Setting an absolute lifetime: 2592000
2021-03-31 12:40:00.933 -05:00 [DBG] CgrZCzfTJFJ4Nwndx0yyzjVg5viBji6OAnW/KSe4pJM= not found in database
2021-03-31 12:40:00.954 -05:00 [DBG] mvc found in database: true
2021-03-31 12:40:00.955 -05:00 [DBG] client configuration validation for client mvc succeeded.
2021-03-31 12:40:00.960 -05:00 [DBG] Found ["openid","profile"] identity scopes in database
2021-03-31 12:40:00.965 -05:00 [DBG] Found ["web_api"] API scopes in database
2021-03-31 12:40:00.967 -05:00 [DBG] Getting claims for identity token for subject: 1 and client: mvc
2021-03-31 12:40:00.968 -05:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2021-03-31 12:40:00.971 -05:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":"1","Scopes":"openid profile web_api offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****t0Bg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****PFgg","$type":"Token"},{"TokenType":"access_token","TokenValue":"****so8Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HM7KDF483V37:00000003","TimeStamp":"2021-03-31T17:40:00.0000000Z","ProcessId":24780,"LocalIpAddress":"::1:5000","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2021-03-31 12:40:00.980 -05:00 [DBG] Token request success.
